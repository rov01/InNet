angular.module("InNet",["ui.router","ui.bootstrap","timer","angular-storage","angular-jwt","leaflet-directive","angular.filter"]),angular.module("InNet").service("BranchSvc",["$http",function(e){this.fetch=function(t){return e.get("/api/branch?corps="+t)},this.fetchByName=function(t){return e.get("/api/branch/name?branch="+t)},this.totalListFindByName=function(t){return e.get("/api/branch/name/total?branch="+t)},this.getDetails=function(t){return e.get("/api/branch/"+t)},this.update=function(t){return e.put("/api/branch/"+t.branch,t)},this.updateDirector=function(t){return e.put("/api/branch?branch="+t.branch,t)}}]),angular.module("InNet").controller("CarEditCtrl",["$scope",function(e){}]),angular.module("InNet").controller("CarIndexCtrl",["$scope",function(e){}]),angular.module("InNet").service("CarSvc",["$http",function(e){this.fetch=function(){return e.get("/api/cars")},this.findByBranch=function(t){return e.get("/api/cars/"+t)},this.update=function(t){return e.put("/api/cars/"+t.id,t)}}]),angular.module("InNet").controller("CaseCtrl",["$scope","$stateParams","$modal","CaseSvc","$log","SocketSvc","UserSvc",function(e,t,s,n,r,i,a){e.maxSize=5,e.bigTotalItems=175,e.bigCurrentPage=1,n.fetch(a.userCorps()).success(function(t){e.cases=t}),i.on("newCase",function(t){e.cases.unshift(t)}),i.on("caseModified",function(t){e.cases[t.caseId-1]=t}),e.choose=function(t){n.findById(e.cases[t]._id).success(function(t){e.caseDetails=t})},e.addNewCase=function(){var t=s.open({templateUrl:"views/case/case.modal.html",controller:"CaseModalCtrl",size:"lg",resolve:{caseId:function(){return _.isEmpty(e.cases)?0:e.cases[0].caseId},caseDetails:function(){return{}}}});t.result.then(function(e){console.log(e)},function(){r.info("Modal dismissed at: "+new Date)})},e.editCase=function(t){s.open({templateUrl:"views/case/case.modal.html",controller:"CaseModalCtrl",size:"lg",resolve:{caseId:function(){return t},caseDetails:function(){return e.caseDetails}}})}}]),angular.module("InNet").controller("CaseModalCtrl",["$scope","CarSvc","$modalInstance","CaseSvc","$state","caseId","caseDetails","StSvc","$window","BranchSvc","UserSvc",function(e,t,s,n,r,i,a,c,o,u,l){function m(e){var t=[],s=[],n=[];if(e.cars){for(var r=e.cars.length-1;r>=0;r--)t.push(e.cars[r].radioCode),s.push(e.cars[r]._id),n.push(e.cars[r].branch);return{dispatchList:t,carIds:s,branches:n}}return{}}function d(t){for(var s=_.unique(t),n=[],r=0;r<e.branches.length;r++)s.indexOf(e.branches[r].name)>-1&&n.push(e.branches[r]._id);return n}if(_.isEmpty(a))e.isNew=!0,f=[];else{e.isNew=!1;var f=a.cars}u.fetch(l.userCorps()).success(function(t){e.branches=t}),e.caseObj={address:a.address||null,phone:a.phone||null,type:a.type||"火警",types:["火警","救護","災害","檢舉","其他"],carIds:m(a).carIds||[],dispatchList:m(a).dispatchList||[],branches:m(a).branches||[]},e.dispatchList=e.caseObj.dispatchList.join(" "),e.getCars=function(s){t.findByBranch(s.name).success(function(t){for(var s=t.length-1;s>=0;s--)e.caseObj.carIds.indexOf(t[s]._id)>-1&&(t[s].isChecked=!0);e.cars=t})},e.cancel=function(){s.dismiss("cancel")},e.cancelDispatch=function(t){t.isChecked=!1,f.splice(f.indexOf(t),1),e.caseObj.carIds.splice(e.caseObj.dispatchList.indexOf(t._id),1),e.caseObj.dispatchList.splice(e.caseObj.dispatchList.indexOf(t.radioCode),1),e.caseObj.branches.splice(e.caseObj.dispatchList.indexOf(t.branch),1),e.dispatchList=e.caseObj.dispatchList.join(" ")},e.dispatch=function(t){t.isChecked=!0,f.push(t),e.caseObj.carIds.push(t._id),e.caseObj.dispatchList.push(t.radioCode),e.caseObj.branches.push(t.branch),e.dispatchList=e.caseObj.dispatchList.join(" ")},e.closeCase=function(){c.count(a._id).success(function(e){e>0?o.alert("尚有隊員在安全管制"):(n.closeCase({id:a._id,isOngoing:!1}).success(function(e){console.log(e)}),s.dismiss("cancel"),r.reload())})},e.save=function(){n.create({caseId:i+1,address:e.caseObj.address||"測試",officerReceiver:l.currentUser()||"劉曉曼",type:e.caseObj.type||"救護",phone:e.caseObj.phone||"測試",branches:_.unique(e.caseObj.branches),branchIds:d(e.caseObj.branches),cars:e.caseObj.carIds,isOngoing:!0,corps:l.userCorps()}).success(function(e){s.close(e)})},e.update=function(){var t={id:a._id,caseId:i,address:e.caseObj.address,officerReceiver:l.currentUser()||"劉曉曼",type:e.caseObj.type,phone:e.caseObj.phone,branches:_.unique(e.caseObj.branches),branchIds:d(e.caseObj.branches),cars:e.caseObj.carIds,isOngoing:!0};n.update(t),s.dismiss("cancel")}}]),angular.module("InNet").service("CaseSvc",["$http",function(e){this.fetch=function(t){return e.get("/api/cases?corps="+t)},this.fetchAll=function(){return e.get("/api/cases/details")},this.fetchRelativeCase=function(t){return e.get("/api/cases/branch?branch="+t.branch+"&accessLevel="+t.accessLevel+"&corps="+t.corps)},this.fetchDetails=function(t){return e.get("/api/cases/details/"+t)},this.findById=function(t){return e.get("/api/cases/"+t)},this.create=function(t){return e.post("/api/cases",t)},this.update=function(t){return e.put("/api/cases/"+t.id,t)},this["delete"]=function(t){return e.post("/api/cases/"+t)},this.closeCase=function(t){return e.put("/api/cases/close?id="+t.id,t)}}]),angular.module("InNet").controller("DashboardCtrl",["$scope","$location","SocketSvc","UserSvc","BranchSvc",function(e,t,s,n,r){r.fetch(n.userCorps()).success(function(t){e.branches=t}),n.fetchOnlineUser().success(function(t){e.users=t}),s.on("userLogin",function(t){e.users.push(t)}),s.on("userDisconnect",function(t){e.users=e.users.filter(function(e){return e.username!=t.username})}),s.on("userLogout",function(t){e.users=e.users.filter(function(e){return e.username!=t.username})}),e.$on("$destroy",function(e){s.removeAllListeners()})}]),angular.module("InNet").directive("minimalizaSidebar",["$timeout",function(e){return{restrict:"A",template:'<a class="navbar-minimalize minimalize-styl-2 btn btn-primary" href="" ng-click="minimalize()"><i class="fa fa-bars"></i></a>',controller:["$scope","$element",function(e,t){e.minimalize=function(){$("body").toggleClass("mini-navbar"),!$("body").hasClass("mini-navbar")||$("body").hasClass("body-small")?($("#side-menu").hide(),setTimeout(function(){$("#side-menu").fadeIn(500)},100)):$("body").hasClass("fixed-sidebar")?($("#side-menu").hide(),setTimeout(function(){$("#side-menu").fadeIn(500)},300)):$("#side-menu").removeAttr("style")}}]}}]).directive("sideNavigation",["$timeout",function(e){return{restrict:"A",link:function(t,s){e(function(){s.metisMenu()})}}}]).directive("iboxTools",["$timeout",function(e){return{restrict:"A",scope:!0,templateUrl:"views/common/ibox_tools.html",controller:["$scope","$element",function(t,s){t.showhide=function(){var t=s.closest("div.ibox"),n=s.find("i:first"),r=t.find("div.ibox-content");r.slideToggle(200),n.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),t.toggleClass("").toggleClass("border-bottom"),e(function(){t.resize(),t.find("[id^=map-]").resize()},50)},t.closebox=function(){var e=s.closest("div.ibox");e.remove()}}]}}]).directive("back",["$window",function(e){return{restrict:"A",link:function(t,s,n){s.bind("click",function(){e.history.back()})}}}]),angular.module("InNet").controller("DispatchCtrl",["$scope","$stateParams","$modal","CaseSvc","BranchSvc","CarSvc","UserSvc",function(e,t,s,n,r,i,a){n.fetch(a.userCorps()).success(function(s){e.cases=s,n.findById(e.cases[t.caseId]._id).success(function(t){e.caseDetails=t})}),r.fetch(a.userCorps()).success(function(t){e.branchList=t}),i.fetch().success(function(t){e.carsData=t}),e.addNewCase=function(){s.open({templateUrl:"/partials/casePanel/caseAddModal",controller:"CaseAddModalCtrl",size:"lg",resolve:{caseId:function(){return e.id="新增案件"},branchList:function(){return e.branchList},carsData:function(){return e.carsData},isNew:function(){return!0},caseDetails:function(){return{}}}})},e.editCase=function(){s.open({templateUrl:"/partials/casePanel/caseAddModal",controller:"CaseAddModalCtrl",size:"lg",resolve:{caseId:function(){return e.id=e.cases[t.caseId].caseId},branchList:function(){return e.branchList},carsData:function(){for(var t=e.carsData.length-1;t>=0;t--)for(var s=e.caseDetails.cars.length-1;s>=0;s--)e.carsData[t].radioCode===e.caseDetails.cars[s].radio_code&&(e.carsData[t].isChecked=!0);return e.carsData},isNew:function(){return!1},caseDetails:function(){return e.caseDetails}}})}}]),angular.module("InNet").controller("DutyListCtrl",["$scope","BranchSvc","$stateParams","SocketSvc","UserSvc","$q",function(e,t,s,n,r,i){function a(e){for(var t=0,s=0;s<e.members.length;s++)e.members[s].onDuty&&(t+=1);return t}if(r.accessLevel()<3)var c=r.userBranch();else var c=s.branch;t.totalListFindByName(c).success(function(t){e.branch=t,e.onDutyTotal=a(e.branch)})}]),angular.module("InNet").controller("DutyListEditCtrl",["$scope","BranchSvc","$stateParams","MemberSvc","$location","$window","UserSvc",function(e,t,s,n,r,i,a){if(a.accessLevel()<2)var c=a.userBranch();else var c=s.branch;t.totalListFindByName(c).success(function(t){e.branch=t,e.onDutyTotal=0}),e.check=function(e){e.onDuty=!e.onDuty},e.save=function(){t.updateDirector({branch:e.branch.name,director:e.branch.director}).success(function(){for(var t=0;t<e.branch.members.length;t++)n.updateByMemberId({name:e.branch.members[t].name,title:e.branch.members[t].title,memberId:e.branch.members[t]._id,onDuty:e.branch.members[t].onDuty,mission:e.branch.members[t].mission})}).then(function(){i.history.back()})}}]),angular.module("InNet").service("GeoSvc",["$q",function(e){this.getGeolocationCoordinates=function(){var t=e.defer();return navigator.geolocation.getCurrentPosition(function(e){t.resolve(e.coords)},function(e){t.resolve(null)}),t.promise}}]),angular.module("InNet").controller("LoginCtrl",["$scope","UserSvc","store","$state","jwtHelper","$http","SocketSvc",function(e,t,s,n,r,i,a){var c=null;e.user={},e.login=function(){t.login(e.user).success(function(e){e.success?(s.set("jwt",e.token),i.defaults.headers.common["x-access-token"]=e.token,c=e.token):console.log("password is not existed!")}).then(function(){a.init(c),a.emit("login")}).then(function(){n.go("admin"==r.decodeToken(c).role?"dutyDesk.dashboard":"director.safety.index")})}}]),angular.module("InNet").controller("MapIndexCtrl",["$scope","leafletData","GeoSvc",function(e,t,s){s.getGeolocationCoordinates().then(function(t){e.nowPos.lat=t.latitude,e.nowPos.lng=t.longitude,e.nowPos.zoom=17}),angular.extend(e,{nowPos:{lat:24.988,lng:121.5752,zoom:17},controls:{draw:{}}}),t.getMap().then(function(t){var s=e.controls.edit.featureGroup;t.on("draw:created",function(e){var t=e.layer;s.addLayer(t),FeatureCollections.push(t.toGeoJSON())})})}]),angular.module("InNet").controller("MemberCtrl",["$scope","MemberSvc","$stateParams",function(e,t,s){e.branch=s.branch,t.findByBranch(s.branch).success(function(t){e.members=t,e.members.forEach(function(e){e.workingTime=moment.duration(e.workingTime,"seconds")})})}]),angular.module("InNet").controller("MemberEditCtrl",["$scope","MemberSvc","BranchSvc","$stateParams","$window","$modal","$state",function(e,t,s,n,r,i,a){e.isDeleted=!1;var c=function(){t.findByBranch(n.branch).success(function(t){e.members=t,e.members.forEach(function(e){e.workingTime=moment.duration(e.workingTime,"seconds")})})};c(),e.save=function(){for(var t=[],i=[],a=0;a<e.members.length;a++)t.push(e.members[a]._id),i.push(e.members[a].name),("分隊長"==e.members[a].title||"小隊長"==e.members[a].title||"中隊長"==e.members[a].title||"大隊長"==e.members[a].title)&&(director=e.members[a].name);s.update({branch:n.branch,members:t,directors:i,director:director}),r.history.back()},e.addNewMember=function(){var t=i.open({templateUrl:"views/member/member.modal.html",controller:"MemberModalCtrl",size:"md",resolve:{branch:function(){return n.branch},member:function(){return{workingTime:1200}}}});t.result.then(function(t){e.members.unshift(t)})},e.update=function(e){var t=i.open({templateUrl:"views/member/member.modal.html",controller:"MemberModalCtrl",size:"md",resolve:{branch:function(){return n.branch},member:function(){return{workingTime:60*e.workingTime.minutes()+e.workingTime.seconds()}}}});t.result.then(function(e){c()})},e["delete"]=function(e){t.deleteMember(e),c()}}]),angular.module("InNet").controller("MemberModalCtrl",["$scope","branch","MemberSvc","$modalInstance","$state","member","BranchSvc","UserSvc",function(e,t,s,n,r,i,a,c){e.isNew=_.isEmpty(i),e.member={id:i.id||"",name:i.name||null,title:"消防隊員",titles:["消防隊員","小隊長","分隊長","中隊長","大隊長","副大隊長"],branch:i.branch||t,workingTime:i.workingTime||null,radioCode:i.radioCode||null,mission:"瞄子手",missions:["瞄子手","副瞄子手","司機","帶隊官","安全管制員","聯絡官"],corps:c.userCorps(),corpss:["第一救災救護大隊","第三救災救護大隊"]},a.fetch(c.userCorps()).success(function(t){if(e.branches=t,!e.isNew){for(var s=[],n=t.length-1;n>=0;n--)s.push(t[n].name);e.member.branches=s}});var o=function(e){var t=e.split("").slice(-2).join("");return"大隊"==t||"中隊"==t?"北海":e.split("").slice(0,2).join("")};e.save=function(){e.member.radioCodePrefix=o(e.member.branch),s.create(e.member).success(function(){e.member.workingTime=moment.duration(parseInt(e.member.workingTime),"seconds")}).then(function(){n.close(e.member)})},e.update=function(){var t={memberId:i._id,id:"",name:e.member.name,corps:e.member.corps,branch:e.member.branch,title:e.member.title,workingTime:e.member.workingTime,radioCode:e.member.radioCode,radioCodePrefix:o(e.member.branch)};s.updateByMemberId(t),n.close(t)},e.cancel=function(){n.dismiss("cancel")}}]),angular.module("InNet").service("MemberSvc",["$http",function(e){this.fetch=function(){return e.get("/api/members")},this.findByBranch=function(t){return e.get("/api/members/"+t)},this.fetchOnDuty=function(t){return e.get("/api/members/onDuty?branch="+t)},this.create=function(t){return e.post("/api/members/",t)},this.update=function(t){return e.put("/api/members/",t.id)},this.updateByMemberId=function(t){return e.put("/api/members/findById/"+t.memberId,t)},this.updateIsChecked=function(t){return e.put("/api/members?id="+t.memberId,t)},this.deleteMember=function(t){return e["delete"]("/api/members/"+t._id)}}]),angular.module("InNet").controller("NavCtrl",["$scope","BranchSvc","store","jwtHelper","UserSvc",function(e,t,s,n,r){e.username=r.currentUser(),e.branch=r.userBranch(),t.fetch(r.userCorps()).success(function(t){e.branches=t}),e.isValid=function(e){return r.isValid(e)}}]),angular.module("InNet").config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,s){t.otherwise("/login"),e.state("anon",{url:"","abstract":!0,template:"<ui-view>"}).state("anon.login",{url:"/login",templateUrl:"views/login.html",controller:"LoginCtrl"}).state("anon.404",{url:"/404",templateUrl:"views/404.html"}),e.state("dutyDesk",{"abstract":!0,url:"/dutyDesk",templateUrl:"views/common/content.html",data:{requiredLogin:!0,role:["admin"]}}).state("dutyDesk.dashboard",{url:"/dashboard",templateUrl:"views/dashboard.html",controller:"DashboardCtrl",data:{requiredLogin:!0,role:["admin"]}}).state("dutyDesk.case",{url:"/case",templateUrl:"views/case/case.index.html",controller:"CaseCtrl"}).state("dutyDesk.safety",{url:"/case/:id",templateUrl:"views/summary/summary.index.html",controller:"SummaryCtrl"}).state("dutyDesk.dutylist",{"abstract":!0,template:"<ui-view>"}).state("dutyDesk.dutylist.show",{url:"/dutylist/:branch",templateUrl:"views/dutylist/dutylist.index.html",controller:"DutyListCtrl"}).state("dutyDesk.dutylist.edit",{url:"/dutylist/:branch/edit",templateUrl:"views/dutylist/dutylist.edit.html",controller:"DutyListEditCtrl"}).state("dutyDesk.member",{"abstract":!0,template:"<ui-view>"}).state("dutyDesk.member.show",{url:"/member/:branch",templateUrl:"views/member/member.index.html",controller:"MemberCtrl"}).state("dutyDesk.member.edit",{url:"/member/:branch/edit",templateUrl:"views/member/member.edit.html",controller:"MemberEditCtrl"}).state("dutyDesk.car",{"abstract":!0,template:"<ui-view>"}).state("dutyDesk.car.show",{url:"/car/:branch",templateUrl:"views/cars/car.index.html",controller:"CarIndexCtrl"}).state("dutyDesk.car.edit",{url:"/car/:branch/edit",templateUrl:"views/cars/car.edit.html",controller:"CarEditCtrl"}),e.state("director",{"abstract":!0,url:"",templateUrl:"views/director/director.content.html",data:{requiredLogin:!0,role:["user"]}}).state("director.safety",{"abstract":!0,url:"/safety",template:"<ui-view>"}).state("director.safety.index",{url:"/index",templateUrl:"views/safety/safety.index.html",controller:"SafetyIndexCtrl"}).state("director.safety.management",{url:"/index/:id",templateUrl:"views/safety/safety.manage.html",controller:"SafetyManageCtrl"}).state("director.safety.summary",{url:"/summary/:id",templateUrl:"views/summary/summary.index.html",controller:"SummaryCtrl"}).state("director.map",{url:"/map",templateUrl:"views/map/map.index.html",controller:"MapIndexCtrl"}).state("director.dutylist",{"abstract":!0,url:"/dutylist",template:"<ui-view>"}).state("director.dutylist.index",{url:"/index",templateUrl:"views/dutylist/director.dutylist.index.html",controller:"DutyListCtrl"}).state("director.dutylist.edit",{url:"/edit",templateUrl:"views/dutylist/director.dutylist.edit.html",controller:"DutyListEditCtrl"})}]).run(["$rootScope","$state","$stateParams","store","jwtHelper","UserSvc","SocketSvc",function(e,t,s,n,r,i,a){e.$on("$stateChangeStart",function(e,s,a,c,o){"anon.login"==s.name?n.remove("jwt"):s.data&&s.data.requiredLogin&&(i.isLoggedIn()?-1==s.data.role.indexOf(r.decodeToken(n.get("jwt")).role)&&(e.preventDefault(),t.go("anon.login")):(e.preventDefault(),t.go("anon.login")))}),e.$on("$stateChangeError",function(e){e.preventDefault()})}]),angular.module("InNet").controller("SafetyIndexCtrl",["$scope","CaseSvc","UserSvc","SocketSvc","$rootScope",function(e,t,s,n,r){n.on("newCase",function(t){e.cases.push(t)}),n.on("caseClose",function(t){t.isOngoing||(e.cases=e.cases.filter(function(e){return e._id!=t.caseId}))});var i={branch:s.userBranch(),accessLevel:s.accessLevel(),corps:s.userCorps()};t.fetchRelativeCase(i).success(function(t){e.cases=t}),e.$on("$destroy",function(e){n.removeAllListeners()}),e.accessLevel=s.accessLevel()}]),angular.module("InNet").controller("SafetyManageCtrl",["$scope","$stateParams","$modal","StSvc","$state","MemberSvc","$log","UserSvc","BranchSvc","SocketSvc",function(e,t,s,n,r,i,a,c,o,u){var l=c.userBranch();o.fetchByName(l).success(function(t){e.details=t}),n.fetch(t.id,l).success(function(t){e.strikeTeams=t}),u.on("newSt",function(s){angular.equals(l,s.branch)&&angular.equals(t.id,s.caseId)&&e.strikeTeams.push(s)}),u.on("updateSt",function(t){for(var s=angular.copy(t.members),n=e.strikeTeams.length-1;n>=0;n--)angular.equals(e.strikeTeams[n]._id,t.id)&&(e.strikeTeams[n].position=t.position,e.strikeTeams[n].area=t.area,e.strikeTeams[n].members.push.apply(e.strikeTeams[n].members,s))}),u.on("dismiss",function(t){var s=t.stId;e.strikeTeams=e.strikeTeams.filter(function(e){return e._id!=s})}),e.strikeTeam=function(){s.open({templateUrl:"views/safety/safety.modal.html",controller:"SafetyModalCtrl",size:"md",resolve:{stId:function(){return _.isEmpty(e.strikeTeams)?0:e.strikeTeams[e.strikeTeams.length-1].id}}})},e.openSettingModal=function(t,n){var r=s.open({templateUrl:"views/safety/safety.setting.modal.html",controller:"SafetySettingCtrl",size:"lg",resolve:{strikeTeam:function(){return t}}});r.result.then(function(t){for(var s=e.strikeTeams.length-1;s>=0;s--)angular.equals(e.strikeTeams[s]._id,t.id)&&(e.strikeTeams[s].position=t.position,e.strikeTeams[s].area=t.area,e.strikeTeams[s].members.push.apply(e.strikeTeams[s].members,t.members))},function(){a.info("Modal dismissed at: "+new Date)})},e.dismiss=function(t,s){n.dismissSt({id:t._id}).success(function(){for(var e=t.members.length-1;e>=0;e--)i.updateIsChecked({memberId:t.members[e]._id,mission:t.members[e].mission,isChecked:!1})}),e.strikeTeams.splice(s,1)},e.$on("$destroy",function(e){u.removeAllListeners()})}]),angular.module("InNet").controller("SafetyModalCtrl",["$scope","$modalInstance","$stateParams","StSvc","MemberSvc","$state","$window","stId","UserSvc","BranchSvc","SocketSvc",function(e,t,s,n,r,i,a,c,o,u,l){var m=o.userBranch();e.title=m+(c+1),u.fetchByName(m).success(function(t){e.details=t}).then(function(){e.details&&(e.details.members=e.details.members.filter(function(e){return 1!=e.isChecked}),e.details.members.forEach(function(e){e.limitTime=moment.duration(e.workingTime,"seconds")}))}),e.strikeTeam={position:"第一面",positions:["第一面","第二面","第三面","第四面"],mission:"搶救小組",missions:["搶救小組","救援小組","搜救小組"],area:"第一區",areas:["第一區","第二區","第三區","第四區","第五區"]},e.check=function(e){e.isChecked=!e.isChecked},e.cancel=function(){t.dismiss("cancel")},e.save=function(){var n=e.details.members.filter(function(e){return e.isChecked===!0});if(n.length>-1){for(var i={id:c+1||0,caseId:s.id,branch:e.details.name,director:e.details.director,position:e.strikeTeam.position,positions:e.strikeTeam.positions,mission:e.strikeTeam.mission,missions:e.strikeTeam.missions,area:e.strikeTeam.area,areas:e.strikeTeam.areas,members:n,isDismissed:!1,workingTime:_.min(n,function(e){return e.workingTime}).workingTime,creator:o.currentUser()},u=n.length-1;u>=0;u--)r.updateIsChecked({memberId:n[u]._id,isChecked:n[u].isChecked,mission:n[u].mission});l.emit("createStrikeTeam",i),t.close()}else a.alert("you must organize strike team")}}]),angular.module("InNet").controller("SafetySettingCtrl",["$scope","strikeTeam","$modalInstance","StSvc","$state","MemberSvc","CaseSvc","$stateParams","SocketSvc",function(e,t,s,n,r,i,a,c,o){var u=[],l=[];e.strikeTeam=t,a.fetchDetails(c.id).success(function(t){e.dispatch=t.branchIds}),e.chooseBranch=function(t){e.members=e.dispatch[t].members;for(var s=e.members.length-1;s>=0;s--)e.members[s].isChecked&&e.members.splice(s,1)},e.cancel=function(){s.dismiss("cancel")},e.check=function(e){e.isChecked=!e.isChecked,u.push(e._id),l.push(e)},e.uncheck=function(e,t){e.isChecked=!e.isChecked,u.splice(t,1),l.splice(t,1)},e.save=function(){n.updateSt({id:t._id,position:t.position,area:t.area,mission:t.mission,memberIds:u}).success(function(){for(var e=u.length-1;e>=0;e--)i.updateIsChecked({memberId:u[e]._id,mission:u[e].mission,isChecked:!0})}),s.close({id:t._id,position:t.position,area:t.area,members:l,caseId:t.caseId})}}]),angular.module("InNet").service("SocketSvc",["$rootScope","store","$q","$timeout",function(e,t,s,n){this.init=function(e){var s=null;return s=e?e:t.get("jwt"),io.connect("http://localhost:3000",{query:"token="+s,forceNew:!0})};var r=this.init();this.on=function(t,s){this.init().on(t,function(){var t=arguments;e.$apply(function(){s.apply(r,t)})})},this.emit=function(t,s,n){this.init().emit(t,s,function(){var t=arguments;e.$apply(function(){n&&n.apply(r,t)})})},this.removeAllListeners=function(t,s){this.init().removeAllListeners(t,function(){var t=arguments;e.$apply(function(){s.apply(r,t)})})}}]),angular.module("InNet").service("StSvc",["$http",function(e){this.fetch=function(t,s){return e.get("/api/strikeTeams?caseId="+t+"&branch="+s)},this.fetchByCase=function(t){return e.get("/api/strikeTeams/total?caseId="+t)},this.dismissSt=function(t){return e.put("/api/strikeTeams/dismiss?id="+t.id)},this.updateSt=function(t){return e.put("/api/strikeTeams/update?id="+t.id,t)},this.updateTimeRecord=function(t){return e.put("/api/strikeTeams/time?id="+t.id,t)},this.create=function(t){return e.post("/api/strikeTeams",t)},this.count=function(t){return e.get("/api/strikeTeams/count?caseId="+t)}}]),angular.module("InNet").controller("SummaryCtrl",["$scope","StSvc","$stateParams","$interval","$state","SocketSvc",function(e,t,s,n,r,i){i.on("timerRunning",function(t){for(var s=e.strikeTeams.length-1;s>=0;s--)angular.equals(e.strikeTeams[s]._id,t.stId)&&(e.strikeTeams[s].timerRunning=t.timerRunning)}),i.on("progressUpdate",function(t){for(var s=e.strikeTeams.length-1;s>=0;s--)angular.equals(e.strikeTeams[s]._id,t.id)&&(e.strikeTeams[s].timer=moment.duration(t.millis),e.strikeTeams[s].progress=t.progress,e.strikeTeams[s].progressState=t.progressState)}),i.on("newSt",function(t){if(angular.equals(a,t.caseId)){var s=angular.copy(t);e.strikeTeams.push(s)}e.deploys=c(e.strikeTeams)}),i.on("updateSt",function(s){t.fetchByCase(a).success(function(t){e.strikeTeams=t,e.strikeTeams.forEach(function(e){e.limitTime=moment.duration(e.workingTime,"seconds")}),e.deploys=c(e.strikeTeams)})}),i.on("dismiss",function(s){t.fetchByCase(a).success(function(t){e.strikeTeams=t,e.deploys=c(e.strikeTeams)})});var a=s.id;t.fetchByCase(a).success(function(t){e.strikeTeams=t,e.strikeTeams.forEach(function(e){e.limitTime=moment.duration(e.workingTime,"seconds")}),e.deploys=c(e.strikeTeams)}),e.position={defaultPos:"第一面",positions:["第一面","第二面","第三面","第四面"]};var c=function(e){var t=_.range(4).map(function(){return _.range(5).map(function(){return{totalMember:0,stTotal:0}})});if(e)for(var s=e.length-1;s>=0;s--){var n=_.indexOf(e[s].positions,e[s].position),r=_.indexOf(e[s].areas,e[s].area);t[n][r].stTotal+=1,t[n][r].totalMember+=e[s].members.length}return t};e.$on("$destroy",function(e){i.removeAllListeners()})}]),angular.module("InNet").controller("TimerCtrl",["$scope","SocketSvc",function(e,t){e.timerRunning=!0,e.startTimer=function(s,n){e.$broadcast("timer-start"),e.timerRunning=!0,t.emit("timer",{stId:s._id,timerRunning:!0})},e.stopTimer=function(s,n){e.$broadcast("timer-stop"),e.timerRunning=!1,t.emit("timer",{stId:s._id,timerRunning:!1})},e.resumeTimer=function(){e.$broadcast("timer-resume"),e.timerRunning=!1}}]),angular.module("InNet").controller("TopNavCtrl",["$scope","$location","$state","$interval","store","SocketSvc","UserSvc","$window",function(e,t,s,n,r,i,a,c){e.currentTime=moment().format("MMM Do, h:mm:ss a"),n(function(){moment.locale("zh-tw"),e.currentTime=moment().format("MMM Do, h:mm:ss a")},1e3),e.logout=function(){a.currentAccount();i.emit("logout"),s.go("anon.login")}}]),angular.module("InNet").service("UserSvc",["$http","store","jwtHelper",function(e,t,s){this.fetchOnlineUser=function(){return e.get("/api/users/userState")},this.register=function(){return e.post("/api/users")},this.login=function(t){return e.post("/api/users/authenticate",t)},this.isLoggedIn=function(){return t.get("jwt")},this.isValid=function(e){return this.isLoggedIn&&(s.decodeToken(t.get("jwt")).accessLevel>1||s.decodeToken(t.get("jwt")).branch==e)?!0:!1},this.userBranch=function(){return this.isLoggedIn?s.decodeToken(t.get("jwt")).branch:void 0},this.userCorps=function(){return this.isLoggedIn?s.decodeToken(t.get("jwt")).corps:void 0},this.currentUser=function(){return this.isLoggedIn?s.decodeToken(t.get("jwt")).username:void 0},this.currentAccount=function(){return this.isLoggedIn?s.decodeToken(t.get("jwt")).account:void 0},this.accessLevel=function(){return this.isLoggedIn?s.decodeToken(t.get("jwt")).accessLevel:void 0},this.caseId=function(){return this.isLoggedIn?s.decodeToken(t.get("jwt")).caseId:void 0}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImJyYW5jaC5zdmMuanMiLCJjYXIuZWRpdC5jdHJsLmpzIiwiY2FyLmluZGV4LmN0cmwuanMiLCJjYXJzLnN2Yy5qcyIsImNhc2UuY3RybC5qcyIsImNhc2UubW9kYWwuY3RybC5qcyIsImNhc2Uuc3ZjLmpzIiwiZGFzaGJvYXJkLmN0cmwuanMiLCJkaXJlY3RpdmVzLmpzIiwiZGlzcGF0Y2guY3RybC5qcyIsImR1dHlsaXN0LmN0cmwuanMiLCJkdXR5bGlzdC5lZGl0LmN0cmwuanMiLCJnZW8uc3ZjLmpzIiwibG9naW4uY3RybC5qcyIsIm1hcC5pbmRleC5jdHJsLmpzIiwibWVtYmVyLmN0cmwuanMiLCJtZW1iZXIuZWRpdC5jdHJsLmpzIiwibWVtYmVyLm1vZGFsLmN0cmwuanMiLCJtZW1iZXIuc3ZjLmpzIiwibmF2LmN0cmwuanMiLCJyb3V0ZXIuanMiLCJzYWZldHkuaW5kZXguY3RybC5qcyIsInNhZmV0eS5tYW5hZ2UuY3RybC5qcyIsInNhZmV0eS5tb2RhbC5jdHJsLmpzIiwic2FmZXR5LnNldHRpbmcubW9kYWwuanMiLCJzb2NrZXQuc3ZjLmpzIiwic3Quc3ZjLmpzIiwic3VtbWFyeS5jdHJsLmpzIiwidGltZXIuY3RybC5qcyIsInRvcG5hdmJhci5jdHJsLmpzIiwidXNlci5zdmMuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsInNlcnZpY2UiLCIkaHR0cCIsInRoaXMiLCJmZXRjaCIsImNvcnBzIiwiZ2V0IiwiZmV0Y2hCeU5hbWUiLCJicmFuY2giLCJ0b3RhbExpc3RGaW5kQnlOYW1lIiwiZ2V0RGV0YWlscyIsImlkIiwidXBkYXRlIiwiZGF0YSIsInB1dCIsInVwZGF0ZURpcmVjdG9yIiwiY29udHJvbGxlciIsIiRzY29wZSIsImZpbmRCeUJyYW5jaCIsIiRzdGF0ZVBhcmFtcyIsIiRtb2RhbCIsIkNhc2VTdmMiLCIkbG9nIiwiU29ja2V0U3ZjIiwiVXNlclN2YyIsIm1heFNpemUiLCJiaWdUb3RhbEl0ZW1zIiwiYmlnQ3VycmVudFBhZ2UiLCJ1c2VyQ29ycHMiLCJzdWNjZXNzIiwiY2FzZXMiLCJvbiIsIl9jYXNlIiwidW5zaGlmdCIsImNhc2VJZCIsImNob29zZSIsImZpbmRCeUlkIiwiX2lkIiwiY2FzZURldGFpbHMiLCJhZGROZXdDYXNlIiwibW9kYWxJbnN0YW5jZSIsIm9wZW4iLCJ0ZW1wbGF0ZVVybCIsInNpemUiLCJyZXNvbHZlIiwiXyIsImlzRW1wdHkiLCJyZXN1bHQiLCJ0aGVuIiwibXNnIiwiY29uc29sZSIsImxvZyIsImluZm8iLCJEYXRlIiwiZWRpdENhc2UiLCJDYXJTdmMiLCIkbW9kYWxJbnN0YW5jZSIsIiRzdGF0ZSIsIlN0U3ZjIiwiJHdpbmRvdyIsIkJyYW5jaFN2YyIsImdldENhcnNEZXRhaWwiLCJvYmoiLCJkaXNwYXRjaExpc3QiLCJjYXJJZHMiLCJicmFuY2hlcyIsImNhcnMiLCJpIiwibGVuZ3RoIiwicHVzaCIsInJhZGlvQ29kZSIsImdldEJyYW5jaElkIiwiYnJhbmNoZXNMaXN0IiwidW5pcXVlIiwiYnJhbmNoSWRzIiwiaW5kZXhPZiIsIm5hbWUiLCJpc05ldyIsImNhck9ianMiLCJjYXNlT2JqIiwiYWRkcmVzcyIsInBob25lIiwidHlwZSIsInR5cGVzIiwiam9pbiIsImdldENhcnMiLCJpc0NoZWNrZWQiLCJjYW5jZWwiLCJkaXNtaXNzIiwiY2FuY2VsRGlzcGF0Y2giLCJjYXIiLCJzcGxpY2UiLCJkaXNwYXRjaCIsImNsb3NlQ2FzZSIsImNvdW50IiwidG90YWwiLCJhbGVydCIsImlzT25nb2luZyIsInJlbG9hZCIsInNhdmUiLCJjcmVhdGUiLCJvZmZpY2VyUmVjZWl2ZXIiLCJjdXJyZW50VXNlciIsIm5ld0Nhc2UiLCJjbG9zZSIsImNvbnRlbnQiLCJmZXRjaEFsbCIsImZldGNoUmVsYXRpdmVDYXNlIiwiY29uIiwiYWNjZXNzTGV2ZWwiLCJmZXRjaERldGFpbHMiLCJjYXNlX2luZm8iLCJwb3N0IiwidXBkYXRlZF9jYXNlIiwiJGxvY2F0aW9uIiwiZmV0Y2hPbmxpbmVVc2VyIiwidXNlcnMiLCJ1c2VyIiwiZGlzY29ubmVjdFVzZXIiLCJmaWx0ZXIiLCJ1c2VybmFtZSIsImxvZ291dFVzZXIiLCIkb24iLCJldmVudCIsInJlbW92ZUFsbExpc3RlbmVycyIsImRpcmVjdGl2ZSIsIiR0aW1lb3V0IiwicmVzdHJpY3QiLCJ0ZW1wbGF0ZSIsIiRlbGVtZW50IiwibWluaW1hbGl6ZSIsIiQiLCJ0b2dnbGVDbGFzcyIsImhhc0NsYXNzIiwiaGlkZSIsInNldFRpbWVvdXQiLCJmYWRlSW4iLCJyZW1vdmVBdHRyIiwibGluayIsInNjb3BlIiwiZWxlbWVudCIsIm1ldGlzTWVudSIsInNob3doaWRlIiwiaWJveCIsImNsb3Nlc3QiLCJpY29uIiwiZmluZCIsInNsaWRlVG9nZ2xlIiwicmVzaXplIiwiY2xvc2Vib3giLCJyZW1vdmUiLCJpRWxlbWVudCIsImlBdHRycyIsImJpbmQiLCJoaXN0b3J5IiwiYmFjayIsImJyYW5jaExpc3QiLCJjYXJzRGF0YSIsImoiLCJyYWRpb19jb2RlIiwiJHEiLCJ0b3RhbENvdW50IiwibWVtYmVycyIsIm9uRHV0eSIsInVzZXJCcmFuY2giLCJvbkR1dHlUb3RhbCIsIk1lbWJlclN2YyIsImNoZWNrIiwibWVtYmVyIiwiZGlyZWN0b3IiLCJ1cGRhdGVCeU1lbWJlcklkIiwidGl0bGUiLCJtZW1iZXJJZCIsIm1pc3Npb24iLCJnZXRHZW9sb2NhdGlvbkNvb3JkaW5hdGVzIiwiZGVmZXJyZWQiLCJkZWZlciIsIm5hdmlnYXRvciIsImdlb2xvY2F0aW9uIiwiZ2V0Q3VycmVudFBvc2l0aW9uIiwicG9zaXRpb24iLCJjb29yZHMiLCJlcnJvciIsInByb21pc2UiLCJzdG9yZSIsImp3dEhlbHBlciIsInRva2VuIiwibG9naW4iLCJzZXQiLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJjb21tb24iLCJpbml0IiwiZW1pdCIsImdvIiwiZGVjb2RlVG9rZW4iLCJyb2xlIiwibGVhZmxldERhdGEiLCJHZW9TdmMiLCJjb29yZCIsIm5vd1BvcyIsImxhdCIsImxhdGl0dWRlIiwibG5nIiwibG9uZ2l0dWRlIiwiem9vbSIsImV4dGVuZCIsImNvbnRyb2xzIiwiZHJhdyIsImdldE1hcCIsIm1hcCIsImRyYXduSXRlbXMiLCJlZGl0IiwiZmVhdHVyZUdyb3VwIiwiZSIsImxheWVyIiwiYWRkTGF5ZXIiLCJGZWF0dXJlQ29sbGVjdGlvbnMiLCJ0b0dlb0pTT04iLCJmb3JFYWNoIiwid29ya2luZ1RpbWUiLCJtb21lbnQiLCJkdXJhdGlvbiIsImlzRGVsZXRlZCIsIm1lbWJlckluaXQiLCJtZW1iZXJJZHMiLCJkaXJlY3RvcnMiLCJhZGROZXdNZW1iZXIiLCJtaW51dGVzIiwic2Vjb25kcyIsImRlbGV0ZU1lbWJlciIsInRpdGxlcyIsIm1pc3Npb25zIiwiY29ycHNzIiwiYnJhbmNoQXJyeSIsInJhZGlvQ29kZVByZWZpeCIsInN1ZmZpeCIsInNwbGl0Iiwic2xpY2UiLCJwYXJzZUludCIsInVwZGF0ZU1lbWJlciIsImZldGNoT25EdXR5IiwidXBkYXRlSXNDaGVja2VkIiwibWVtYmVyRGF0YSIsImlzVmFsaWQiLCJjb25maWciLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwib3RoZXJ3aXNlIiwic3RhdGUiLCJ1cmwiLCJhYnN0cmFjdCIsInJlcXVpcmVkTG9naW4iLCJydW4iLCIkcm9vdFNjb3BlIiwidG9TdGF0ZSIsInRvUGFyYW1zIiwiZnJvbVN0YXRlIiwiZnJvbVBhcmFtcyIsImlzTG9nZ2VkSW4iLCJwcmV2ZW50RGVmYXVsdCIsInVzZXJDb25kaXRpb24iLCJkZXRhaWxzIiwic3RzIiwic3RyaWtlVGVhbXMiLCJzdCIsImVxdWFscyIsImNvcHkiLCJhcmVhIiwiYXBwbHkiLCJfc3RJZCIsInN0SWQiLCJzdHJpa2VUZWFtIiwib3BlblNldHRpbmdNb2RhbCIsInVwZGF0ZWRTdCIsImRpc21pc3NTdCIsImxpbWl0VGltZSIsInBvc2l0aW9ucyIsImFyZWFzIiwiaXNEaXNtaXNzZWQiLCJtaW4iLCJjcmVhdG9yIiwibWVtYmVyT2JqcyIsImNob29zZUJyYW5jaCIsInVuY2hlY2siLCJ1cGRhdGVTdCIsImF1dGhUb2tlbiIsImlvIiwiY29ubmVjdCIsInF1ZXJ5IiwiZm9yY2VOZXciLCJzb2NrZXQiLCJldmVudE5hbWUiLCJjYWxsYmFjayIsImFyZ3MiLCJhcmd1bWVudHMiLCIkYXBwbHkiLCJmZXRjaEJ5Q2FzZSIsInVwZGF0ZVRpbWVSZWNvcmQiLCIkaW50ZXJ2YWwiLCJ0aW1lclJ1bm5pbmciLCJ0aW1lciIsIm1pbGxpcyIsInByb2dyZXNzIiwicHJvZ3Jlc3NTdGF0ZSIsIm5ld1N0IiwiZGVwbG95cyIsImluaXRUYWJsZSIsImRlZmF1bHRQb3MiLCJkZXBsb3lBcnJheSIsInJhbmdlIiwidG90YWxNZW1iZXIiLCJzdFRvdGFsIiwieCIsInkiLCJzdGFydFRpbWVyIiwiJGJyb2FkY2FzdCIsInN0b3BUaW1lciIsInJlc3VtZVRpbWVyIiwiY3VycmVudFRpbWUiLCJmb3JtYXQiLCJsb2NhbGUiLCJsb2dvdXQiLCJjdXJyZW50QWNjb3VudCIsInJlZ2lzdGVyIiwiYWNjb3VudCJdLCJtYXBwaW5ncyI6IkFBS0FBLFFBQUFDLE9BQUEsU0FBQSxZQUFBLGVBQUEsUUFBQSxrQkFBQSxjQUFBLG9CQUFBLG1CQ0FBRCxRQUFBQyxPQUFBLFNBQ0FDLFFBQUEsYUFBQSxRQUFBLFNBQUFDLEdBRUFDLEtBQUFDLE1BQUEsU0FBQUMsR0FDQSxNQUFBSCxHQUFBSSxJQUFBLHFCQUFBRCxJQUdBRixLQUFBSSxZQUFBLFNBQUFDLEdBQ0EsTUFBQU4sR0FBQUksSUFBQSwyQkFBQUUsSUFHQUwsS0FBQU0sb0JBQUEsU0FBQUQsR0FDQSxNQUFBTixHQUFBSSxJQUFBLGlDQUFBRSxJQUdBTCxLQUFBTyxXQUFBLFNBQUFDLEdBQ0EsTUFBQVQsR0FBQUksSUFBQSxlQUFBSyxJQUdBUixLQUFBUyxPQUFBLFNBQUFDLEdBQ0EsTUFBQVgsR0FBQVksSUFBQSxlQUFBRCxFQUFBTCxPQUFBSyxJQUdBVixLQUFBWSxlQUFBLFNBQUFGLEdB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RUFBQVUsWUFBQVgsRUFBQWxMLElBQUEsUUFBQUUsUUFBQUEsSUFDQSxHQU1BLEdBR0FMLEtBQUFpSyxXQUFBLFdBQ0EsTUFBQWpLLE1BQUFpUSxXQUNBM0UsRUFBQVUsWUFBQVgsRUFBQWxMLElBQUEsUUFBQUUsT0FEQSxRQUtBTCxLQUFBeUIsVUFBQSxXQUNBLE1BQUF6QixNQUFBaVEsV0FDQTNFLEVBQUFVLFlBQUFYLEVBQUFsTCxJQUFBLFFBQUFELE1BREEsUUFLQUYsS0FBQW1HLFlBQUEsV0FDQSxNQUFBbkcsTUFBQWlRLFdBQ0EzRSxFQUFBVSxZQUFBWCxFQUFBbEwsSUFBQSxRQUFBa0gsU0FEQSxRQUtBckgsS0FBQWlVLGVBQUEsV0FDQSxNQUFBalUsTUFBQWlRLFdBQ0EzRSxFQUFBVSxZQUFBWCxFQUFBbEwsSUFBQSxRQUFBZ1UsUUFEQSxRQUtBblUsS0FBQTBHLFlBQUEsV0FDQSxNQUFBMUcsTUFBQWlRLFdBQ0EzRSxFQUFBVSxZQUFBWCxFQUFBbEwsSUFBQSxRQUFBdUcsWUFEQSxRQUtBMUcsS0FBQStCLE9BQUEsV0FDQSxNQUFBL0IsTUFBQWlRLFdBQ0EzRSxFQUFBVSxZQUFBWCxFQUFBbEwsSUFBQSxRQUFBNEIsT0FEQSIsImZpbGUiOiJpbm5ldC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiogSW5OZXQgTW9kJ3VpLnJvdXRlJ3VsZVxuKlxuKiBEZXNjcmlwdGlvblxuKi9cbmFuZ3VsYXIubW9kdWxlKCdJbk5ldCcsIFsndWkucm91dGVyJywndWkuYm9vdHN0cmFwJywgJ3RpbWVyJywnYW5ndWxhci1zdG9yYWdlJywgJ2FuZ3VsYXItand0JywnbGVhZmxldC1kaXJlY3RpdmUnLCAnYW5ndWxhci5maWx0ZXInXSkiLCIvKipcbiogSW5OZXQgTW9kdWxlXG4qXG4qIERlc2NyaXB0aW9uXG4qL1xuYW5ndWxhci5tb2R1bGUoJ0luTmV0Jylcbi5zZXJ2aWNlKCdCcmFuY2hTdmMnLCBbICckaHR0cCcsIGZ1bmN0aW9uICgkaHR0cCkge1xuXG5cdHRoaXMuZmV0Y2ggPSBmdW5jdGlvbihjb3Jwcyl7XG5cdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9icmFuY2g/Y29ycHM9JyArIGNvcnBzKTtcblx0fTtcblxuXHR0aGlzLmZldGNoQnlOYW1lID0gZnVuY3Rpb24oYnJhbmNoKXtcblx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2JyYW5jaC9uYW1lP2JyYW5jaD0nICsgYnJhbmNoKTtcblx0fTtcblxuXHR0aGlzLnRvdGFsTGlzdEZpbmRCeU5hbWUgPSBmdW5jdGlvbihicmFuY2gpe1xuXHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvYnJhbmNoL25hbWUvdG90YWw/YnJhbmNoPScgKyBicmFuY2gpXG5cdH1cblxuXHR0aGlzLmdldERldGFpbHMgPSBmdW5jdGlvbihpZCl7XG5cdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9icmFuY2gvJyArIGlkKTtcblx0fTtcblxuXHR0aGlzLnVwZGF0ZSA9IGZ1bmN0aW9uKGRhdGEpe1xuXHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvYnJhbmNoLycgKyBkYXRhLmJyYW5jaCAsIGRhdGEpO1xuXHR9O1xuXG5cdHRoaXMudXBkYXRlRGlyZWN0b3IgPSBmdW5jdGlvbihkYXRhKXtcblx0XHRyZXR1cm4gJGh0dHAucHV0KCcvYXBpL2JyYW5jaD9icmFuY2g9JyArIGRhdGEuYnJhbmNoLCBkYXRhKVxuXHR9XG5cdFxufV0pIiwiLyoqXG4qJ0luTmV0IE1vZHVsZVxuKlxuKiBEZXNjcmlwdGlvblxuKi9cbmFuZ3VsYXIubW9kdWxlKCdJbk5ldCcpXG4uY29udHJvbGxlcignQ2FyRWRpdEN0cmwnLCBbJyRzY29wZScsIGZ1bmN0aW9uICgkc2NvcGUpIHtcblx0XG59XSkiLCIvKipcbiogSW5OZXQgTW9kdWxlXG4qXG4qIERlc2NyaXB0aW9uXG4qL1xuYW5ndWxhci5tb2R1bGUoJ0luTmV0Jylcbi5jb250cm9sbGVyKCdDYXJJbmRleEN0cmwnLCBbJyRzY29wZScsIGZ1bmN0aW9uICgkc2NvcGUpIHtcblx0XG59XSkiLCIvKipcbiogSW5OZXQgTW9kdWxlXG4qXG4qIERlc2NyaXB0aW9uXG4qL1xuYW5ndWxhci5tb2R1bGUoJ0luTmV0Jylcbi5zZXJ2aWNlKCdDYXJTdmMnLCBbJyRodHRwJyxmdW5jdGlvbiAoJGh0dHApIHtcblxuXHR0aGlzLmZldGNoID0gZnVuY3Rpb24oKXtcblx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2NhcnMnKVxuXHR9XG5cblx0dGhpcy5maW5kQnlCcmFuY2ggPSBmdW5jdGlvbiggYnJhbmNoICl7XG5cdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9jYXJzLycgKyBicmFuY2ggKVxuXHR9XG5cdFxuXHR0aGlzLnVwZGF0ZSA9IGZ1bmN0aW9uKGRhdGEpe1xuXHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvY2Fycy8nICsgZGF0YS5pZCAsIGRhdGEpXG5cdH1cblxufV0pIiwiLyoqXG4qIEluTmV0IE1vZHVsZVxuKlxuKiBEZXNjcmlwdGlvblxuKi9cbmFuZ3VsYXIubW9kdWxlKCdJbk5ldCcpXG4uY29udHJvbGxlcignQ2FzZUN0cmwnLCBbJyRzY29wZScsJyRzdGF0ZVBhcmFtcycsJyRtb2RhbCcsJ0Nhc2VTdmMnLCAnJGxvZycsICdTb2NrZXRTdmMnLCAnVXNlclN2YycsXG5cdGZ1bmN0aW9uICgkc2NvcGUgLCAkc3RhdGVQYXJhbXMsICRtb2RhbCwgQ2FzZVN2YywgJGxvZywgU29ja2V0U3ZjLCBVc2VyU3ZjKSB7XG5cblx0JHNjb3BlLm1heFNpemUgPSA1O1xuXHQkc2NvcGUuYmlnVG90YWxJdGVtcyA9IDE3NTtcblx0JHNjb3BlLmJpZ0N1cnJlbnRQYWdlID0gMTtcblxuXHRDYXNlU3ZjLmZldGNoKFVzZXJTdmMudXNlckNvcnBzKCkpLnN1Y2Nlc3MoZnVuY3Rpb24oY2FzZXMpe1xuXHRcdCRzY29wZS5jYXNlcyA9IGNhc2VzO1xuXHR9KTtcblxuXHRTb2NrZXRTdmMub24oJ25ld0Nhc2UnLGZ1bmN0aW9uKF9jYXNlKXtcblx0XHQkc2NvcGUuY2FzZXMudW5zaGlmdChfY2FzZSk7XG5cdH0pO1xuXG5cdFNvY2tldFN2Yy5vbignY2FzZU1vZGlmaWVkJyxmdW5jdGlvbihfY2FzZSl7XG5cdFx0JHNjb3BlLmNhc2VzW19jYXNlLmNhc2VJZC0xXSA9IF9jYXNlO1xuXHR9KTtcblxuXHQkc2NvcGUuY2hvb3NlID0gZnVuY3Rpb24oaWQpe1xuXHRcdENhc2VTdmMuZmluZEJ5SWQoJHNjb3BlLmNhc2VzW2lkXS5faWQpLnN1Y2Nlc3MoZnVuY3Rpb24oX2Nhc2Upe1xuXHRcdFx0XHQkc2NvcGUuY2FzZURldGFpbHMgPSBfY2FzZTtcblx0XHR9KTtcblx0fTtcblxuXHQkc2NvcGUuYWRkTmV3Q2FzZSA9IGZ1bmN0aW9uICgpIHtcblx0ICBcdHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xuXHRcdCAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2Nhc2UvY2FzZS5tb2RhbC5odG1sJyxcblx0XHQgICAgY29udHJvbGxlcjogJ0Nhc2VNb2RhbEN0cmwnLFxuXHRcdCAgICBzaXplOiBcImxnXCIsXG5cdFx0ICAgIHJlc29sdmUgOiB7XG5cdFx0ICAgIFx0Y2FzZUlkIDogZnVuY3Rpb24oKXtcblx0XHRcdCAgICBcdFx0aWYgKCBfLmlzRW1wdHkoJHNjb3BlLmNhc2VzKSkge1xuXHRcdFx0ICAgIFx0XHRcdHJldHVybiAwXG5cdFx0XHQgICAgXHRcdH0gZWxzZXtcblx0XHRcdCAgICBcdFx0XHRyZXR1cm4gJHNjb3BlLmNhc2VzWzBdLmNhc2VJZDtcblx0XHRcdCAgICBcdFx0fTtcblx0XHRcdCAgICB9LFxuXHRcdCAgICBcdGNhc2VEZXRhaWxzIDogZnVuY3Rpb24oKXtcblx0XHQgICAgXHRcdHJldHVybiB7fVxuXHRcdCAgICBcdH1cblx0XHQgICAgfVxuXHQgICAgfSk7XG5cdCAgICBtb2RhbEluc3RhbmNlLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChtc2cpIHtcblx0ICAgICAgLy8gJHNjb3BlLmNhc2VzLnVuc2hpZnQobmV3Q2FzZSk7XG5cdCAgICAgIGNvbnNvbGUubG9nKG1zZyk7XG5cdCAgICB9LCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICRsb2cuaW5mbygnTW9kYWwgZGlzbWlzc2VkIGF0OiAnICsgbmV3IERhdGUoKSk7XG5cdCAgICB9KTtcblx0IH07XG5cblx0ICRzY29wZS5lZGl0Q2FzZSA9IGZ1bmN0aW9uKGlkKXtcblx0IFx0dmFyIG1vZGFsSW5zdGFuY2UgPSAkbW9kYWwub3Blbih7XG5cdFx0ICBcdHRlbXBsYXRlVXJsOiAndmlld3MvY2FzZS9jYXNlLm1vZGFsLmh0bWwnLFxuXHRcdCAgICBjb250cm9sbGVyOiAnQ2FzZU1vZGFsQ3RybCcsXG5cdFx0ICAgIHNpemU6IFwibGdcIixcblx0XHQgICAgcmVzb2x2ZSA6IHtcblx0XHQgICAgXHRjYXNlSWQgOiBmdW5jdGlvbigpe1xuXHRcdCAgICBcdFx0cmV0dXJuIGlkXG5cdFx0ICAgIFx0fSxcblx0XHQgICAgXHRjYXNlRGV0YWlscyA6IGZ1bmN0aW9uKCl7XG5cdFx0ICAgIFx0XHRyZXR1cm4gJHNjb3BlLmNhc2VEZXRhaWxzXG5cdFx0ICAgIFx0fVxuXHRcdCAgICB9XG5cdCAgICB9KTtcblx0IH07XG59XSlcbiIsIi8qKlxuKiBJbk5ldCBNb2R1bGVcbipcbiogRGVzY3JpcHRpb25cbiovXG5hbmd1bGFyLm1vZHVsZSgnSW5OZXQnKVxuLmNvbnRyb2xsZXIoJ0Nhc2VNb2RhbEN0cmwnLCBbJyRzY29wZScsICdDYXJTdmMnLCAnJG1vZGFsSW5zdGFuY2UnLCAnQ2FzZVN2YycsJyRzdGF0ZScsICdjYXNlSWQnLCdjYXNlRGV0YWlscycsICdTdFN2YycsICckd2luZG93JywgJ0JyYW5jaFN2YycsICdVc2VyU3ZjJyxcblx0ZnVuY3Rpb24gKCRzY29wZSwgQ2FyU3ZjLCAkbW9kYWxJbnN0YW5jZSwgQ2FzZVN2YywgJHN0YXRlLCBjYXNlSWQsIGNhc2VEZXRhaWxzLCBTdFN2YyAsICR3aW5kb3csIEJyYW5jaFN2YywgVXNlclN2Yykge1xuXG5cdGlmIChfLmlzRW1wdHkoY2FzZURldGFpbHMpKSB7XG5cdFx0JHNjb3BlLmlzTmV3ID0gdHJ1ZTtcblx0XHRjYXJPYmpzID0gW107XG5cblx0fWVsc2V7XG5cdFx0JHNjb3BlLmlzTmV3ID0gZmFsc2U7XG5cdFx0dmFyIGNhck9ianMgPSBjYXNlRGV0YWlscy5jYXJzO1xuXHR9XG5cblx0QnJhbmNoU3ZjLmZldGNoKFVzZXJTdmMudXNlckNvcnBzKCkpLnN1Y2Nlc3MoZnVuY3Rpb24oYnJhbmNoZXMpe1xuXHQgICAgJHNjb3BlLmJyYW5jaGVzID0gYnJhbmNoZXM7XG5cdH0pO1xuXG5cdGZ1bmN0aW9uIGdldENhcnNEZXRhaWwob2JqKXtcblx0XHR2YXIgZGlzcGF0Y2hMaXN0ID0gW107XG5cdFx0dmFyIGNhcklkcyA9IFtdO1xuXHRcdHZhciBicmFuY2hlcyA9IFtdO1xuXG5cdFx0aWYgKG9iai5jYXJzKSB7XG5cdFx0XHRmb3IgKHZhciBpID0gb2JqLmNhcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdFx0ZGlzcGF0Y2hMaXN0LnB1c2gob2JqLmNhcnNbaV0ucmFkaW9Db2RlKTtcblx0XHRcdFx0Y2FySWRzLnB1c2gob2JqLmNhcnNbaV0uX2lkKTtcblx0XHRcdFx0YnJhbmNoZXMucHVzaChvYmouY2Fyc1tpXS5icmFuY2gpOyBcblx0XHRcdH07XG5cdFx0XHRyZXR1cm4ge2Rpc3BhdGNoTGlzdCA6IGRpc3BhdGNoTGlzdCAsIGNhcklkcyA6IGNhcklkcyAsIGJyYW5jaGVzIDogIGJyYW5jaGVzfVxuXG5cdFx0fWVsc2V7XG5cdFx0XHRyZXR1cm4ge307XG5cdFx0fTtcblx0fTtcblxuXHRmdW5jdGlvbiBnZXRCcmFuY2hJZChicmFuY2hlc0xpc3Qpe1xuXHRcdHZhciBicmFuY2hlcyA9IF8udW5pcXVlKGJyYW5jaGVzTGlzdCk7XG5cdFx0dmFyIGJyYW5jaElkcyA9IFtdO1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLmJyYW5jaGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAoYnJhbmNoZXMuaW5kZXhPZigkc2NvcGUuYnJhbmNoZXNbaV0ubmFtZSkgPiAtMSkge1xuXHRcdFx0XHRicmFuY2hJZHMucHVzaCgkc2NvcGUuYnJhbmNoZXNbaV0uX2lkKTtcblx0XHRcdH07XG5cdFx0fTtcblx0XHRyZXR1cm4gIGJyYW5jaElkcztcblx0fTtcblxuXHQkc2NvcGUuY2FzZU9iaiA9IHtcblx0XHRhZGRyZXNzIDogY2FzZURldGFpbHMuYWRkcmVzcyB8fCBudWxsLFxuXHRcdHBob25lIDogY2FzZURldGFpbHMucGhvbmUgfHwgbnVsbCxcblx0ICAgIHR5cGUgOiBjYXNlRGV0YWlscy50eXBlIHx8ICBcIueBq+itplwiLCBcblx0ICAgIHR5cGVzIDogWyBcIueBq+itplwiLCBcIuaVkeitt1wiLCBcIueBveWus1wiLCBcIuaqouiIiVwiLFwi5YW25LuWXCJdICxcblx0ICAgIGNhcklkcyA6IGdldENhcnNEZXRhaWwoY2FzZURldGFpbHMpLmNhcklkcyAgfHwgW10sXG5cdCAgICBkaXNwYXRjaExpc3QgOiBnZXRDYXJzRGV0YWlsKGNhc2VEZXRhaWxzKS5kaXNwYXRjaExpc3QgfHwgIFtdLFxuXHQgICAgYnJhbmNoZXMgOiBnZXRDYXJzRGV0YWlsKGNhc2VEZXRhaWxzKS5icmFuY2hlcyB8fCAgW11cblx0fTtcblxuXHQkc2NvcGUuZGlzcGF0Y2hMaXN0ID0gJHNjb3BlLmNhc2VPYmouZGlzcGF0Y2hMaXN0LmpvaW4oXCIgXCIpO1xuXG5cdCRzY29wZS5nZXRDYXJzID0gZnVuY3Rpb24oIGJyYW5jaCApe1xuXHRcdCBDYXJTdmMuZmluZEJ5QnJhbmNoKGJyYW5jaC5uYW1lKS5zdWNjZXNzKGZ1bmN0aW9uKGNhcnMpe1xuXHRcdCBcdGZvciAodmFyIGkgPSBjYXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0IFx0XHRpZiAoJHNjb3BlLmNhc2VPYmouY2FySWRzLmluZGV4T2YoY2Fyc1tpXS5faWQpID4gLTEgKSB7XG5cdFx0IFx0XHRcdGNhcnNbaV0uaXNDaGVja2VkID0gdHJ1ZTsgXG5cdFx0IFx0XHR9O1xuXHRcdCBcdH07XG5cdFx0IFx0JHNjb3BlLmNhcnMgPSBjYXJzO1xuXHRcdCB9KTtcblx0fTtcblxuXHQkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuXHRcdCRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuXHR9O1xuXG5cdCRzY29wZS5jYW5jZWxEaXNwYXRjaCA9IGZ1bmN0aW9uKGNhcil7XG5cdFx0Y2FyLmlzQ2hlY2tlZCA9IGZhbHNlO1xuXHRcdGNhck9ianMuc3BsaWNlKGNhck9ianMuaW5kZXhPZihjYXIpLDEpXG5cdFx0JHNjb3BlLmNhc2VPYmouY2FySWRzLnNwbGljZSgkc2NvcGUuY2FzZU9iai5kaXNwYXRjaExpc3QuaW5kZXhPZihjYXIuX2lkKSwxKTtcblx0XHQkc2NvcGUuY2FzZU9iai5kaXNwYXRjaExpc3Quc3BsaWNlKCRzY29wZS5jYXNlT2JqLmRpc3BhdGNoTGlzdC5pbmRleE9mKGNhci5yYWRpb0NvZGUpLDEpO1xuXHRcdCRzY29wZS5jYXNlT2JqLmJyYW5jaGVzLnNwbGljZSgkc2NvcGUuY2FzZU9iai5kaXNwYXRjaExpc3QuaW5kZXhPZihjYXIuYnJhbmNoKSwxKTtcblx0XHQkc2NvcGUuZGlzcGF0Y2hMaXN0ID0gJHNjb3BlLmNhc2VPYmouZGlzcGF0Y2hMaXN0LmpvaW4oXCIgXCIpO1xuXHR9O1xuXG5cdCRzY29wZS5kaXNwYXRjaCA9IGZ1bmN0aW9uKCBjYXIgKXtcblx0XHRjYXIuaXNDaGVja2VkID0gdHJ1ZTsgXG5cdFx0Y2FyT2Jqcy5wdXNoKGNhcik7XG5cdFx0JHNjb3BlLmNhc2VPYmouY2FySWRzLnB1c2goY2FyLl9pZCk7XG5cdFx0JHNjb3BlLmNhc2VPYmouZGlzcGF0Y2hMaXN0LnB1c2goY2FyLnJhZGlvQ29kZSk7XG5cdFx0JHNjb3BlLmNhc2VPYmouYnJhbmNoZXMucHVzaChjYXIuYnJhbmNoKTtcblx0XHQkc2NvcGUuZGlzcGF0Y2hMaXN0ID0gJHNjb3BlLmNhc2VPYmouZGlzcGF0Y2hMaXN0LmpvaW4oXCIgXCIpO1xuXHR9O1xuXG5cdCRzY29wZS5jbG9zZUNhc2UgPSBmdW5jdGlvbigpe1xuXHRcdFN0U3ZjLmNvdW50KGNhc2VEZXRhaWxzLl9pZCkuc3VjY2VzcyhmdW5jdGlvbih0b3RhbCl7XG5cdFx0XHRpZiAodG90YWwgPiAwICkge1xuXHRcdFx0XHQkd2luZG93LmFsZXJ0KFwi5bCa5pyJ6ZqK5ZOh5Zyo5a6J5YWo566h5Yi2XCIpXG5cdFx0XHR9ZWxzZXtcblx0XHRcdFx0Q2FzZVN2Yy5jbG9zZUNhc2Uoe1xuXHRcdFx0XHRcdGlkIDogY2FzZURldGFpbHMuX2lkLFxuXHRcdFx0XHRcdGlzT25nb2luZyA6IGZhbHNlXG5cdFx0XHRcdH0pLnN1Y2Nlc3MoZnVuY3Rpb24obXNnKXtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhtc2cpXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHQkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcblx0XHRcdFx0JHN0YXRlLnJlbG9hZCgpXG5cdFx0XHR9O1xuXHRcdH0pO1xuXHR9O1xuXG5cdCRzY29wZS5zYXZlID0gZnVuY3Rpb24oKXtcblx0XHRDYXNlU3ZjLmNyZWF0ZSh7XG5cdFx0XHRjYXNlSWQgICA6IGNhc2VJZCArIDEsIFxuXHRcdFx0YWRkcmVzcyAgIDogJHNjb3BlLmNhc2VPYmouYWRkcmVzcyB8fCBcIua4rOipplwiLFxuXHRcdFx0b2ZmaWNlclJlY2VpdmVyIDogVXNlclN2Yy5jdXJyZW50VXNlcigpIHx8ICBcIuWKieabieabvFwiLFxuXHRcdFx0dHlwZSAgICAgIDogJHNjb3BlLmNhc2VPYmoudHlwZSB8fCBcIuaVkeitt1wiLFxuXHRcdFx0cGhvbmUgICAgIDogJHNjb3BlLmNhc2VPYmoucGhvbmUgfHwgXCLmuKzoqaZcIixcblx0XHRcdGJyYW5jaGVzICA6IF8udW5pcXVlKCRzY29wZS5jYXNlT2JqLmJyYW5jaGVzKSxcblx0XHRcdGJyYW5jaElkcyA6IGdldEJyYW5jaElkKCRzY29wZS5jYXNlT2JqLmJyYW5jaGVzKSxcblx0ICBcdFx0Y2FycyAgICAgIDogJHNjb3BlLmNhc2VPYmouY2FySWRzLFxuXHRcdFx0aXNPbmdvaW5nIDogdHJ1ZSxcblx0XHRcdGNvcnBzIFx0ICA6IFVzZXJTdmMudXNlckNvcnBzKClcblx0XHR9KS5zdWNjZXNzKGZ1bmN0aW9uKG5ld0Nhc2Upe1xuXHRcdFx0JG1vZGFsSW5zdGFuY2UuY2xvc2UobmV3Q2FzZSlcblx0XHR9KTtcblx0fTtcblxuXHQkc2NvcGUudXBkYXRlID0gZnVuY3Rpb24oKXtcblx0XHR2YXIgY29udGVudCA9IHtcblx0XHRcdGlkIDogY2FzZURldGFpbHMuX2lkLFxuXHRcdFx0Y2FzZUlkICAgOiBjYXNlSWQsIFxuXHRcdFx0YWRkcmVzcyAgIDogJHNjb3BlLmNhc2VPYmouYWRkcmVzcyxcblx0XHRcdG9mZmljZXJSZWNlaXZlciA6IFVzZXJTdmMuY3VycmVudFVzZXIoKSB8fCBcIuWKieabieabvFwiLFxuXHRcdFx0dHlwZSAgICAgIDogJHNjb3BlLmNhc2VPYmoudHlwZSxcblx0XHRcdHBob25lICAgICA6ICRzY29wZS5jYXNlT2JqLnBob25lLFxuXHRcdFx0YnJhbmNoZXMgIDogXy51bmlxdWUoJHNjb3BlLmNhc2VPYmouYnJhbmNoZXMpLFxuXHRcdFx0YnJhbmNoSWRzIDogZ2V0QnJhbmNoSWQoJHNjb3BlLmNhc2VPYmouYnJhbmNoZXMpLFxuXHQgIFx0XHRjYXJzICAgICAgOiAkc2NvcGUuY2FzZU9iai5jYXJJZHMsXG5cdFx0XHRpc09uZ29pbmcgOiB0cnVlLCBcblx0XHR9O1xuXHRcdFxuXHRcdENhc2VTdmMudXBkYXRlKGNvbnRlbnQpO1xuXHRcdCRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuXHR9O1xufV0pOyIsIi8qKlxuKiBJbk5ldCBNb2R1bGVcbipcbiogRGVzY3JpcHRpb25cbiovXG5hbmd1bGFyLm1vZHVsZSgnSW5OZXQnKVxuLnNlcnZpY2UoJ0Nhc2VTdmMnLCBbJyRodHRwJyxmdW5jdGlvbiAoJGh0dHApIHtcblxuXHR0aGlzLmZldGNoID0gZnVuY3Rpb24oY29ycHMpe1xuXHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY2FzZXM/Y29ycHM9JyArIGNvcnBzICk7XG5cdH07XG5cblx0dGhpcy5mZXRjaEFsbCA9IGZ1bmN0aW9uKCl7XG5cdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9jYXNlcy9kZXRhaWxzJyk7XG5cdH07XG5cblx0dGhpcy5mZXRjaFJlbGF0aXZlQ2FzZSA9IGZ1bmN0aW9uKGNvbil7XG5cdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9jYXNlcy9icmFuY2g/YnJhbmNoPScgKyBjb24uYnJhbmNoICsgJyZhY2Nlc3NMZXZlbD0nICsgY29uLmFjY2Vzc0xldmVsICsgJyZjb3Jwcz0nICsgY29uLmNvcnBzICk7XG5cdH1cblxuXHR0aGlzLmZldGNoRGV0YWlscyA9IGZ1bmN0aW9uKCBjYXNlSWQpe1xuXHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY2FzZXMvZGV0YWlscy8nICsgY2FzZUlkKTtcblx0fTtcblxuXHR0aGlzLmZpbmRCeUlkID0gZnVuY3Rpb24oIGNhc2VJZCApe1xuXHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY2FzZXMvJyArIGNhc2VJZCApO1xuXHR9O1xuXG5cdHRoaXMuY3JlYXRlID0gZnVuY3Rpb24oY2FzZV9pbmZvKXtcblx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9jYXNlcycsIGNhc2VfaW5mbyk7XG5cdH07XG5cblx0dGhpcy51cGRhdGUgPSBmdW5jdGlvbih1cGRhdGVkX2Nhc2Upe1xuXHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvY2FzZXMvJyArIHVwZGF0ZWRfY2FzZS5pZCAsIHVwZGF0ZWRfY2FzZSk7XG5cdH07XG5cblx0dGhpcy5kZWxldGUgPSBmdW5jdGlvbihjYXNlSWQpe1xuXHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2Nhc2VzLycgKyBjYXNlSWQpO1xuXHR9O1xuXG5cdHRoaXMuY2xvc2VDYXNlID0gZnVuY3Rpb24oZGF0YSl7XG5cdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9jYXNlcy9jbG9zZT9pZD0nICsgZGF0YS5pZCwgZGF0YSApXG5cdH1cbn1dKSIsIi8qKlxuKiBJbk5ldCBNb2R1bGVcbipcbiogRGVzY3JpcHRpb25cbiovXG5hbmd1bGFyLm1vZHVsZSgnSW5OZXQnKVxuLmNvbnRyb2xsZXIoJ0Rhc2hib2FyZEN0cmwnLCBbJyRzY29wZScsICckbG9jYXRpb24nLCAnU29ja2V0U3ZjJywgJ1VzZXJTdmMnLCAnQnJhbmNoU3ZjJyxcblx0ZnVuY3Rpb24gKCRzY29wZSwgJGxvY2F0aW9uLCBTb2NrZXRTdmMsIFVzZXJTdmMsIEJyYW5jaFN2Yykge1xuXG5cdFx0QnJhbmNoU3ZjLmZldGNoKFVzZXJTdmMudXNlckNvcnBzKCkpLnN1Y2Nlc3MoZnVuY3Rpb24oYnJhbmNoZXMpe1xuXHRcdFx0JHNjb3BlLmJyYW5jaGVzID0gYnJhbmNoZXM7XG5cdFx0fSk7XG5cblx0XHRVc2VyU3ZjLmZldGNoT25saW5lVXNlcigpLnN1Y2Nlc3MoZnVuY3Rpb24odXNlcnMpe1xuXHRcdFx0JHNjb3BlLnVzZXJzID0gdXNlcnM7XG5cdFx0fSlcblxuXHRcdFNvY2tldFN2Yy5vbigndXNlckxvZ2luJyxmdW5jdGlvbih1c2VyKXtcblx0XHRcdCRzY29wZS51c2Vycy5wdXNoKHVzZXIpO1xuXHRcdH0pO1xuXG5cdFx0U29ja2V0U3ZjLm9uKCd1c2VyRGlzY29ubmVjdCcsZnVuY3Rpb24oZGlzY29ubmVjdFVzZXIpe1xuXHRcdFx0JHNjb3BlLnVzZXJzID0gJHNjb3BlLnVzZXJzLmZpbHRlcihmdW5jdGlvbih1c2VyKSB7XG5cdFx0XHRcdHJldHVybiB1c2VyLnVzZXJuYW1lICE9IGRpc2Nvbm5lY3RVc2VyLnVzZXJuYW1lXG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdFNvY2tldFN2Yy5vbigndXNlckxvZ291dCcsZnVuY3Rpb24obG9nb3V0VXNlcil7XG5cdFx0XHQkc2NvcGUudXNlcnMgPSAkc2NvcGUudXNlcnMuZmlsdGVyKGZ1bmN0aW9uKHVzZXIpIHtcblx0XHRcdFx0cmV0dXJuIHVzZXIudXNlcm5hbWUgIT0gbG9nb3V0VXNlci51c2VybmFtZVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHQkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgICAgIFNvY2tldFN2Yy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcblx0ICAgIH0pO1xuXG59XSkiLCIvKipcbiogSW5OZXQgTW9kdWxlXG4qXG4qIERlc2NyaXB0aW9uXG4qL1xuXG5cbmFuZ3VsYXIubW9kdWxlKCdJbk5ldCcpXG4uZGlyZWN0aXZlKCdtaW5pbWFsaXphU2lkZWJhcicsIFsgJyR0aW1lb3V0JywgZnVuY3Rpb24gKCR0aW1lb3V0KSB7XG5cdHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgIHRlbXBsYXRlOiAnPGEgY2xhc3M9XCJuYXZiYXItbWluaW1hbGl6ZSBtaW5pbWFsaXplLXN0eWwtMiBidG4gYnRuLXByaW1hcnlcIiBocmVmPVwiXCIgbmctY2xpY2s9XCJtaW5pbWFsaXplKClcIj48aSBjbGFzcz1cImZhIGZhLWJhcnNcIj48L2k+PC9hPicsXG4gICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uICgkc2NvcGUsICRlbGVtZW50KSB7XG4gICAgICAgICAgICAkc2NvcGUubWluaW1hbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkKFwiYm9keVwiKS50b2dnbGVDbGFzcyhcIm1pbmktbmF2YmFyXCIpO1xuICAgICAgICAgICAgICAgIGlmICghJCgnYm9keScpLmhhc0NsYXNzKCdtaW5pLW5hdmJhcicpIHx8ICQoJ2JvZHknKS5oYXNDbGFzcygnYm9keS1zbWFsbCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEhpZGUgbWVudSBpbiBvcmRlciB0byBzbW9vdGhseSB0dXJuIG9uIHdoZW4gbWF4aW1pemUgbWVudVxuICAgICAgICAgICAgICAgICAgICAkKCcjc2lkZS1tZW51JykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBGb3Igc21vb3RobHkgdHVybiBvbiBtZW51XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3NpZGUtbWVudScpLmZhZGVJbig1MDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCQoJ2JvZHknKS5oYXNDbGFzcygnZml4ZWQtc2lkZWJhcicpKXtcbiAgICAgICAgICAgICAgICAgICAgJCgnI3NpZGUtbWVudScpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjc2lkZS1tZW51JykuZmFkZUluKDUwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBhbGwgaW5saW5lIHN0eWxlIGZyb20ganF1ZXJ5IGZhZGVJbiBmdW5jdGlvbiB0byByZXNldCBtZW51IHN0YXRlXG4gICAgICAgICAgICAgICAgICAgICQoJyNzaWRlLW1lbnUnKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1dKVxuXG4uZGlyZWN0aXZlKCdzaWRlTmF2aWdhdGlvbicsIFsgJyR0aW1lb3V0JywgZnVuY3Rpb24oICR0aW1lb3V0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIC8vIENhbGwgdGhlIG1ldHNpTWVudSBwbHVnaW4gYW5kIHBsdWcgaXQgdG8gc2lkZWJhciBuYXZpZ2F0aW9uXG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGVsZW1lbnQubWV0aXNNZW51KCk7XG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn1dKVxuXG4uZGlyZWN0aXZlKCdpYm94VG9vbHMnLCBbICckdGltZW91dCcsZnVuY3Rpb24gKCR0aW1lb3V0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgc2NvcGU6IHRydWUsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvY29tbW9uL2lib3hfdG9vbHMuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uICgkc2NvcGUsICRlbGVtZW50KSB7XG4gICAgICAgICAgICAvLyBGdW5jdGlvbiBmb3IgY29sbGFwc2UgaWJveFxuICAgICAgICAgICAgJHNjb3BlLnNob3doaWRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBpYm94ID0gJGVsZW1lbnQuY2xvc2VzdCgnZGl2Lmlib3gnKTtcbiAgICAgICAgICAgICAgICB2YXIgaWNvbiA9ICRlbGVtZW50LmZpbmQoJ2k6Zmlyc3QnKTtcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IGlib3guZmluZCgnZGl2Lmlib3gtY29udGVudCcpO1xuICAgICAgICAgICAgICAgIGNvbnRlbnQuc2xpZGVUb2dnbGUoMjAwKTtcbiAgICAgICAgICAgICAgICAvLyBUb2dnbGUgaWNvbiBmcm9tIHVwIHRvIGRvd25cbiAgICAgICAgICAgICAgICBpY29uLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLXVwJykudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tZG93bicpO1xuICAgICAgICAgICAgICAgIGlib3gudG9nZ2xlQ2xhc3MoJycpLnRvZ2dsZUNsYXNzKCdib3JkZXItYm90dG9tJyk7XG4gICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpYm94LnJlc2l6ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpYm94LmZpbmQoJ1tpZF49bWFwLV0nKS5yZXNpemUoKTtcbiAgICAgICAgICAgICAgICB9LCA1MCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC8vIEZ1bmN0aW9uIGZvciBjbG9zZSBpYm94XG4gICAgICAgICAgICAgICAgJHNjb3BlLmNsb3NlYm94ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaWJveCA9ICRlbGVtZW50LmNsb3Nlc3QoJ2Rpdi5pYm94Jyk7XG4gICAgICAgICAgICAgICAgICAgIGlib3gucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn1dKVxuXG4uZGlyZWN0aXZlKCdiYWNrJywgWyckd2luZG93JyAsIGZ1bmN0aW9uICgkd2luZG93KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBpRWxlbWVudCwgaUF0dHJzKSB7XG4gICAgICAgICAgICBpRWxlbWVudC5iaW5kKCdjbGljaycsZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAkd2luZG93Lmhpc3RvcnkuYmFjaygpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH07XG59XSlcbiIsIi8qKlxuKiBJbk5ldCBNb2R1bGVcbipcbiogRGVzY3JpcHRpb25cbiovXG5hbmd1bGFyLm1vZHVsZSgnSW5OZXQnKVxuLmNvbnRyb2xsZXIoJ0Rpc3BhdGNoQ3RybCcsIFsnJHNjb3BlJywnJHN0YXRlUGFyYW1zJywnJG1vZGFsJywnQ2FzZVN2YycsJ0JyYW5jaFN2YycsICdDYXJTdmMnLCAnVXNlclN2YycsXG5cdGZ1bmN0aW9uICgkc2NvcGUgLCAkc3RhdGVQYXJhbXMsICRtb2RhbCwgQ2FzZVN2YywgQnJhbmNoU3ZjLCBDYXJTdmMsIFVzZXJTdmMpIHtcblxuXHRDYXNlU3ZjLmZldGNoKFVzZXJTdmMudXNlckNvcnBzKCkpLnN1Y2Nlc3MoZnVuY3Rpb24oY2FzZXMpe1xuXHRcdCRzY29wZS5jYXNlcyA9IGNhc2VzO1xuXHRcdENhc2VTdmMuZmluZEJ5SWQoJHNjb3BlLmNhc2VzWyRzdGF0ZVBhcmFtcy5jYXNlSWRdLl9pZCkuc3VjY2VzcyhmdW5jdGlvbihfY2FzZSl7XG5cdFx0XHRcdCRzY29wZS5jYXNlRGV0YWlscyA9IF9jYXNlXG5cdFx0fSlcblx0fSlcblxuXHRCcmFuY2hTdmMuZmV0Y2goVXNlclN2Yy51c2VyQ29ycHMoKSkuc3VjY2VzcyhmdW5jdGlvbihicmFuY2hlcyl7XG5cdCAgICAkc2NvcGUuYnJhbmNoTGlzdCA9IGJyYW5jaGVzO1xuXG5cdCB9KVxuXG5cdENhclN2Yy5mZXRjaCgpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSl7XG5cdCAgICAkc2NvcGUuY2Fyc0RhdGEgPSBkYXRhXG5cdH0pXG5cblx0JHNjb3BlLmFkZE5ld0Nhc2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgXHR2YXIgbW9kYWxJbnN0YW5jZSA9ICRtb2RhbC5vcGVuKHtcblx0XHQgICAgdGVtcGxhdGVVcmw6ICcvcGFydGlhbHMvY2FzZVBhbmVsL2Nhc2VBZGRNb2RhbCcsXG5cdFx0ICAgIGNvbnRyb2xsZXI6ICdDYXNlQWRkTW9kYWxDdHJsJyxcblx0XHQgICAgc2l6ZTogXCJsZ1wiLFxuXHRcdCAgICByZXNvbHZlIDoge1xuXHRcdCAgICBcdGNhc2VJZCA6IGZ1bmN0aW9uKCl7XG5cdFx0ICAgIFx0XHRyZXR1cm4gJHNjb3BlLmlkID0gXCLmlrDlop7moYjku7ZcIlxuXHRcdCAgICBcdH0sXG5cdFx0ICAgIFx0YnJhbmNoTGlzdCA6IGZ1bmN0aW9uKCl7XG5cdFx0ICAgIFx0XHRyZXR1cm4gJHNjb3BlLmJyYW5jaExpc3Rcblx0XHQgICAgXHR9LFxuXHRcdCAgICBcdGNhcnNEYXRhIDogZnVuY3Rpb24oKXtcblx0XHQgICAgXHRcdHJldHVybiAkc2NvcGUuY2Fyc0RhdGFcblx0XHQgICAgXHR9LFxuXHRcdCAgICBcdGlzTmV3IDogZnVuY3Rpb24oKXtcblx0XHQgICAgXHRcdHJldHVybiB0cnVlXG5cdFx0ICAgIFx0fSxcblx0XHQgICAgXHRjYXNlRGV0YWlscyA6IGZ1bmN0aW9uKCl7XG5cdFx0ICAgIFx0XHRyZXR1cm4ge31cblx0XHQgICAgXHR9XG5cdFx0ICAgIH1cblx0ICAgIH0pO1xuXHQgfTtcblxuXHQgJHNjb3BlLmVkaXRDYXNlID0gZnVuY3Rpb24oKXtcblx0IFx0dmFyIG1vZGFsSW5zdGFuY2UgPSAkbW9kYWwub3Blbih7XG5cdFx0ICAgIHRlbXBsYXRlVXJsOiAnL3BhcnRpYWxzL2Nhc2VQYW5lbC9jYXNlQWRkTW9kYWwnLFxuXHRcdCAgICBjb250cm9sbGVyOiAnQ2FzZUFkZE1vZGFsQ3RybCcsXG5cdFx0ICAgIHNpemU6IFwibGdcIixcblx0XHQgICAgcmVzb2x2ZSA6IHtcblx0XHQgICAgXHRjYXNlSWQgOiBmdW5jdGlvbigpe1xuXHRcdCAgICBcdFx0cmV0dXJuICRzY29wZS5pZCA9ICRzY29wZS5jYXNlc1skc3RhdGVQYXJhbXMuY2FzZUlkXS5jYXNlSWQgXG5cdFx0ICAgIFx0fSxcblx0XHQgICAgXHRicmFuY2hMaXN0IDogZnVuY3Rpb24oKXtcblx0XHQgICAgXHRcdHJldHVybiAkc2NvcGUuYnJhbmNoTGlzdFxuXHRcdCAgICBcdH0sXG5cdFx0ICAgIFx0Y2Fyc0RhdGEgOiBmdW5jdGlvbigpe1xuXHRcdCAgICBcdFx0Zm9yICh2YXIgaSA9ICRzY29wZS5jYXJzRGF0YS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdCAgICBcdFx0XHRmb3IgKHZhciBqID0gJHNjb3BlLmNhc2VEZXRhaWxzLmNhcnMubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcblx0XHQgICAgXHRcdFx0XHRpZiAoICRzY29wZS5jYXJzRGF0YVtpXS5yYWRpb0NvZGUgPT09ICRzY29wZS5jYXNlRGV0YWlscy5jYXJzW2pdLnJhZGlvX2NvZGUpIHtcblx0XHQgICAgXHRcdFx0XHRcdCRzY29wZS5jYXJzRGF0YVtpXS5pc0NoZWNrZWQgPSB0cnVlIFxuXHRcdCAgICBcdFx0XHRcdH07XG5cdFx0ICAgIFx0XHRcdH07XHRcdCAgICBcdFx0XHRcblx0XHQgICAgXHRcdH07XG5cdFx0ICAgIFx0XHRyZXR1cm4gJHNjb3BlLmNhcnNEYXRhXG5cdFx0ICAgIFx0fSxcblx0XHQgICAgXHRpc05ldyA6IGZ1bmN0aW9uKCl7XG5cdFx0ICAgIFx0XHRyZXR1cm4gZmFsc2UgXG5cdFx0ICAgIFx0fSxcblx0XHQgICAgXHRjYXNlRGV0YWlscyA6IGZ1bmN0aW9uKCl7XG5cdFx0ICAgIFx0XHRyZXR1cm4gJHNjb3BlLmNhc2VEZXRhaWxzXG5cdFx0ICAgIFx0fVxuXHRcdCAgICB9XG5cdCAgICB9KTtcblx0IH07XG5cbn1dKSIsIi8qKlxuKiBJbk5ldCBNb2R1bGVcbipcbiogRGVzY3JpcHRpb25cbiovXG5hbmd1bGFyLm1vZHVsZSgnSW5OZXQnKVxuLmNvbnRyb2xsZXIoJ0R1dHlMaXN0Q3RybCcsIFsnJHNjb3BlJywgJ0JyYW5jaFN2YycsICckc3RhdGVQYXJhbXMnLCAnU29ja2V0U3ZjJywgJ1VzZXJTdmMnLCAnJHEnLFxuXHRmdW5jdGlvbiAoJHNjb3BlLCBCcmFuY2hTdmMsICRzdGF0ZVBhcmFtcywgU29ja2V0U3ZjLCBVc2VyU3ZjLCAkcSkge1xuXG5cdFx0aWYgKFVzZXJTdmMuYWNjZXNzTGV2ZWwoKSA8IDMgKSB7XG5cdFx0XHR2YXIgYnJhbmNoID0gVXNlclN2Yy51c2VyQnJhbmNoKCk7XG5cdFx0fSBlbHNle1xuXHRcdFx0dmFyIGJyYW5jaCA9ICRzdGF0ZVBhcmFtcy5icmFuY2hcblx0XHR9O1xuXG5cdFx0QnJhbmNoU3ZjLnRvdGFsTGlzdEZpbmRCeU5hbWUoYnJhbmNoKS5zdWNjZXNzKGZ1bmN0aW9uKGJyYW5jaCl7XG5cdFx0XHQkc2NvcGUuYnJhbmNoID0gYnJhbmNoO1xuXHRcdFx0JHNjb3BlLm9uRHV0eVRvdGFsID0gdG90YWxDb3VudCgkc2NvcGUuYnJhbmNoKVxuXHRcdH0pO1xuXG5cdFx0ZnVuY3Rpb24gdG90YWxDb3VudChvYmope1xuXHRcdFx0dmFyIHRvdGFsID0gMDtcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLm1lbWJlcnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aWYgKG9iai5tZW1iZXJzW2ldLm9uRHV0eSkge1xuXHRcdFx0XHRcdHRvdGFsICs9IDE7IFxuXHRcdFx0XHR9O1xuXHRcdFx0fTtcblx0XHRcdHJldHVybiB0b3RhbFxuXHRcdH07XG59XSkiLCIvKipcbiogSW5OZXQgTW9kdWxlXG4qXG4qIERlc2NyaXB0aW9uXG4qL1xuYW5ndWxhci5tb2R1bGUoJ0luTmV0Jylcbi5jb250cm9sbGVyKCdEdXR5TGlzdEVkaXRDdHJsJywgWyckc2NvcGUnLCAnQnJhbmNoU3ZjJywgJyRzdGF0ZVBhcmFtcycsJ01lbWJlclN2YycsICckbG9jYXRpb24nLCAnJHdpbmRvdycsICdVc2VyU3ZjJyxcblx0ZnVuY3Rpb24gKCRzY29wZSwgQnJhbmNoU3ZjLCAkc3RhdGVQYXJhbXMsIE1lbWJlclN2YywgJGxvY2F0aW9uLCAkd2luZG93LCBVc2VyU3ZjKSB7XG5cblx0XHRpZiAoVXNlclN2Yy5hY2Nlc3NMZXZlbCgpIDwgMiApIHtcblx0XHRcdHZhciBicmFuY2ggPSBVc2VyU3ZjLnVzZXJCcmFuY2goKTtcblx0XHR9IGVsc2V7XG5cdFx0XHR2YXIgYnJhbmNoID0gJHN0YXRlUGFyYW1zLmJyYW5jaFxuXHRcdH07XG5cblx0XHRCcmFuY2hTdmMudG90YWxMaXN0RmluZEJ5TmFtZShicmFuY2gpLnN1Y2Nlc3MoZnVuY3Rpb24oYnJhbmNoKXtcblx0XHRcdCRzY29wZS5icmFuY2ggPSBicmFuY2g7XG5cdFx0XHQkc2NvcGUub25EdXR5VG90YWwgPSAwO1xuXHRcdH0pO1xuXG5cdFx0JHNjb3BlLmNoZWNrID0gZnVuY3Rpb24obWVtYmVyKXtcblx0XHRcdG1lbWJlci5vbkR1dHkgPSAhbWVtYmVyLm9uRHV0eVxuXHRcdH07XG5cblx0XHQkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uKCl7XG5cdFx0XHRCcmFuY2hTdmMudXBkYXRlRGlyZWN0b3Ioe1xuXHRcdFx0XHRicmFuY2ggICA6ICRzY29wZS5icmFuY2gubmFtZSxcblx0XHRcdFx0ZGlyZWN0b3IgOiAkc2NvcGUuYnJhbmNoLmRpcmVjdG9yXG5cdFx0XHR9KS5zdWNjZXNzKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLmJyYW5jaC5tZW1iZXJzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0TWVtYmVyU3ZjLnVwZGF0ZUJ5TWVtYmVySWQoe1xuXHRcdFx0XHRcdFx0bmFtZSBcdDogJHNjb3BlLmJyYW5jaC5tZW1iZXJzW2ldLm5hbWUsXG5cdFx0XHRcdFx0XHR0aXRsZSAgIDogJHNjb3BlLmJyYW5jaC5tZW1iZXJzW2ldLnRpdGxlLFxuXHRcdFx0XHRcdFx0bWVtYmVySWQgOiAkc2NvcGUuYnJhbmNoLm1lbWJlcnNbaV0uX2lkLFxuXHRcdFx0XHRcdFx0b25EdXR5IDogJHNjb3BlLmJyYW5jaC5tZW1iZXJzW2ldLm9uRHV0eSxcblx0XHRcdFx0XHRcdG1pc3Npb24gOiAgJHNjb3BlLmJyYW5jaC5tZW1iZXJzW2ldLm1pc3Npb25cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fTtcblx0XHRcdH0pLnRoZW4oZnVuY3Rpb24oKXtcblx0XHRcdFx0JHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcblx0XHRcdH0pO1xuXHRcdH07XG5cdFxufV0pIiwiLyoqXG4qIEluTmV0IE1vZHVsZVxuKlxuKiBEZXNjcmlwdGlvblxuKi9cbmFuZ3VsYXIubW9kdWxlKCdJbk5ldCcpXG4uc2VydmljZSgnR2VvU3ZjJywgWyAnJHEnLCBmdW5jdGlvbiAoICRxICkge1xuXG5cdHRoaXMuZ2V0R2VvbG9jYXRpb25Db29yZGluYXRlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKFxuICAgICAgICAgICAgZnVuY3Rpb24ocG9zaXRpb24pIHsgZGVmZXJyZWQucmVzb2x2ZShwb3NpdGlvbi5jb29yZHMpOyB9LFxuICAgICAgICAgICAgZnVuY3Rpb24oZXJyb3IpIHsgZGVmZXJyZWQucmVzb2x2ZShudWxsKTsgfVxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9O1xuXG5cdFxufV0pIiwiLyoqXG4qIEluTmV0IE1vZHVsZVxuKlxuKiBEZXNjcmlwdGlvblxuKi9cbmFuZ3VsYXIubW9kdWxlKCdJbk5ldCcpXG4uY29udHJvbGxlcignTG9naW5DdHJsJywgWyckc2NvcGUnLCdVc2VyU3ZjJywgJ3N0b3JlJywgJyRzdGF0ZScsJ2p3dEhlbHBlcicsJyRodHRwJywgJ1NvY2tldFN2YycsXG5cdGZ1bmN0aW9uICgkc2NvcGUsIFVzZXJTdmMsIHN0b3JlLCAkc3RhdGUsIGp3dEhlbHBlciwgJGh0dHAsIFNvY2tldFN2Yykge1xuXG5cdHZhciB0b2tlbiA9IG51bGw7XG5cdCRzY29wZS51c2VyID0ge307XG5cdCRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uKCl7XG5cdFx0VXNlclN2Yy5sb2dpbigkc2NvcGUudXNlcikuc3VjY2VzcyhmdW5jdGlvbihkYXRhKXtcblx0XHRcdGlmIChkYXRhLnN1Y2Nlc3MpIHtcblx0XHRcdFx0c3RvcmUuc2V0KCdqd3QnLCBkYXRhLnRva2VuKTtcblx0XHRcdFx0JGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ3gtYWNjZXNzLXRva2VuJ10gPSBkYXRhLnRva2VuO1xuXHRcdFx0XHR0b2tlbiA9IGRhdGEudG9rZW47XG5cdFx0XHR9ZWxzZXtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJwYXNzd29yZCBpcyBub3QgZXhpc3RlZCFcIik7XG5cdFx0XHR9O1xuXHRcdH0pLnRoZW4oZnVuY3Rpb24oKXtcblx0XHRcdFNvY2tldFN2Yy5pbml0KHRva2VuKTtcblx0XHRcdFNvY2tldFN2Yy5lbWl0KCdsb2dpbicpO1xuXHRcdH0pXG5cdFx0LnRoZW4oZnVuY3Rpb24oKXtcblx0XHRcdGlmIChqd3RIZWxwZXIuZGVjb2RlVG9rZW4odG9rZW4pLnJvbGUgPT0gXCJhZG1pblwiKSB7XG5cdFx0XHRcdCRzdGF0ZS5nbygnZHV0eURlc2suZGFzaGJvYXJkJylcblx0XHRcdH1lbHNle1xuXHRcdFx0XHQkc3RhdGUuZ28oJ2RpcmVjdG9yLnNhZmV0eS5pbmRleCcpXG5cdFx0XHR9XG5cdFx0fSlcblx0fTtcbn1dKSIsIi8qKlxuKiBJbk5ldCBNb2R1bGVcbipcbiogRGVzY3JpcHRpb25cbiovXG5hbmd1bGFyLm1vZHVsZSgnSW5OZXQnKVxuLmNvbnRyb2xsZXIoJ01hcEluZGV4Q3RybCcsIFsnJHNjb3BlJywgJ2xlYWZsZXREYXRhJywgJ0dlb1N2YycsXG4gICAgZnVuY3Rpb24gKCRzY29wZSwgbGVhZmxldERhdGEsIEdlb1N2Yykge1xuICAgICAgICBcbiAgICBHZW9TdmMuZ2V0R2VvbG9jYXRpb25Db29yZGluYXRlcygpLnRoZW4oZnVuY3Rpb24oY29vcmQpe1xuICAgICAgICAkc2NvcGUubm93UG9zLmxhdCA9IGNvb3JkLmxhdGl0dWRlO1xuICAgICAgICAkc2NvcGUubm93UG9zLmxuZyA9IGNvb3JkLmxvbmdpdHVkZTtcbiAgICAgICAgJHNjb3BlLm5vd1Bvcy56b29tID0gMTc7XG4gICAgfSlcblxuICAgIGFuZ3VsYXIuZXh0ZW5kKCRzY29wZSwge1xuICAgICAgICBub3dQb3M6IHtcbiAgICAgICAgICAgIGxhdDogMjQuOTg4LFxuICAgICAgICAgICAgbG5nOiAxMjEuNTc1MixcbiAgICAgICAgICAgIHpvb206IDE3XG4gICAgICAgIH0sXG4gICAgICAgIGNvbnRyb2xzOiB7XG4gICAgICAgICAgICBkcmF3OiB7fVxuICAgICAgICB9XG4gICAgfSlcblxuICAgIGxlYWZsZXREYXRhLmdldE1hcCgpLnRoZW4oZnVuY3Rpb24obWFwKSB7XG4gICAgICB2YXIgZHJhd25JdGVtcyA9ICRzY29wZS5jb250cm9scy5lZGl0LmZlYXR1cmVHcm91cDtcbiAgICAgIG1hcC5vbignZHJhdzpjcmVhdGVkJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIGxheWVyID0gZS5sYXllcjtcbiAgICAgICAgZHJhd25JdGVtcy5hZGRMYXllcihsYXllcik7XG4gICAgICAgIFxuICAgICAgICBGZWF0dXJlQ29sbGVjdGlvbnMucHVzaChsYXllci50b0dlb0pTT04oKSlcbiAgICAgICAgXG4gICAgICB9KTtcbiAgICB9KVxuXG5cdFxufV0pIiwiLyoqXG4qIEluTmV0IE1vZHVsZVxuKlxuKiBEZXNjcmlwdGlvblxuKi9cbmFuZ3VsYXIubW9kdWxlKCdJbk5ldCcpXG4uY29udHJvbGxlcignTWVtYmVyQ3RybCcsIFsnJHNjb3BlJywgJ01lbWJlclN2YycsICckc3RhdGVQYXJhbXMnLFxuXHRmdW5jdGlvbiAoJHNjb3BlLCBNZW1iZXJTdmMsICRzdGF0ZVBhcmFtcykge1xuXG5cdFx0JHNjb3BlLmJyYW5jaCA9ICRzdGF0ZVBhcmFtcy5icmFuY2g7XG5cblx0XHRNZW1iZXJTdmMuZmluZEJ5QnJhbmNoKCRzdGF0ZVBhcmFtcy5icmFuY2gpLnN1Y2Nlc3MoZnVuY3Rpb24obWVtYmVycyl7XG5cdFx0XHQkc2NvcGUubWVtYmVycyA9IG1lbWJlcnM7XG5cdFx0XHQkc2NvcGUubWVtYmVycy5mb3JFYWNoKGZ1bmN0aW9uKG1lbWJlcil7XG5cdFx0XHRcdG1lbWJlci53b3JraW5nVGltZSA9IG1vbWVudC5kdXJhdGlvbihtZW1iZXIud29ya2luZ1RpbWUsJ3NlY29uZHMnKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXG59XSkiLCJhbmd1bGFyLm1vZHVsZSgnSW5OZXQnKVxuLmNvbnRyb2xsZXIoJ01lbWJlckVkaXRDdHJsJywgWyckc2NvcGUnLCAnTWVtYmVyU3ZjJywgJ0JyYW5jaFN2YycsICckc3RhdGVQYXJhbXMnLCAnJHdpbmRvdycsJyRtb2RhbCcsICckc3RhdGUnLFxuXHRmdW5jdGlvbiAoJHNjb3BlLCBNZW1iZXJTdmMsIEJyYW5jaFN2YywgJHN0YXRlUGFyYW1zLCAkd2luZG93LCAkbW9kYWwsICRzdGF0ZSkge1xuXG5cdFx0JHNjb3BlLmlzRGVsZXRlZCA9IGZhbHNlO1xuXG5cdFx0dmFyIG1lbWJlckluaXQgPSBmdW5jdGlvbigpe1xuXHRcdFx0TWVtYmVyU3ZjLmZpbmRCeUJyYW5jaCgkc3RhdGVQYXJhbXMuYnJhbmNoKS5zdWNjZXNzKGZ1bmN0aW9uKG1lbWJlcnMpe1xuXHRcdFx0XHQkc2NvcGUubWVtYmVycyA9IG1lbWJlcnM7XG5cdFx0XHRcdCRzY29wZS5tZW1iZXJzLmZvckVhY2goZnVuY3Rpb24obWVtYmVyKXtcblx0XHRcdFx0XHRtZW1iZXIud29ya2luZ1RpbWUgPSBtb21lbnQuZHVyYXRpb24obWVtYmVyLndvcmtpbmdUaW1lLCdzZWNvbmRzJyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0bWVtYmVySW5pdCgpO1xuXG5cdFx0JHNjb3BlLnNhdmUgPSBmdW5jdGlvbigpe1xuXHRcdFx0dmFyIG1lbWJlcklkcyA9IFtdO1xuXHRcdFx0dmFyIGRpcmVjdG9ycyA9IFtdO1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUubWVtYmVycy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRtZW1iZXJJZHMucHVzaCgkc2NvcGUubWVtYmVyc1tpXS5faWQpO1xuXHRcdFx0XHRkaXJlY3RvcnMucHVzaCgkc2NvcGUubWVtYmVyc1tpXS5uYW1lKTtcblx0XHRcdFx0aWYgKCRzY29wZS5tZW1iZXJzW2ldLnRpdGxlID09IFwi5YiG6ZqK6ZW3XCIgfHwgJHNjb3BlLm1lbWJlcnNbaV0udGl0bGUgPT0gXCLlsI/pmorplbdcIiB8fCAkc2NvcGUubWVtYmVyc1tpXS50aXRsZSA9PSBcIuS4remaiumVt1wiIHx8ICRzY29wZS5tZW1iZXJzW2ldLnRpdGxlID09IFwi5aSn6ZqK6ZW3XCIpIHtcblx0XHRcdFx0XHRkaXJlY3RvciA9ICRzY29wZS5tZW1iZXJzW2ldLm5hbWU7XG5cdFx0XHRcdH07XG5cdFx0XHR9O1xuXG5cdFx0XHRCcmFuY2hTdmMudXBkYXRlKHtcblx0XHRcdFx0YnJhbmNoIDogJHN0YXRlUGFyYW1zLmJyYW5jaCxcblx0XHRcdFx0bWVtYmVycyA6IG1lbWJlcklkcyxcblx0XHRcdFx0ZGlyZWN0b3JzIDogZGlyZWN0b3JzLFxuXHRcdFx0XHRkaXJlY3RvciA6IGRpcmVjdG9yXG5cdFx0XHR9KTtcblxuXHRcdFx0ICR3aW5kb3cuaGlzdG9yeS5iYWNrKCk7XG5cdFx0fTtcblxuXHRcdCRzY29wZS5hZGROZXdNZW1iZXIgPSBmdW5jdGlvbigpe1xuXHRcdFx0dmFyIG1vZGFsSW5zdGFuY2UgPSAkbW9kYWwub3Blbih7XG5cdFx0XHQgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9tZW1iZXIvbWVtYmVyLm1vZGFsLmh0bWwnLFxuXHRcdFx0ICAgIGNvbnRyb2xsZXI6ICdNZW1iZXJNb2RhbEN0cmwnLFxuXHRcdFx0ICAgIHNpemU6IFwibWRcIixcblx0XHRcdCAgICByZXNvbHZlIDoge1xuXHRcdFx0ICAgIFx0YnJhbmNoIDogZnVuY3Rpb24oKXtcblx0XHRcdCAgICBcdFx0cmV0dXJuICRzdGF0ZVBhcmFtcy5icmFuY2ggXG5cdFx0XHQgICAgXHR9LFxuXHRcdFx0ICAgIFx0bWVtYmVyIDogZnVuY3Rpb24oKXtcblx0XHRcdCAgICBcdFx0cmV0dXJuIHsgd29ya2luZ1RpbWUgOiAxMjAwIH07XG5cdFx0XHQgICAgXHR9XG5cdFx0XHQgICAgfVxuXHRcdCAgICB9KTtcblxuXHRcdCAgICBtb2RhbEluc3RhbmNlLnJlc3VsdC50aGVuKGZ1bmN0aW9uKG1lbWJlcil7XG5cdFx0ICAgIFx0JHNjb3BlLm1lbWJlcnMudW5zaGlmdChtZW1iZXIpO1xuXHRcdCAgICB9KVxuXHRcdH1cblxuXHRcdCRzY29wZS51cGRhdGUgPSBmdW5jdGlvbihtZW1iZXIpe1xuXHRcdFx0dmFyIG1vZGFsSW5zdGFuY2UgPSAkbW9kYWwub3Blbih7XG5cdFx0XHQgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9tZW1iZXIvbWVtYmVyLm1vZGFsLmh0bWwnLFxuXHRcdFx0ICAgIGNvbnRyb2xsZXI6ICdNZW1iZXJNb2RhbEN0cmwnLFxuXHRcdFx0ICAgIHNpemU6IFwibWRcIixcblx0XHRcdCAgICByZXNvbHZlIDoge1xuXHRcdFx0ICAgIFx0YnJhbmNoIDogZnVuY3Rpb24oKXtcblx0XHRcdCAgICBcdFx0cmV0dXJuICRzdGF0ZVBhcmFtcy5icmFuY2ggXG5cdFx0XHQgICAgXHR9LFxuXHRcdFx0ICAgIFx0bWVtYmVyIDogZnVuY3Rpb24oKXtcblx0XHRcdCAgICBcdFx0cmV0dXJuIHsgd29ya2luZ1RpbWUgOiBtZW1iZXIud29ya2luZ1RpbWUubWludXRlcygpICogNjAgKyBtZW1iZXIud29ya2luZ1RpbWUuc2Vjb25kcygpfVxuXHRcdFx0ICAgIFx0fVxuXHRcdFx0ICAgIH1cblx0XHQgICAgfSk7XG5cblx0XHQgICAgbW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihmdW5jdGlvbihtZW1iZXIpe1xuXHRcdCAgICBcdG1lbWJlckluaXQoKTtcblx0XHQgICAgfSlcblx0XHR9XG5cblx0XHQkc2NvcGUuZGVsZXRlID0gZnVuY3Rpb24obWVtYmVyKXtcblx0XHRcdE1lbWJlclN2Yy5kZWxldGVNZW1iZXIobWVtYmVyKTtcblx0XHRcdG1lbWJlckluaXQoKTtcblx0XHR9O1x0XG59XSkiLCIvKipcbiogSW5OZXQgTW9kdWxlXG4qXG4qIERlc2NyaXB0aW9uXG4qL1xuYW5ndWxhci5tb2R1bGUoJ0luTmV0Jylcbi5jb250cm9sbGVyKCdNZW1iZXJNb2RhbEN0cmwnLCBbJyRzY29wZScsICdicmFuY2gnLCAnTWVtYmVyU3ZjJywgJyRtb2RhbEluc3RhbmNlJywgJyRzdGF0ZScsICdtZW1iZXInLCdCcmFuY2hTdmMnLCAnVXNlclN2YycsXG5cdGZ1bmN0aW9uICgkc2NvcGUsIGJyYW5jaCwgTWVtYmVyU3ZjLCAkbW9kYWxJbnN0YW5jZSwgJHN0YXRlLCBtZW1iZXIsIEJyYW5jaFN2YywgVXNlclN2YyApIHtcblxuXHQkc2NvcGUuaXNOZXcgPSBfLmlzRW1wdHkobWVtYmVyKTtcblxuXHQkc2NvcGUubWVtYmVyID0ge1xuXHRcdGlkIFx0XHQgXHQ6IG1lbWJlci5pZCB8fCAgXCJcIiwgXG5cdFx0bmFtZSBcdCBcdDogbWVtYmVyLm5hbWUgfHwgbnVsbCAsIFxuXHRcdHRpdGxlICAgIFx0OiBcIua2iOmYsumaiuWToVwiLFxuXHRcdHRpdGxlcyAgIFx0OiBbXCLmtojpmLLpmorlk6FcIixcIuWwj+maiumVt1wiLFwi5YiG6ZqK6ZW3XCIsXCLkuK3pmorplbdcIixcIuWkp+maiumVt1wiLFwi5Ymv5aSn6ZqK6ZW3XCJdLFxuXHRcdGJyYW5jaCAgIFx0OiBtZW1iZXIuYnJhbmNoIHx8IGJyYW5jaCxcblx0XHR3b3JraW5nVGltZSA6IG1lbWJlci53b3JraW5nVGltZSB8fCAgbnVsbCxcblx0XHRyYWRpb0NvZGUgXHQ6IG1lbWJlci5yYWRpb0NvZGUgfHwgIG51bGwsIFxuXHRcdG1pc3Npb24gIFx0OiBcIueehOWtkOaJi1wiLFxuXHRcdG1pc3Npb25zIFx0OiBbXCLnnoTlrZDmiYtcIixcIuWJr+eehOWtkOaJi1wiLFwi5Y+45qmfXCIsXCLluLbpmorlrphcIixcIuWuieWFqOeuoeWItuWToVwiLFwi6IGv57Wh5a6YXCJdLFxuXHRcdGNvcnBzXHQgXHQ6IFVzZXJTdmMudXNlckNvcnBzKCksXG5cdFx0Y29ycHNzIFx0IFx0OiBbXCLnrKzkuIDmlZHngb3mlZHorbflpKfpmopcIixcIuesrOS4ieaVkeeBveaVkeitt+Wkp+mailwiXSxcblx0fTtcblxuXHRCcmFuY2hTdmMuZmV0Y2goVXNlclN2Yy51c2VyQ29ycHMoKSkuc3VjY2VzcyhmdW5jdGlvbihicmFuY2hlcyl7XG5cdFx0JHNjb3BlLmJyYW5jaGVzID0gYnJhbmNoZXM7IFxuXHRcdGlmICghJHNjb3BlLmlzTmV3KSB7XG5cdFx0XHR2YXIgYnJhbmNoQXJyeSA9IFtdO1xuXHRcdFx0Zm9yICh2YXIgaSA9IGJyYW5jaGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHRcdGJyYW5jaEFycnkucHVzaChicmFuY2hlc1tpXS5uYW1lKTtcblx0XHRcdH07XG5cdFx0XHQkc2NvcGUubWVtYmVyLmJyYW5jaGVzID0gYnJhbmNoQXJyeTtcblx0XHR9OyBcblx0fSk7XG5cblx0dmFyIHJhZGlvQ29kZVByZWZpeCA9IGZ1bmN0aW9uKGJyYW5jaCl7XG5cdFx0dmFyIHN1ZmZpeCA9ICBicmFuY2guc3BsaXQoJycpLnNsaWNlKC0yKS5qb2luKCcnKTtcblx0XHRpZiAoc3VmZml4ID09IFwi5aSn6ZqKXCIgfHwgc3VmZml4ID09IFwi5Lit6ZqKXCIpIHtcblx0XHRcdHJldHVybiBcIuWMl+a1t1wiO1xuXHRcdH0gZWxzZXtcblx0XHRcdHJldHVybiBicmFuY2guc3BsaXQoJycpLnNsaWNlKDAsMikuam9pbignJyk7XG5cdFx0fTtcblx0fTtcblxuXHQkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uKCl7XG5cdFx0JHNjb3BlLm1lbWJlci5yYWRpb0NvZGVQcmVmaXggPSByYWRpb0NvZGVQcmVmaXgoJHNjb3BlLm1lbWJlci5icmFuY2gpO1xuXHRcdE1lbWJlclN2Yy5jcmVhdGUoJHNjb3BlLm1lbWJlcikuc3VjY2VzcyhmdW5jdGlvbigpe1xuXHRcdFx0JHNjb3BlLm1lbWJlci53b3JraW5nVGltZSA9IG1vbWVudC5kdXJhdGlvbihwYXJzZUludCgkc2NvcGUubWVtYmVyLndvcmtpbmdUaW1lKSwnc2Vjb25kcycpO1xuXHRcdH0pLnRoZW4oZnVuY3Rpb24oKXtcblx0XHRcdCRtb2RhbEluc3RhbmNlLmNsb3NlKCRzY29wZS5tZW1iZXIpO1xuXHRcdH0pXG5cdFx0XG5cdH07XG5cblx0JHNjb3BlLnVwZGF0ZSA9IGZ1bmN0aW9uKCl7XG5cblx0XHR2YXIgdXBkYXRlTWVtYmVyID0ge1xuXHRcdFx0ICBtZW1iZXJJZCAgOiBtZW1iZXIuX2lkLFxuXHRcdFx0ICBpZCBcdFx0OiBcIlwiLFxuXHRcdFx0ICBuYW1lIFx0XHQ6ICRzY29wZS5tZW1iZXIubmFtZSxcblx0XHRcdCAgY29ycHMgXHQ6ICRzY29wZS5tZW1iZXIuY29ycHMsXG5cdFx0XHQgIGJyYW5jaCBcdDogJHNjb3BlLm1lbWJlci5icmFuY2gsXG5cdFx0XHQgIHRpdGxlIFx0OiAkc2NvcGUubWVtYmVyLnRpdGxlLFxuXHRcdFx0ICB3b3JraW5nVGltZSA6ICRzY29wZS5tZW1iZXIud29ya2luZ1RpbWUsXG5cdFx0XHQgIHJhZGlvQ29kZSAgOiAkc2NvcGUubWVtYmVyLnJhZGlvQ29kZSxcblx0XHRcdCAgcmFkaW9Db2RlUHJlZml4IDogcmFkaW9Db2RlUHJlZml4KCRzY29wZS5tZW1iZXIuYnJhbmNoKVxuXHRcdH1cblxuXHRcdE1lbWJlclN2Yy51cGRhdGVCeU1lbWJlcklkKHVwZGF0ZU1lbWJlcik7XG5cdFx0JG1vZGFsSW5zdGFuY2UuY2xvc2UodXBkYXRlTWVtYmVyKTtcblx0fTtcblxuXHQkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oKXtcblx0XHQkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcblx0fTtcblx0XG59XSkiLCIvKipcbiogSW5OZXQgTW9kdWxlXG4qXG4qIERlc2NyaXB0aW9uXG4qL1xuYW5ndWxhci5tb2R1bGUoJ0luTmV0Jylcbi5zZXJ2aWNlKCdNZW1iZXJTdmMnLCBbJyRodHRwJyxmdW5jdGlvbiAoJGh0dHApIHtcblxuXHR0aGlzLmZldGNoID0gZnVuY3Rpb24oKXtcblx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL21lbWJlcnMnKVxuXHR9XG5cblx0dGhpcy5maW5kQnlCcmFuY2ggPSBmdW5jdGlvbiggYnJhbmNoICl7XG5cdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9tZW1iZXJzLycgKyBicmFuY2ggKVxuXHR9XG5cblx0dGhpcy5mZXRjaE9uRHV0eSA9IGZ1bmN0aW9uKGJyYW5jaCl7XG5cdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9tZW1iZXJzL29uRHV0eT9icmFuY2g9JyArIGJyYW5jaCk7XG5cdH1cblxuXHR0aGlzLmNyZWF0ZSA9IGZ1bmN0aW9uKG1lbWJlcil7XG5cdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvbWVtYmVycy8nLCBtZW1iZXIpXG5cdH1cblxuXHR0aGlzLnVwZGF0ZSA9IGZ1bmN0aW9uKG1lbWJlcil7XG5cdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9tZW1iZXJzLycsIG1lbWJlci5pZClcblx0fVxuXG5cdHRoaXMudXBkYXRlQnlNZW1iZXJJZCA9IGZ1bmN0aW9uKHVwZGF0ZU1lbWJlcil7XG5cdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9tZW1iZXJzL2ZpbmRCeUlkLycgKyB1cGRhdGVNZW1iZXIubWVtYmVySWQgLCB1cGRhdGVNZW1iZXIpXG5cdH1cblxuXHR0aGlzLnVwZGF0ZUlzQ2hlY2tlZCA9IGZ1bmN0aW9uKG1lbWJlckRhdGEpe1xuXHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvbWVtYmVycz9pZD0nICsgbWVtYmVyRGF0YS5tZW1iZXJJZCwgbWVtYmVyRGF0YSlcblx0fVxuXG5cdHRoaXMuZGVsZXRlTWVtYmVyID0gZnVuY3Rpb24obWVtYmVyKXtcblx0XHRyZXR1cm4gJGh0dHAuZGVsZXRlKCcvYXBpL21lbWJlcnMvJyArIG1lbWJlci5faWQpXG5cdH1cblxufV0pIiwiLyoqXG4qIEluTmV0IE1vZHVsZVxuKlxuKiBEZXNjcmlwdGlvblxuKi9cbmFuZ3VsYXIubW9kdWxlKCdJbk5ldCcpXG4uY29udHJvbGxlcignTmF2Q3RybCcsIFsnJHNjb3BlJywgJ0JyYW5jaFN2YycsICdzdG9yZScsICdqd3RIZWxwZXInLCAnVXNlclN2YycsXG5cdGZ1bmN0aW9uICgkc2NvcGUsIEJyYW5jaFN2Yywgc3RvcmUsIGp3dEhlbHBlciwgVXNlclN2Yykge1xuXG5cdCRzY29wZS51c2VybmFtZSA9IFVzZXJTdmMuY3VycmVudFVzZXIoKTtcblx0JHNjb3BlLmJyYW5jaCA9IFVzZXJTdmMudXNlckJyYW5jaCgpO1xuXG5cdEJyYW5jaFN2Yy5mZXRjaChVc2VyU3ZjLnVzZXJDb3JwcygpKS5zdWNjZXNzKGZ1bmN0aW9uKGJyYW5jaGVzKXtcblx0XHQkc2NvcGUuYnJhbmNoZXMgPSBicmFuY2hlcztcblx0fSk7XG5cblx0JHNjb3BlLmlzVmFsaWQgPSBmdW5jdGlvbihicmFuY2gpe1xuXHRcdHJldHVybiBVc2VyU3ZjLmlzVmFsaWQoYnJhbmNoKTtcblx0fTtcblx0XG59XSk7IiwiLyoqXG4qIEluTmV0IE1vZHVsZVxuKlxuKiBEZXNjcmlwdGlvblxuKi9cbmFuZ3VsYXIubW9kdWxlKCdJbk5ldCcpXG4uY29uZmlnKFsgJyRzdGF0ZVByb3ZpZGVyJywnJHVybFJvdXRlclByb3ZpZGVyJywgJyRsb2NhdGlvblByb3ZpZGVyJywgXG4gICAgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG5cbiAgICAkdXJsUm91dGVyUHJvdmlkZXJcbiAgICAgICAgLm90aGVyd2lzZSgnL2xvZ2luJyk7XG5cbiAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAuc3RhdGUoJ2Fub24nLHtcbiAgICAgICAgICAgIHVybCA6IFwiXCIsXG4gICAgICAgICAgICBhYnN0cmFjdCA6IHRydWUsXG4gICAgICAgICAgICB0ZW1wbGF0ZSA6IFwiPHVpLXZpZXc+XCIsXG4gICAgICAgIH0pXG4gICAgICAgIC5zdGF0ZSgnYW5vbi5sb2dpbicse1xuICAgICAgICAgICAgdXJsIDogXCIvbG9naW5cIixcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsIDpcInZpZXdzL2xvZ2luLmh0bWxcIixcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBcIkxvZ2luQ3RybFwiLFxuICAgICAgICB9KVxuICAgICAgICAuc3RhdGUoJ2Fub24uNDA0Jyx7XG4gICAgICAgICAgICB1cmwgOiBcIi80MDRcIixcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogXCJ2aWV3cy80MDQuaHRtbFwiXG4gICAgICAgIH0pXG5cbiAgICAvLyBkdXR5IGRlc2sgXG5cdCRzdGF0ZVByb3ZpZGVyXG5cdFx0LnN0YXRlKCdkdXR5RGVzaycsIHtcbiAgICAgICAgICAgIGFic3RyYWN0OiB0cnVlLFxuICAgICAgICAgICAgdXJsOiBcIi9kdXR5RGVza1wiLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwidmlld3MvY29tbW9uL2NvbnRlbnQuaHRtbFwiLFxuICAgICAgICAgICAgZGF0YSA6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZExvZ2luIDogdHJ1ZSxcbiAgICAgICAgICAgICAgICByb2xlIDogW1wiYWRtaW5cIl1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLnN0YXRlKCdkdXR5RGVzay5kYXNoYm9hcmQnLCB7XG4gICAgICAgICAgICB1cmw6IFwiL2Rhc2hib2FyZFwiLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwidmlld3MvZGFzaGJvYXJkLmh0bWxcIixcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBcIkRhc2hib2FyZEN0cmxcIixcbiAgICAgICAgICAgIGRhdGEgOiB7XG4gICAgICAgICAgICAgICAgcmVxdWlyZWRMb2dpbiA6IHRydWUsXG4gICAgICAgICAgICAgICAgcm9sZSA6IFtcImFkbWluXCJdXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5zdGF0ZSgnZHV0eURlc2suY2FzZScsIHtcbiAgICAgICAgICAgIHVybDogXCIvY2FzZVwiLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwidmlld3MvY2FzZS9jYXNlLmluZGV4Lmh0bWxcIixcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBcIkNhc2VDdHJsXCIsXG4gICAgICAgIH0pXG4gICAgICAgIC5zdGF0ZSgnZHV0eURlc2suc2FmZXR5Jyx7XG4gICAgICAgICAgICB1cmwgOiBcIi9jYXNlLzppZFwiLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcInZpZXdzL3N1bW1hcnkvc3VtbWFyeS5pbmRleC5odG1sXCIsXG4gICAgICAgICAgICBjb250cm9sbGVyIDogXCJTdW1tYXJ5Q3RybFwiXG4gICAgICAgIH0pXG4gICAgICAgIC5zdGF0ZSgnZHV0eURlc2suZHV0eWxpc3QnLHtcbiAgICAgICAgICAgIGFic3RyYWN0IDogdHJ1ZSxcbiAgICAgICAgICAgIHRlbXBsYXRlIDogXCI8dWktdmlldz5cIlxuICAgICAgICB9KVxuICAgICAgICAuc3RhdGUoJ2R1dHlEZXNrLmR1dHlsaXN0LnNob3cnLCB7XG4gICAgICAgICAgICB1cmw6IFwiL2R1dHlsaXN0LzpicmFuY2hcIixcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInZpZXdzL2R1dHlsaXN0L2R1dHlsaXN0LmluZGV4Lmh0bWxcIixcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBcIkR1dHlMaXN0Q3RybFwiLFxuICAgICAgICB9KVxuICAgICAgICAuc3RhdGUoJ2R1dHlEZXNrLmR1dHlsaXN0LmVkaXQnLCB7XG4gICAgICAgICAgICB1cmw6IFwiL2R1dHlsaXN0LzpicmFuY2gvZWRpdFwiLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwidmlld3MvZHV0eWxpc3QvZHV0eWxpc3QuZWRpdC5odG1sXCIsXG4gICAgICAgICAgICBjb250cm9sbGVyIDogXCJEdXR5TGlzdEVkaXRDdHJsXCIsXG4gICAgICAgIH0pXG4gICAgICAgIC5zdGF0ZSgnZHV0eURlc2subWVtYmVyJyx7XG4gICAgICAgICAgICBhYnN0cmFjdCA6IHRydWUsXG4gICAgICAgICAgICB0ZW1wbGF0ZSA6IFwiPHVpLXZpZXc+XCJcbiAgICAgICAgfSlcbiAgICAgICAgLnN0YXRlKCdkdXR5RGVzay5tZW1iZXIuc2hvdycsIHtcbiAgICAgICAgICAgIHVybDogXCIvbWVtYmVyLzpicmFuY2hcIixcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInZpZXdzL21lbWJlci9tZW1iZXIuaW5kZXguaHRtbFwiLFxuICAgICAgICAgICAgY29udHJvbGxlciA6IFwiTWVtYmVyQ3RybFwiLFxuICAgICAgICB9KVxuICAgICAgICAuc3RhdGUoJ2R1dHlEZXNrLm1lbWJlci5lZGl0Jywge1xuICAgICAgICAgICAgdXJsOiBcIi9tZW1iZXIvOmJyYW5jaC9lZGl0XCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJ2aWV3cy9tZW1iZXIvbWVtYmVyLmVkaXQuaHRtbFwiLFxuICAgICAgICAgICAgY29udHJvbGxlciA6IFwiTWVtYmVyRWRpdEN0cmxcIixcbiAgICAgICAgfSlcbiAgICAgICAgLnN0YXRlKCdkdXR5RGVzay5jYXInLCB7XG4gICAgICAgICAgICBhYnN0cmFjdCA6IHRydWUsXG4gICAgICAgICAgICB0ZW1wbGF0ZSA6IFwiPHVpLXZpZXc+XCJcbiAgICAgICAgfSlcbiAgICAgICAgLnN0YXRlKCdkdXR5RGVzay5jYXIuc2hvdycse1xuICAgICAgICAgICAgdXJsOiBcIi9jYXIvOmJyYW5jaFwiLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcInZpZXdzL2NhcnMvY2FyLmluZGV4Lmh0bWxcIixcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBcIkNhckluZGV4Q3RybFwiXG4gICAgICAgIH0pXG4gICAgICAgIC5zdGF0ZSgnZHV0eURlc2suY2FyLmVkaXQnLHtcbiAgICAgICAgICAgIHVybDogXCIvY2FyLzpicmFuY2gvZWRpdFwiLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcInZpZXdzL2NhcnMvY2FyLmVkaXQuaHRtbFwiLFxuICAgICAgICAgICAgY29udHJvbGxlciA6IFwiQ2FyRWRpdEN0cmxcIlxuICAgICAgICB9KVxuICAgIC8vIGRpcmVjdG9yIFxuICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgIC5zdGF0ZSgnZGlyZWN0b3InLHtcbiAgICAgICAgICAgIGFic3RyYWN0IDogdHJ1ZSxcbiAgICAgICAgICAgIHVybCA6IFwiXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybCA6IFwidmlld3MvZGlyZWN0b3IvZGlyZWN0b3IuY29udGVudC5odG1sXCIsXG4gICAgICAgICAgICBkYXRhIDoge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkTG9naW4gOiB0cnVlLFxuICAgICAgICAgICAgICAgIHJvbGUgOiBbXCJ1c2VyXCJdXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5zdGF0ZSgnZGlyZWN0b3Iuc2FmZXR5Jyx7XG4gICAgICAgICAgICBhYnN0cmFjdCA6IHRydWUsXG4gICAgICAgICAgICB1cmwgOiBcIi9zYWZldHlcIixcbiAgICAgICAgICAgIHRlbXBsYXRlIDogXCI8dWktdmlldz5cIiBcbiAgICAgICAgfSlcbiAgICAgICAgLnN0YXRlKCdkaXJlY3Rvci5zYWZldHkuaW5kZXgnLHtcbiAgICAgICAgICAgIHVybCA6IFwiL2luZGV4XCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybCA6IFwidmlld3Mvc2FmZXR5L3NhZmV0eS5pbmRleC5odG1sXCIsXG4gICAgICAgICAgICBjb250cm9sbGVyIDogXCJTYWZldHlJbmRleEN0cmxcIlxuICAgICAgICB9KVxuXG4gICAgICAgIC5zdGF0ZSgnZGlyZWN0b3Iuc2FmZXR5Lm1hbmFnZW1lbnQnLHtcbiAgICAgICAgICAgIHVybCA6IFwiL2luZGV4LzppZFwiLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcInZpZXdzL3NhZmV0eS9zYWZldHkubWFuYWdlLmh0bWxcIixcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBcIlNhZmV0eU1hbmFnZUN0cmxcIiAgICAgICAgIFxuICAgICAgICB9KVxuXG4gICAgICAgIC5zdGF0ZSgnZGlyZWN0b3Iuc2FmZXR5LnN1bW1hcnknLHtcbiAgICAgICAgICAgIHVybCA6IFwiL3N1bW1hcnkvOmlkXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybCA6IFwidmlld3Mvc3VtbWFyeS9zdW1tYXJ5LmluZGV4Lmh0bWxcIixcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBcIlN1bW1hcnlDdHJsXCJcbiAgICAgICAgfSlcblxuICAgICAgICAuc3RhdGUoJ2RpcmVjdG9yLm1hcCcse1xuICAgICAgICAgICAgdXJsIDogXCIvbWFwXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybCA6IFwidmlld3MvbWFwL21hcC5pbmRleC5odG1sXCIsXG4gICAgICAgICAgICBjb250cm9sbGVyIDogXCJNYXBJbmRleEN0cmxcIlxuICAgICAgICB9KVxuXG4gICAgICAgIC5zdGF0ZSgnZGlyZWN0b3IuZHV0eWxpc3QnLHtcbiAgICAgICAgICAgIGFic3RyYWN0IDogdHJ1ZSxcbiAgICAgICAgICAgIHVybCA6IFwiL2R1dHlsaXN0XCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZSA6IFwiPHVpLXZpZXc+XCIgXG4gICAgICAgIH0pXG5cbiAgICAgICAgLnN0YXRlKCdkaXJlY3Rvci5kdXR5bGlzdC5pbmRleCcse1xuICAgICAgICAgICAgdXJsIDogXCIvaW5kZXhcIixcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInZpZXdzL2R1dHlsaXN0L2RpcmVjdG9yLmR1dHlsaXN0LmluZGV4Lmh0bWxcIixcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBcIkR1dHlMaXN0Q3RybFwiLFxuICAgICAgICB9KVxuXG4gICAgICAgIC5zdGF0ZSgnZGlyZWN0b3IuZHV0eWxpc3QuZWRpdCcse1xuICAgICAgICAgICAgdXJsIDogXCIvZWRpdFwiLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwidmlld3MvZHV0eWxpc3QvZGlyZWN0b3IuZHV0eWxpc3QuZWRpdC5odG1sXCIsXG4gICAgICAgICAgICBjb250cm9sbGVyIDogXCJEdXR5TGlzdEVkaXRDdHJsXCIsXG4gICAgICAgIH0pXHRcbn1dKVxuXG4ucnVuKFsgJyRyb290U2NvcGUnLCAnJHN0YXRlJywgJyRzdGF0ZVBhcmFtcycsICdzdG9yZScsICdqd3RIZWxwZXInLCAnVXNlclN2YycsICdTb2NrZXRTdmMnLFxuICAgIGZ1bmN0aW9uICggJHJvb3RTY29wZSwgJHN0YXRlLCAkc3RhdGVQYXJhbXMsIHN0b3JlLCBqd3RIZWxwZXIsIFVzZXJTdmMsIFNvY2tldFN2Yykge1xuXG4gICAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN0YXJ0JyxmdW5jdGlvbihldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb21TdGF0ZSwgZnJvbVBhcmFtcyl7XG5cbiAgICAgICAgaWYgKHRvU3RhdGUubmFtZSA9PSBcImFub24ubG9naW5cIikge1xuICAgICAgICAgICAgc3RvcmUucmVtb3ZlKCdqd3QnKTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBpZiAodG9TdGF0ZS5kYXRhICYmIHRvU3RhdGUuZGF0YS5yZXF1aXJlZExvZ2luKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoIVVzZXJTdmMuaXNMb2dnZWRJbigpKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnYW5vbi5sb2dpbicpO1xuICAgICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodG9TdGF0ZS5kYXRhLnJvbGUuaW5kZXhPZihqd3RIZWxwZXIuZGVjb2RlVG9rZW4oc3RvcmUuZ2V0KCdqd3QnKSkucm9sZSkgPT0gLTEgKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbyhcImFub24ubG9naW5cIilcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfTsgXG4gICAgICAgIH1cblxuICAgIH0pO1xuXG4gICAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZUVycm9yJyxmdW5jdGlvbihldmVudCl7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG59XSkiLCIvKipcbiogSW5OZXQgTW9kdWxlXG4qXG4qIERlc2NyaXB0aW9uXG4qL1xuYW5ndWxhci5tb2R1bGUoJ0luTmV0Jylcbi5jb250cm9sbGVyKCdTYWZldHlJbmRleEN0cmwnLCBbJyRzY29wZScsICdDYXNlU3ZjJywgJ1VzZXJTdmMnLCAnU29ja2V0U3ZjJywgJyRyb290U2NvcGUnLFxuXHRmdW5jdGlvbiAoJHNjb3BlLCBDYXNlU3ZjLCBVc2VyU3ZjLCBTb2NrZXRTdmMsICRyb290U2NvcGUpIHtcblxuXHRcdFNvY2tldFN2Yy5vbignbmV3Q2FzZScsZnVuY3Rpb24oX2Nhc2Upe1xuXHRcdFx0JHNjb3BlLmNhc2VzLnB1c2goX2Nhc2UpO1xuXHRcdH0pO1xuXG5cdFx0U29ja2V0U3ZjLm9uKCdjYXNlQ2xvc2UnLGZ1bmN0aW9uKGRhdGEpe1xuXHRcdFx0aWYgKCFkYXRhLmlzT25nb2luZykge1xuXHRcdFx0XHQkc2NvcGUuY2FzZXMgPSAkc2NvcGUuY2FzZXMuZmlsdGVyKGZ1bmN0aW9uKF9jYXNlKXtcblx0XHRcdFx0XHRyZXR1cm4gX2Nhc2UuX2lkICE9IGRhdGEuY2FzZUlkXG5cdFx0XHRcdH0pXG5cdFx0XHR9O1xuXHRcdH0pO1xuXG5cdFx0dmFyIHVzZXJDb25kaXRpb24gPSB7XG5cdFx0XHRicmFuY2ggOiBVc2VyU3ZjLnVzZXJCcmFuY2goKSxcblx0XHRcdGFjY2Vzc0xldmVsIDogVXNlclN2Yy5hY2Nlc3NMZXZlbCgpLFxuXHRcdFx0Y29ycHMgOiBVc2VyU3ZjLnVzZXJDb3JwcygpXG5cdFx0fVxuXG5cdFx0Q2FzZVN2Yy5mZXRjaFJlbGF0aXZlQ2FzZSh1c2VyQ29uZGl0aW9uKS5zdWNjZXNzKGZ1bmN0aW9uKGNhc2VzKXtcblx0XHRcdCRzY29wZS5jYXNlcyA9IGNhc2VzO1xuXHRcdH0pO1xuXG5cdFx0JHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgICAgICBTb2NrZXRTdmMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG5cdCAgICB9KVxuXG5cdCAgICAkc2NvcGUuYWNjZXNzTGV2ZWwgPSBVc2VyU3ZjLmFjY2Vzc0xldmVsKCk7XG5cblx0XHRcbn1dKSIsIi8qKlxuKiBJbk5ldCBNb2R1bGVcbipcbiogRGVzY3JpcHRpb25cbiovXG5hbmd1bGFyLm1vZHVsZSgnSW5OZXQnKVxuLmNvbnRyb2xsZXIoJ1NhZmV0eU1hbmFnZUN0cmwnLCBbJyRzY29wZScsJyRzdGF0ZVBhcmFtcycsICckbW9kYWwnLCAnU3RTdmMnLCAnJHN0YXRlJywgJ01lbWJlclN2YycsJyRsb2cnLCAnVXNlclN2YycsICdCcmFuY2hTdmMnLCAnU29ja2V0U3ZjJyxcblx0ZnVuY3Rpb24gKCRzY29wZSwgJHN0YXRlUGFyYW1zLCAkbW9kYWwsIFN0U3ZjLCAkc3RhdGUsIE1lbWJlclN2YywgJGxvZywgVXNlclN2YywgQnJhbmNoU3ZjLCBTb2NrZXRTdmMpIHtcblxuXHRcdHZhciBicmFuY2ggPSBVc2VyU3ZjLnVzZXJCcmFuY2goKTtcblxuXHRcdEJyYW5jaFN2Yy5mZXRjaEJ5TmFtZShicmFuY2gpLnN1Y2Nlc3MoZnVuY3Rpb24oZGV0YWlscyl7XG5cdFx0XHQkc2NvcGUuZGV0YWlscyA9IGRldGFpbHM7XG5cdFx0fSk7XG5cblx0XHRTdFN2Yy5mZXRjaCgkc3RhdGVQYXJhbXMuaWQsYnJhbmNoKS5zdWNjZXNzKGZ1bmN0aW9uKHN0cyl7XG5cdFx0XHQkc2NvcGUuc3RyaWtlVGVhbXMgPSBzdHM7XG5cdFx0fSk7XG5cblx0XHRTb2NrZXRTdmMub24oJ25ld1N0JywgZnVuY3Rpb24oc3Qpe1xuXHRcdFx0aWYgKGFuZ3VsYXIuZXF1YWxzKGJyYW5jaCxzdC5icmFuY2gpICYmIGFuZ3VsYXIuZXF1YWxzKCRzdGF0ZVBhcmFtcy5pZCxzdC5jYXNlSWQpICkge1xuXHRcdFx0XHQkc2NvcGUuc3RyaWtlVGVhbXMucHVzaChzdCk7XG5cdFx0XHR9O1xuXHRcdH0pO1xuXG5cdFx0U29ja2V0U3ZjLm9uKCd1cGRhdGVTdCcsIGZ1bmN0aW9uKGRhdGEpe1xuXHRcdFx0dmFyIG1lbWJlcnMgPSBhbmd1bGFyLmNvcHkoZGF0YS5tZW1iZXJzKTtcblx0XHRcdGZvciAodmFyIGkgPSAkc2NvcGUuc3RyaWtlVGVhbXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdFx0aWYoYW5ndWxhci5lcXVhbHMoJHNjb3BlLnN0cmlrZVRlYW1zW2ldLl9pZCxkYXRhLmlkKSl7XG5cdFx0XHRcdFx0JHNjb3BlLnN0cmlrZVRlYW1zW2ldLnBvc2l0aW9uID0gZGF0YS5wb3NpdGlvbjtcblx0XHRcdFx0XHQkc2NvcGUuc3RyaWtlVGVhbXNbaV0uYXJlYSA9IGRhdGEuYXJlYTtcblx0XHRcdFx0XHQkc2NvcGUuc3RyaWtlVGVhbXNbaV0ubWVtYmVycy5wdXNoLmFwcGx5KCRzY29wZS5zdHJpa2VUZWFtc1tpXS5tZW1iZXJzLCBtZW1iZXJzKTtcblx0XHRcdFx0fTtcblx0XHRcdH07XG5cdFx0fSlcblxuXHRcdFNvY2tldFN2Yy5vbignZGlzbWlzcycsIGZ1bmN0aW9uKHN0KXtcblx0XHRcdHZhciBfc3RJZCA9IHN0LnN0SWQ7XG5cdFx0XHQkc2NvcGUuc3RyaWtlVGVhbXMgPSAkc2NvcGUuc3RyaWtlVGVhbXMuZmlsdGVyKGZ1bmN0aW9uKHN0KSB7XHRcdFx0XHRcblx0XHRcdFx0cmV0dXJuIHN0Ll9pZCAhPSBfc3RJZDtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHRcdFxuXHRcdCRzY29wZS5zdHJpa2VUZWFtID0gZnVuY3Rpb24oKXtcblx0XHRcdHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xuXHRcdFx0ICBcdHRlbXBsYXRlVXJsOiAndmlld3Mvc2FmZXR5L3NhZmV0eS5tb2RhbC5odG1sJyxcblx0XHRcdCAgICBjb250cm9sbGVyOiAnU2FmZXR5TW9kYWxDdHJsJyxcblx0XHRcdCAgICBzaXplOiBcIm1kXCIsXG5cdFx0XHQgICAgcmVzb2x2ZSA6IHtcblx0XHRcdCAgICBcdHN0SWQgOiBmdW5jdGlvbigpe1xuXHRcdFx0ICAgIFx0XHRpZiAoIF8uaXNFbXB0eSgkc2NvcGUuc3RyaWtlVGVhbXMpKSB7XG5cdFx0XHQgICAgXHRcdFx0cmV0dXJuIDBcblx0XHRcdCAgICBcdFx0fSBlbHNle1xuXHRcdFx0ICAgIFx0XHRcdHJldHVybiAkc2NvcGUuc3RyaWtlVGVhbXNbJHNjb3BlLnN0cmlrZVRlYW1zLmxlbmd0aC0xXS5pZDtcblx0XHRcdCAgICBcdFx0fTtcblx0XHRcdCAgICBcdH1cblx0XHRcdCAgICB9XG5cdFx0ICAgIH0pO1xuXHRcdH07XG5cblx0XHQkc2NvcGUub3BlblNldHRpbmdNb2RhbCA9IGZ1bmN0aW9uKHN0cmlrZVRlYW0sIGlkKXtcblx0ICAgICAgICB2YXIgbW9kYWxJbnN0YW5jZSA9ICRtb2RhbC5vcGVuKHtcblx0ICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9zYWZldHkvc2FmZXR5LnNldHRpbmcubW9kYWwuaHRtbCcsXG5cdCAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdTYWZldHlTZXR0aW5nQ3RybCcsXG5cdCAgICAgICAgICAgIHNpemU6IFwibGdcIixcblx0ICAgICAgICAgICAgcmVzb2x2ZToge1xuXHQgICAgICAgICAgICAgICAgc3RyaWtlVGVhbSA6IGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cmlrZVRlYW07XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgICAgICBtb2RhbEluc3RhbmNlLnJlc3VsdC50aGVuKGZ1bmN0aW9uICh1cGRhdGVkU3QpIHtcblx0ICAgICAgICBcdGZvciAodmFyIGkgPSAkc2NvcGUuc3RyaWtlVGVhbXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdFx0XHRpZihhbmd1bGFyLmVxdWFscygkc2NvcGUuc3RyaWtlVGVhbXNbaV0uX2lkLHVwZGF0ZWRTdC5pZCkpe1xuXHRcdFx0XHRcdFx0JHNjb3BlLnN0cmlrZVRlYW1zW2ldLnBvc2l0aW9uID0gdXBkYXRlZFN0LnBvc2l0aW9uO1xuXHRcdFx0XHRcdFx0JHNjb3BlLnN0cmlrZVRlYW1zW2ldLmFyZWEgPSB1cGRhdGVkU3QuYXJlYTtcblx0XHRcdFx0XHRcdCRzY29wZS5zdHJpa2VUZWFtc1tpXS5tZW1iZXJzLnB1c2guYXBwbHkoJHNjb3BlLnN0cmlrZVRlYW1zW2ldLm1lbWJlcnMsIHVwZGF0ZWRTdC5tZW1iZXJzKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9O1xuXG5cdFx0ICAgIH0sIGZ1bmN0aW9uICgpIHtcblx0XHQgICAgICAkbG9nLmluZm8oJ01vZGFsIGRpc21pc3NlZCBhdDogJyArIG5ldyBEYXRlKCkpO1xuXHRcdCAgICB9KTtcblx0ICAgIH07XG5cblx0XHQkc2NvcGUuZGlzbWlzcyA9IGZ1bmN0aW9uKHN0cmlrZVRlYW0gLCBpZCl7XG5cdFx0XHRcblx0ICAgICAgIFx0U3RTdmMuZGlzbWlzc1N0KHtcblx0ICAgICAgIFx0XHRpZCA6IHN0cmlrZVRlYW0uX2lkXG5cdCAgICAgICBcdH0pLnN1Y2Nlc3MoZnVuY3Rpb24oKXtcblx0ICAgICAgIFx0XHRmb3IgKHZhciBpID0gc3RyaWtlVGVhbS5tZW1iZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0ICAgICAgICAgICAgTWVtYmVyU3ZjLnVwZGF0ZUlzQ2hlY2tlZCh7XG5cdFx0ICAgICAgICAgICAgICAgIG1lbWJlcklkICA6IHN0cmlrZVRlYW0ubWVtYmVyc1tpXS5faWQsXG5cdFx0ICAgICAgICAgICAgICAgIG1pc3Npb25cdCAgOiBzdHJpa2VUZWFtLm1lbWJlcnNbaV0ubWlzc2lvbixcblx0XHQgICAgICAgICAgICAgICAgaXNDaGVja2VkIDogZmFsc2Vcblx0XHQgICAgICAgICAgICB9KVxuXHRcdCAgICAgICAgfTtcdFxuXHQgICAgICAgXHR9KVxuXG5cdCAgICAgICBcdCRzY29wZS5zdHJpa2VUZWFtcy5zcGxpY2UoaWQsMSk7XG5cdFx0fTtcblxuXHRcdCRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICAgICAgU29ja2V0U3ZjLnJlbW92ZUFsbExpc3RlbmVycygpO1xuXHQgICAgfSlcbn1dKTsiLCIvKipcbiogSW5OZXQgTW9kdWxlXG4qXG4qIERlc2NyaXB0aW9uXG4qL1xuYW5ndWxhci5tb2R1bGUoJ0luTmV0Jylcbi5jb250cm9sbGVyKCdTYWZldHlNb2RhbEN0cmwnLCBbJyRzY29wZScsJyRtb2RhbEluc3RhbmNlJywgJyRzdGF0ZVBhcmFtcycsJ1N0U3ZjJywgJ01lbWJlclN2YycsICckc3RhdGUnLCAnJHdpbmRvdycsICdzdElkJywgJ1VzZXJTdmMnLCAnQnJhbmNoU3ZjJywnU29ja2V0U3ZjJyxcblx0ZnVuY3Rpb24gKCRzY29wZSwgJG1vZGFsSW5zdGFuY2UsICRzdGF0ZVBhcmFtcywgU3RTdmMsIE1lbWJlclN2YywgJHN0YXRlLCAkd2luZG93LCBzdElkLCBVc2VyU3ZjLCAgQnJhbmNoU3ZjLCBTb2NrZXRTdmMpIHtcblxuXHRcdHZhciBicmFuY2ggPSBVc2VyU3ZjLnVzZXJCcmFuY2goKTsgXG5cdFx0JHNjb3BlLnRpdGxlID0gYnJhbmNoICsgIChzdElkICsgMSApO1xuXG5cdFx0QnJhbmNoU3ZjLmZldGNoQnlOYW1lKGJyYW5jaCkuc3VjY2VzcyhmdW5jdGlvbihkZXRhaWxzKXtcblx0XHRcdCRzY29wZS5kZXRhaWxzID0gZGV0YWlscztcblx0XHR9KS50aGVuKGZ1bmN0aW9uKCl7XG5cdFx0XHRpZiAoICRzY29wZS5kZXRhaWxzKSB7XG5cdFx0XHRcdCRzY29wZS5kZXRhaWxzLm1lbWJlcnMgPSAkc2NvcGUuZGV0YWlscy5tZW1iZXJzLmZpbHRlcihmdW5jdGlvbihtZW1iZXIpe1xuXHRcdFx0XHRcdHJldHVybiBtZW1iZXIuaXNDaGVja2VkICE9IHRydWU7ICBcblx0XHRcdFx0fSk7XG5cdFx0XHRcdCRzY29wZS5kZXRhaWxzLm1lbWJlcnMuZm9yRWFjaChmdW5jdGlvbihtZW1iZXIpe1xuXHRcdFx0XHRcdG1lbWJlci5saW1pdFRpbWUgPSBtb21lbnQuZHVyYXRpb24obWVtYmVyLndvcmtpbmdUaW1lLCAnc2Vjb25kcycpO1xuXHRcdFx0XHR9KVxuXHRcdFx0fTtcblx0XHR9KTtcblxuXHRcdCRzY29wZS5zdHJpa2VUZWFtID0ge1xuXHRcdFx0cG9zaXRpb24gIDogXCLnrKzkuIDpnaJcIixcblx0XHRcdHBvc2l0aW9ucyA6IFtcIuesrOS4gOmdolwiLFwi56ys5LqM6Z2iXCIsXCLnrKzkuInpnaJcIixcIuesrOWbm+mdolwiXSxcblx0XHRcdG1pc3Npb24gICA6IFwi5pC25pWR5bCP57WEXCIsXG5cdFx0XHRtaXNzaW9ucyAgOiBbXCLmkLbmlZHlsI/ntYRcIixcIuaVkeaPtOWwj+e1hFwiLFwi5pCc5pWR5bCP57WEXCJdLFxuXHRcdFx0YXJlYSBcdCAgOiBcIuesrOS4gOWNgFwiLFxuXHRcdFx0YXJlYXMgXHQgIDogW1wi56ys5LiA5Y2AXCIsXCLnrKzkuozljYBcIixcIuesrOS4ieWNgFwiLFwi56ys5Zub5Y2AXCIsXCLnrKzkupTljYBcIl1cblx0XHR9O1xuXG5cdFx0JHNjb3BlLmNoZWNrID0gZnVuY3Rpb24obWVtYmVyKXtcblx0XHRcdG1lbWJlci5pc0NoZWNrZWQgPSAhbWVtYmVyLmlzQ2hlY2tlZDtcblx0XHR9O1xuXG5cdFx0JHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCl7XG5cdFx0XHQkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcblx0XHR9O1xuXG5cdCAgICAkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uKCl7XG5cdCAgICBcdHZhciBtZW1iZXJzID0gJHNjb3BlLmRldGFpbHMubWVtYmVycy5maWx0ZXIoZnVuY3Rpb24obWVtYmVyKSB7XG5cdFx0ICAgIFx0XHRcdFx0cmV0dXJuIG1lbWJlci5pc0NoZWNrZWQgPT09IHRydWUgXG5cdCAgICBcdFx0XHRcdH0pO1xuXG5cdCAgICBcdGlmIChtZW1iZXJzLmxlbmd0aCA+IC0xKSB7XG5cblx0XHQgICAgXHR2YXIgc3RyaWtlVGVhbSA9IHtcblx0XHQgICAgICBcdFx0aWQgXHRcdCAgICA6IHN0SWQgKyAxIHx8IDAgLCBcblx0XHQgICAgICBcdFx0Y2FzZUlkICAgICAgOiAkc3RhdGVQYXJhbXMuaWQsXG5cdFx0ICAgICAgXHRcdGJyYW5jaCAgICAgIDogJHNjb3BlLmRldGFpbHMubmFtZSxcblx0XHQgICAgICBcdFx0ZGlyZWN0b3IgICAgOiAkc2NvcGUuZGV0YWlscy5kaXJlY3Rvcixcblx0XHQgICAgICBcdFx0cG9zaXRpb24gICAgOiAkc2NvcGUuc3RyaWtlVGVhbS5wb3NpdGlvbixcblx0XHQgICAgICBcdFx0cG9zaXRpb25zICAgOiAkc2NvcGUuc3RyaWtlVGVhbS5wb3NpdGlvbnMsXG5cdFx0ICAgICAgXHRcdG1pc3Npb24gICAgIDogJHNjb3BlLnN0cmlrZVRlYW0ubWlzc2lvbixcblx0XHQgICAgICBcdFx0bWlzc2lvbnMgICAgOiAkc2NvcGUuc3RyaWtlVGVhbS5taXNzaW9ucywgXG5cdFx0ICAgICAgXHRcdGFyZWEgXHRcdDogJHNjb3BlLnN0cmlrZVRlYW0uYXJlYSxcblx0XHQgICAgICBcdFx0YXJlYXMgXHRcdDogJHNjb3BlLnN0cmlrZVRlYW0uYXJlYXMsIFxuXHRcdCAgICAgIFx0XHRtZW1iZXJzICAgICA6IG1lbWJlcnMsXG5cdFx0ICAgICAgXHRcdGlzRGlzbWlzc2VkIDogZmFsc2UsXG5cdFx0ICAgICAgXHRcdHdvcmtpbmdUaW1lIDogXy5taW4obWVtYmVycywgZnVuY3Rpb24obWVtYmVyKXsgcmV0dXJuIG1lbWJlci53b3JraW5nVGltZTsgfSkud29ya2luZ1RpbWUsXG5cdFx0ICAgICAgXHRcdGNyZWF0b3IgXHQ6IFVzZXJTdmMuY3VycmVudFVzZXIoKSBcdFxuXHRcdCAgICAgIFx0fTtcblxuXHQgICAgICBcdFx0Zm9yICh2YXIgaSA9IG1lbWJlcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0ICAgIFx0XHRcdE1lbWJlclN2Yy51cGRhdGVJc0NoZWNrZWQoe1xuXHQgICAgXHRcdFx0XHRtZW1iZXJJZCAgOiBtZW1iZXJzW2ldLl9pZCxcblx0ICAgIFx0XHRcdFx0aXNDaGVja2VkIDogbWVtYmVyc1tpXS5pc0NoZWNrZWQsXG5cdCAgICBcdFx0XHRcdG1pc3Npb25cdCAgOiBtZW1iZXJzW2ldLm1pc3Npb25cblx0ICAgIFx0XHRcdH0pXHRcdFxuXHRcdCAgICBcdH07XG5cblx0XHQgICAgICBcdC8vIFN0U3ZjLmNyZWF0ZShzdHJpa2VUZWFtKVxuXHRcdCAgICAgIFx0U29ja2V0U3ZjLmVtaXQoXCJjcmVhdGVTdHJpa2VUZWFtXCIsIHN0cmlrZVRlYW0pXG5cdFx0ICAgICAgXHQkbW9kYWxJbnN0YW5jZS5jbG9zZSgpO1xuXHQgICAgXHR9ZWxzZXtcblx0ICAgIFx0XHQkd2luZG93LmFsZXJ0KFwieW91IG11c3Qgb3JnYW5pemUgc3RyaWtlIHRlYW1cIilcblx0ICAgIFx0fTtcblx0XHR9O1xuXHRcbn1dKTsiLCIvKipcbiogSW5OZXQgTW9kdWxlXG4qXG4qIERlc2NyaXB0aW9uXG4qL1xuYW5ndWxhci5tb2R1bGUoJ0luTmV0Jylcbi5jb250cm9sbGVyKCdTYWZldHlTZXR0aW5nQ3RybCcsIFsnJHNjb3BlJywgJ3N0cmlrZVRlYW0nLCAnJG1vZGFsSW5zdGFuY2UnLCAnU3RTdmMnLCAnJHN0YXRlJywgJ01lbWJlclN2YycsICdDYXNlU3ZjJywgJyRzdGF0ZVBhcmFtcycsICdTb2NrZXRTdmMnLFxuXHRmdW5jdGlvbiAoJHNjb3BlLCBzdHJpa2VUZWFtLCAkbW9kYWxJbnN0YW5jZSwgU3RTdmMsICRzdGF0ZSwgTWVtYmVyU3ZjLCBDYXNlU3ZjLCAkc3RhdGVQYXJhbXMsIFNvY2tldFN2Yykge1xuXHRcdFxuXHRcdHZhciBtZW1iZXJzID0gW107XG5cdFx0dmFyIG1lbWJlck9ianMgPVtdO1xuXHRcdCRzY29wZS5zdHJpa2VUZWFtID0gc3RyaWtlVGVhbTtcblxuXHRcdENhc2VTdmMuZmV0Y2hEZXRhaWxzKCRzdGF0ZVBhcmFtcy5pZCkuc3VjY2VzcyhmdW5jdGlvbihkZXRhaWxzKXtcblx0XHRcdCRzY29wZS5kaXNwYXRjaCA9IGRldGFpbHMuYnJhbmNoSWRzO1xuXHRcdH0pO1xuXG5cdFx0JHNjb3BlLmNob29zZUJyYW5jaCA9IGZ1bmN0aW9uKGlkKXtcblx0XHRcdCRzY29wZS5tZW1iZXJzID0gJHNjb3BlLmRpc3BhdGNoW2lkXS5tZW1iZXJzXG5cdFx0XHRmb3IgKHZhciBpID0gJHNjb3BlLm1lbWJlcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdFx0aWYoICRzY29wZS5tZW1iZXJzW2ldLmlzQ2hlY2tlZCApe1xuXHRcdFx0XHRcdCRzY29wZS5tZW1iZXJzLnNwbGljZShpLDEpO1xuXHRcdFx0XHR9O1xuXHRcdFx0fTtcblx0XHR9O1xuXG5cdFx0JHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCl7XG5cdFx0XHQkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcblx0XHR9O1xuXG5cdFx0JHNjb3BlLmNoZWNrID0gZnVuY3Rpb24obWVtYmVyKXtcblx0XHRcdG1lbWJlci5pc0NoZWNrZWQgPSAhbWVtYmVyLmlzQ2hlY2tlZDtcblx0XHRcdG1lbWJlcnMucHVzaChtZW1iZXIuX2lkKTtcblx0XHRcdG1lbWJlck9ianMucHVzaChtZW1iZXIpO1xuXHRcdH07XG5cblx0XHQkc2NvcGUudW5jaGVjayA9IGZ1bmN0aW9uKG1lbWJlciwgaWQpe1xuXHRcdFx0bWVtYmVyLmlzQ2hlY2tlZCA9ICFtZW1iZXIuaXNDaGVja2VkO1xuXHRcdFx0bWVtYmVycy5zcGxpY2UoaWQsMSk7XG5cdFx0XHRtZW1iZXJPYmpzLnNwbGljZShpZCwxKTtcblx0XHR9XG5cblx0XHQkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uKCl7XG5cblx0XHRcdFN0U3ZjLnVwZGF0ZVN0KHtcblx0XHRcdFx0aWQgOiBzdHJpa2VUZWFtLl9pZCxcblx0XHRcdFx0cG9zaXRpb24gOiBzdHJpa2VUZWFtLnBvc2l0aW9uLFxuXHRcdFx0XHRhcmVhIDogc3RyaWtlVGVhbS5hcmVhLFxuXHRcdFx0XHRtaXNzaW9uIDogc3RyaWtlVGVhbS5taXNzaW9uLFxuXHRcdFx0XHRtZW1iZXJJZHMgOiBtZW1iZXJzXG5cdFx0XHR9KS5zdWNjZXNzKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdGZvciAodmFyIGkgPSBtZW1iZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0ICAgICAgICAgICAgTWVtYmVyU3ZjLnVwZGF0ZUlzQ2hlY2tlZCh7XG5cdFx0ICAgICAgICAgICAgICAgIG1lbWJlcklkICA6IG1lbWJlcnNbaV0uX2lkLFxuXHRcdCAgICAgICAgICAgICAgICBtaXNzaW9uXHQgIDogbWVtYmVyc1tpXS5taXNzaW9uLCBcblx0XHQgICAgICAgICAgICAgICAgaXNDaGVja2VkIDogdHJ1ZSxcblx0XHQgICAgICAgICAgICB9KVxuXHRcdCAgICAgICAgfTtcblx0XHRcdH0pXG5cblx0XHRcdCRtb2RhbEluc3RhbmNlLmNsb3NlKHtcblx0XHRcdFx0aWQgOiBzdHJpa2VUZWFtLl9pZCxcblx0XHRcdFx0cG9zaXRpb24gOiBzdHJpa2VUZWFtLnBvc2l0aW9uLFxuXHRcdFx0XHRhcmVhIDogc3RyaWtlVGVhbS5hcmVhLFxuXHRcdFx0XHRtZW1iZXJzIDogbWVtYmVyT2Jqcyxcblx0XHRcdFx0Y2FzZUlkICA6IHN0cmlrZVRlYW0uY2FzZUlkIFxuXHRcdFx0fSk7XG5cblx0XHRcdFxuXHRcdH07XG59XSkiLCIvKipcbiogSW5OZXQgTW9kdWxlXG4qXG4qIERlc2NyaXB0aW9uXG4qL1xuYW5ndWxhci5tb2R1bGUoJ0luTmV0Jylcbi5zZXJ2aWNlKCdTb2NrZXRTdmMnLFsgJyRyb290U2NvcGUnLCAnc3RvcmUnLCAnJHEnLCAnJHRpbWVvdXQnLFxuICBmdW5jdGlvbiAoJHJvb3RTY29wZSwgc3RvcmUsICRxLCAkdGltZW91dCkge1xuXG4gIHRoaXMuaW5pdCA9ICBmdW5jdGlvbih0b2tlbil7XG4gICAgdmFyIGF1dGhUb2tlbiA9IG51bGxcbiAgICBpZiAodG9rZW4pIHtcbiAgICAgIGF1dGhUb2tlbiA9IHRva2VuIFxuICAgIH0gZWxzZSB7XG4gICAgICBhdXRoVG9rZW4gPSBzdG9yZS5nZXQoJ2p3dCcpXG4gICAgfTtcbiAgICByZXR1cm4gaW8uY29ubmVjdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwJyx7IHF1ZXJ5IDogJ3Rva2VuPScgKyBhdXRoVG9rZW4gLCAnZm9yY2VOZXcnOnRydWUgfSk7XG4gIH1cblxuICB2YXIgc29ja2V0ID0gdGhpcy5pbml0KCk7XG5cbiAgdGhpcy5vbiA9ICBmdW5jdGlvbiAoZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgIHRoaXMuaW5pdCgpLm9uKGV2ZW50TmFtZSwgZnVuY3Rpb24gKCkgeyAgXG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICRyb290U2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2FsbGJhY2suYXBwbHkoc29ja2V0LCBhcmdzKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgdGhpcy5lbWl0ID0gIGZ1bmN0aW9uIChldmVudE5hbWUsIGRhdGEsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5pbml0KCkuZW1pdChldmVudE5hbWUsIGRhdGEsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgJHJvb3RTY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICBjYWxsYmFjay5hcHBseShzb2NrZXQsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KVxuICB9XG5cbiAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgIHRoaXMuaW5pdCgpLnJlbW92ZUFsbExpc3RlbmVycyhldmVudE5hbWUsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgJHJvb3RTY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHNvY2tldCwgYXJncyk7XG4gICAgICAgIH0pO1xuICAgIH0pOyBcbiAgfVxuICBcbn1dKSIsIi8qKlxuKiBJbk5ldyBNb2R1bGVcbipcbiogRGVzY3JpcHRpb25cbiovXG5hbmd1bGFyLm1vZHVsZSgnSW5OZXQnKVxuLnNlcnZpY2UoJ1N0U3ZjJywgWyAnJGh0dHAnLCBmdW5jdGlvbiAoJGh0dHApIHtcblx0dGhpcy5mZXRjaCA9IGZ1bmN0aW9uKGNhc2VJZCwgYnJhbmNoKXtcblx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3N0cmlrZVRlYW1zP2Nhc2VJZD0nICsgY2FzZUlkICsgJyZicmFuY2g9JyArIGJyYW5jaCk7XG5cdH07XG5cblx0dGhpcy5mZXRjaEJ5Q2FzZSA9IGZ1bmN0aW9uKGNhc2VJZCl7XG5cdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9zdHJpa2VUZWFtcy90b3RhbD9jYXNlSWQ9JyArIGNhc2VJZCk7XG5cdH07XG5cblx0dGhpcy5kaXNtaXNzU3QgPSBmdW5jdGlvbihkYXRhKXtcblx0XHRyZXR1cm4gJGh0dHAucHV0KCcvYXBpL3N0cmlrZVRlYW1zL2Rpc21pc3M/aWQ9JyArIGRhdGEuaWQpO1xuXHR9O1xuXG5cdHRoaXMudXBkYXRlU3QgPSBmdW5jdGlvbihkYXRhKXtcblx0XHRyZXR1cm4gJGh0dHAucHV0KCcvYXBpL3N0cmlrZVRlYW1zL3VwZGF0ZT9pZD0nICsgZGF0YS5pZCwgZGF0YSk7XG5cdH07XG5cblx0dGhpcy51cGRhdGVUaW1lUmVjb3JkID0gZnVuY3Rpb24oZGF0YSl7XG5cdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9zdHJpa2VUZWFtcy90aW1lP2lkPScgKyBkYXRhLmlkLCBkYXRhKTtcblx0fTtcblxuXHR0aGlzLmNyZWF0ZSA9IGZ1bmN0aW9uKHN0cmlrZVRlYW0pe1xuXHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3N0cmlrZVRlYW1zJywgc3RyaWtlVGVhbSk7XG5cdH07XG5cblx0dGhpcy5jb3VudCA9IGZ1bmN0aW9uKGNhc2VJZCl7XG5cdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9zdHJpa2VUZWFtcy9jb3VudD9jYXNlSWQ9JyArIGNhc2VJZCk7XG5cdH07XG5cdFxufV0pIiwiLyoqXG4qIEluTmV0IE1vZHVsZVxuKlxuKiBEZXNjcmlwdGlvblxuKi9cbmFuZ3VsYXIubW9kdWxlKCdJbk5ldCcpXG4uY29udHJvbGxlcignU3VtbWFyeUN0cmwnLCBbJyRzY29wZScsICdTdFN2YycsICckc3RhdGVQYXJhbXMnLCAnJGludGVydmFsJywgJyRzdGF0ZScsICdTb2NrZXRTdmMnLFxuXHRmdW5jdGlvbiAoJHNjb3BlLCBTdFN2YywgJHN0YXRlUGFyYW1zLCAkaW50ZXJ2YWwsICRzdGF0ZSwgU29ja2V0U3ZjKSB7XG5cblx0XHRTb2NrZXRTdmMub24oJ3RpbWVyUnVubmluZycsZnVuY3Rpb24oc3Qpe1xuXHRcdFx0Zm9yICh2YXIgaSA9ICRzY29wZS5zdHJpa2VUZWFtcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0XHRpZiggYW5ndWxhci5lcXVhbHMoJHNjb3BlLnN0cmlrZVRlYW1zW2ldLl9pZCwgc3Quc3RJZCkpe1xuXHRcdFx0XHRcdCRzY29wZS5zdHJpa2VUZWFtc1tpXS50aW1lclJ1bm5pbmcgPSBzdC50aW1lclJ1bm5pbmc7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fSlcblxuXHRcdFNvY2tldFN2Yy5vbigncHJvZ3Jlc3NVcGRhdGUnLGZ1bmN0aW9uKGRhdGEpe1xuXHRcdFx0Zm9yICh2YXIgaSA9ICRzY29wZS5zdHJpa2VUZWFtcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0XHRpZiggYW5ndWxhci5lcXVhbHMoJHNjb3BlLnN0cmlrZVRlYW1zW2ldLl9pZCwgZGF0YS5pZCkgKXtcblx0XHRcdFx0XHQkc2NvcGUuc3RyaWtlVGVhbXNbaV0udGltZXJcdD0gbW9tZW50LmR1cmF0aW9uKGRhdGEubWlsbGlzKTsgXG5cdFx0XHRcdFx0JHNjb3BlLnN0cmlrZVRlYW1zW2ldLnByb2dyZXNzICA9IGRhdGEucHJvZ3Jlc3M7XG5cdFx0XHRcdFx0JHNjb3BlLnN0cmlrZVRlYW1zW2ldLnByb2dyZXNzU3RhdGUgPSAgZGF0YS5wcm9ncmVzc1N0YXRlO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH0pXG5cblx0XHRTb2NrZXRTdmMub24oJ25ld1N0JywgZnVuY3Rpb24oc3Qpe1xuXHRcdFx0aWYgKCBhbmd1bGFyLmVxdWFscyhjYXNlSWQsc3QuY2FzZUlkKSkge1xuXHRcdFx0XHR2YXIgbmV3U3QgPSBhbmd1bGFyLmNvcHkoc3QpO1xuXHRcdFx0XHQkc2NvcGUuc3RyaWtlVGVhbXMucHVzaChuZXdTdCk7XG5cdFx0XHR9O1xuXHRcdFx0JHNjb3BlLmRlcGxveXMgPSBpbml0VGFibGUoJHNjb3BlLnN0cmlrZVRlYW1zKTtcblx0XHR9KTtcblxuXHRcdFNvY2tldFN2Yy5vbigndXBkYXRlU3QnLCBmdW5jdGlvbihkYXRhKXtcblx0XHRcdFN0U3ZjLmZldGNoQnlDYXNlKGNhc2VJZCkuc3VjY2VzcyhmdW5jdGlvbihzdHJpa2VUZWFtcyl7XG5cdFx0XHRcdCRzY29wZS5zdHJpa2VUZWFtcyA9IHN0cmlrZVRlYW1zO1xuXHRcdFx0XHQkc2NvcGUuc3RyaWtlVGVhbXMuZm9yRWFjaChmdW5jdGlvbihzdCl7XG5cdFx0XHRcdFx0c3QubGltaXRUaW1lID0gbW9tZW50LmR1cmF0aW9uKHN0LndvcmtpbmdUaW1lLCdzZWNvbmRzJyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHQkc2NvcGUuZGVwbG95cyA9IGluaXRUYWJsZSgkc2NvcGUuc3RyaWtlVGVhbXMpO1xuXHRcdFx0fSk7XG5cblx0XHR9KVxuXG5cdFx0U29ja2V0U3ZjLm9uKCdkaXNtaXNzJywgZnVuY3Rpb24oZGF0YSl7XG5cdFx0XHRTdFN2Yy5mZXRjaEJ5Q2FzZShjYXNlSWQpLnN1Y2Nlc3MoZnVuY3Rpb24oc3RyaWtlVGVhbXMpe1xuXHRcdFx0XHQkc2NvcGUuc3RyaWtlVGVhbXMgPSBzdHJpa2VUZWFtcztcblx0XHRcdFx0JHNjb3BlLmRlcGxveXMgPSBpbml0VGFibGUoJHNjb3BlLnN0cmlrZVRlYW1zKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cblx0XHR2YXIgY2FzZUlkID0gJHN0YXRlUGFyYW1zLmlkOyBcblxuXHRcdFN0U3ZjLmZldGNoQnlDYXNlKGNhc2VJZCkuc3VjY2VzcyhmdW5jdGlvbihzdHJpa2VUZWFtcyl7XG5cdFx0XHQkc2NvcGUuc3RyaWtlVGVhbXMgPSBzdHJpa2VUZWFtcztcblx0XHRcdCRzY29wZS5zdHJpa2VUZWFtcy5mb3JFYWNoKGZ1bmN0aW9uKHN0KXtcblx0XHRcdFx0c3QubGltaXRUaW1lID0gbW9tZW50LmR1cmF0aW9uKHN0LndvcmtpbmdUaW1lLCdzZWNvbmRzJyk7XG5cdFx0XHR9KTtcblx0XHRcdCRzY29wZS5kZXBsb3lzID0gaW5pdFRhYmxlKCRzY29wZS5zdHJpa2VUZWFtcyk7XG5cdFx0fSk7XG5cblx0XHQkc2NvcGUucG9zaXRpb24gPSB7XG5cdFx0XHRkZWZhdWx0UG9zIDogXCLnrKzkuIDpnaJcIixcblx0XHRcdHBvc2l0aW9ucyA6IFtcIuesrOS4gOmdolwiLFwi56ys5LqM6Z2iXCIsXCLnrKzkuInpnaJcIixcIuesrOWbm+mdolwiXVxuXHRcdH07XG5cblx0XHR2YXIgaW5pdFRhYmxlID0gIGZ1bmN0aW9uKHN0cmlrZVRlYW1zKXtcblx0XHQgIFx0dmFyIGRlcGxveUFycmF5ID0gXy5yYW5nZSg0KS5tYXAoZnVuY3Rpb24gKCkge1xuXHRcdCAgICAgICAgcmV0dXJuIF8ucmFuZ2UoNSkubWFwKGZ1bmN0aW9uICgpIHtcblx0XHQgICAgICAgICAgICByZXR1cm4geyB0b3RhbE1lbWJlciA6IDAsIHN0VG90YWwgOiAwfSA7XG5cdFx0ICAgICAgICB9KTtcblx0XHQgICAgfSk7XG5cblx0XHRcdGlmICggc3RyaWtlVGVhbXMgKXtcblx0XHRcdFx0Zm9yICh2YXIgaSA9IHN0cmlrZVRlYW1zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHRcdFx0dmFyIHRvdGFsTWVtYmVyID0gMDtcblx0XHRcdFx0XHR2YXIgc3QgPSAwOyAgXG5cdFx0XHRcdFx0dmFyIHggPSBfLmluZGV4T2Yoc3RyaWtlVGVhbXNbaV0ucG9zaXRpb25zLCBzdHJpa2VUZWFtc1tpXS5wb3NpdGlvbik7XG5cdFx0XHRcdFx0dmFyIHkgPSBfLmluZGV4T2Yoc3RyaWtlVGVhbXNbaV0uYXJlYXMsIHN0cmlrZVRlYW1zW2ldLmFyZWEpO1xuXHRcdFx0XHRcdGRlcGxveUFycmF5W3hdW3ldLnN0VG90YWwgKz0gMTtcblx0XHRcdFx0XHRkZXBsb3lBcnJheVt4XVt5XS50b3RhbE1lbWJlciArPSBzdHJpa2VUZWFtc1tpXS5tZW1iZXJzLmxlbmd0aDsgIFxuXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZGVwbG95QXJyYXlcblx0XHR9O1xuXHRcdFxuXHRcdCRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICAgICAgU29ja2V0U3ZjLnJlbW92ZUFsbExpc3RlbmVycygpO1xuXHQgICAgfSk7XG59XSk7IiwiLyoqXG4qIEluTmV0IE1vZHVsZVxuKlxuKiBEZXNjcmlwdGlvblxuKi9cbmFuZ3VsYXIubW9kdWxlKCdJbk5ldCcpXG4uY29udHJvbGxlcignVGltZXJDdHJsJywgWyckc2NvcGUnLCAnU29ja2V0U3ZjJyxcbiAgICBmdW5jdGlvbigkc2NvcGUsIFNvY2tldFN2Yyl7XG5cblx0JHNjb3BlLnRpbWVyUnVubmluZyA9IHRydWU7XG5cbiAgICAkc2NvcGUuc3RhcnRUaW1lciA9IGZ1bmN0aW9uKHN0LCBpZCl7XG4gICAgXHQkc2NvcGUuJGJyb2FkY2FzdCgndGltZXItc3RhcnQnKTtcbiAgICBcdCRzY29wZS50aW1lclJ1bm5pbmcgPSB0cnVlO1xuICAgICAgICBTb2NrZXRTdmMuZW1pdCgndGltZXInLCB7IHN0SWQgOiBzdC5faWQsIHRpbWVyUnVubmluZyA6IHRydWUgfSApXG4gICAgfTtcblxuICAgICRzY29wZS5zdG9wVGltZXIgPSBmdW5jdGlvbihzdCxpZCl7XG4gICAgXHQkc2NvcGUuJGJyb2FkY2FzdCgndGltZXItc3RvcCcpO1xuICAgIFx0JHNjb3BlLnRpbWVyUnVubmluZyA9IGZhbHNlO1xuICAgICAgICBTb2NrZXRTdmMuZW1pdCgndGltZXInLCB7IHN0SWQgOiBzdC5faWQsIHRpbWVyUnVubmluZyA6IGZhbHNlIH0gKVxuICAgIH07XG5cbiAgICAkc2NvcGUucmVzdW1lVGltZXIgPSBmdW5jdGlvbigpe1xuICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgndGltZXItcmVzdW1lJyk7XG4gICAgICAgICRzY29wZS50aW1lclJ1bm5pbmcgPSBmYWxzZTtcbiAgICB9O1xuXHRcbn1dKTsiLCIvKipcbiogIE1vZHVsZVxuKlxuKiBEZXNjcmlwdGlvblxuKi9cbmFuZ3VsYXIubW9kdWxlKCdJbk5ldCcpXG4uY29udHJvbGxlcignVG9wTmF2Q3RybCcsIFsnJHNjb3BlJywgJyRsb2NhdGlvbicsJyRzdGF0ZScsICckaW50ZXJ2YWwnLCAnc3RvcmUnLCAnU29ja2V0U3ZjJywgJ1VzZXJTdmMnLCckd2luZG93Jyxcblx0ZnVuY3Rpb24gKCRzY29wZSwgJGxvY2F0aW9uLCRzdGF0ZSwgJGludGVydmFsLCBzdG9yZSwgU29ja2V0U3ZjLCBVc2VyU3ZjLCAkd2luZG93KSB7XG5cblx0JHNjb3BlLmN1cnJlbnRUaW1lID0gIG1vbWVudCgpLmZvcm1hdCgnTU1NIERvLCBoOm1tOnNzIGEnKTtcblx0JGludGVydmFsKGZ1bmN0aW9uKCl7XG5cdFx0bW9tZW50LmxvY2FsZSgnemgtdHcnKTtcblx0XHQkc2NvcGUuY3VycmVudFRpbWUgPSAgbW9tZW50KCkuZm9ybWF0KCdNTU0gRG8sIGg6bW06c3MgYScpO1xuXHR9LCAxMDAwKTtcblxuXHQkc2NvcGUubG9nb3V0ID0gZnVuY3Rpb24oKXtcblx0XHR2YXIgYWNjb3VudCA9IFVzZXJTdmMuY3VycmVudEFjY291bnQoKTtcblx0XHRTb2NrZXRTdmMuZW1pdCgnbG9nb3V0Jyk7XG5cdFx0JHN0YXRlLmdvKCdhbm9uLmxvZ2luJyk7XG5cdH07XG5cdFxufV0pIiwiLyoqXG4qIEluTmV0IE1vZHVsZVxuKlxuKiBEZXNjcmlwdGlvblxuKi9cbmFuZ3VsYXIubW9kdWxlKCdJbk5ldCcpXG4uc2VydmljZSgnVXNlclN2YycsIFsgJyRodHRwJywgJ3N0b3JlJywgJ2p3dEhlbHBlcicsIGZ1bmN0aW9uICgkaHR0cCwgc3RvcmUsIGp3dEhlbHBlcikge1xuXG5cdHRoaXMuZmV0Y2hPbmxpbmVVc2VyID0gZnVuY3Rpb24oKXtcblx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXJzL3VzZXJTdGF0ZScpO1xuXHR9O1xuXG5cdHRoaXMucmVnaXN0ZXIgPSBmdW5jdGlvbigpe1xuXHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3VzZXJzJyk7XG5cdH07XG5cblx0dGhpcy5sb2dpbiA9IGZ1bmN0aW9uKHVzZXIpe1xuXHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3VzZXJzL2F1dGhlbnRpY2F0ZScsIHVzZXIpO1xuXHR9O1xuXG5cdHRoaXMuaXNMb2dnZWRJbiA9IGZ1bmN0aW9uKCl7XG5cdFx0cmV0dXJuIHN0b3JlLmdldCgnand0Jyk7XG5cdH07XG5cblx0dGhpcy5pc1ZhbGlkID0gZnVuY3Rpb24oIGJyYW5jaCApe1xuXHRcdGlmICh0aGlzLmlzTG9nZ2VkSW4pIHtcblx0XHRcdGlmIChqd3RIZWxwZXIuZGVjb2RlVG9rZW4oc3RvcmUuZ2V0KCdqd3QnKSkuYWNjZXNzTGV2ZWwgPiAxICAgfHwgand0SGVscGVyLmRlY29kZVRva2VuKHN0b3JlLmdldCgnand0JykpLmJyYW5jaCA9PSBicmFuY2gpIHtcblx0XHRcdFx0cmV0dXJuIHRydWU7IFxuXHRcdFx0fWVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9O1xuXHRcdH07XG5cblx0XHRyZXR1cm4gZmFsc2UgXG5cdH07XG5cblx0dGhpcy51c2VyQnJhbmNoID0gZnVuY3Rpb24oKXtcblx0XHRpZiAodGhpcy5pc0xvZ2dlZEluKSB7XG5cdFx0XHRyZXR1cm4gand0SGVscGVyLmRlY29kZVRva2VuKHN0b3JlLmdldCgnand0JykpLmJyYW5jaDtcblx0XHR9O1xuXHR9O1xuXG5cdHRoaXMudXNlckNvcnBzID0gZnVuY3Rpb24oKXtcblx0XHRpZiAodGhpcy5pc0xvZ2dlZEluKSB7XG5cdFx0XHRyZXR1cm4gand0SGVscGVyLmRlY29kZVRva2VuKHN0b3JlLmdldCgnand0JykpLmNvcnBzO1xuXHRcdH07XG5cdH07XG5cblx0dGhpcy5jdXJyZW50VXNlciA9IGZ1bmN0aW9uKCl7XG5cdFx0aWYgKHRoaXMuaXNMb2dnZWRJbikge1xuXHRcdFx0cmV0dXJuIGp3dEhlbHBlci5kZWNvZGVUb2tlbihzdG9yZS5nZXQoJ2p3dCcpKS51c2VybmFtZTtcblx0XHR9O1xuXHR9O1xuXG5cdHRoaXMuY3VycmVudEFjY291bnQgPSBmdW5jdGlvbigpe1xuXHRcdGlmICh0aGlzLmlzTG9nZ2VkSW4pIHtcblx0XHRcdHJldHVybiBqd3RIZWxwZXIuZGVjb2RlVG9rZW4oc3RvcmUuZ2V0KCdqd3QnKSkuYWNjb3VudDtcblx0XHR9OyBcblx0fTtcblxuXHR0aGlzLmFjY2Vzc0xldmVsID0gZnVuY3Rpb24oKXtcblx0XHRpZiAodGhpcy5pc0xvZ2dlZEluKSB7XG5cdFx0XHRyZXR1cm4gand0SGVscGVyLmRlY29kZVRva2VuKHN0b3JlLmdldCgnand0JykpLmFjY2Vzc0xldmVsO1xuXHRcdH07XG5cdH07XG5cblx0dGhpcy5jYXNlSWQgPSBmdW5jdGlvbigpe1xuXHRcdGlmICh0aGlzLmlzTG9nZ2VkSW4pIHtcblx0XHRcdHJldHVybiBqd3RIZWxwZXIuZGVjb2RlVG9rZW4oc3RvcmUuZ2V0KCdqd3QnKSkuY2FzZUlkO1xuXHRcdH07XG5cdH07XG5cbn1dKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=