angular.module("InNet",["ui.router","ui.bootstrap","timer","angular-storage","angular-jwt","leaflet-directive","angular.filter"]),angular.module("InNet").service("BranchSvc",["$http",function(e){this.fetch=function(){return e.get("/api/branch")},this.fetchByName=function(t){return e.get("/api/branch/name?branch="+t)},this.totalListFindByName=function(t){return e.get("/api/branch/name/total?branch="+t)},this.getDetails=function(t){return e.get("/api/branch/"+t)},this.update=function(t){return e.put("/api/branch/"+t.branch,t)},this.updateDirector=function(t){return e.put("/api/branch?branch="+t.branch,t)}}]),angular.module("InNet").service("CarSvc",["$http",function(e){this.fetch=function(){return e.get("/api/cars")},this.findByBranch=function(t){return e.get("/api/cars/"+t)},this.update=function(t){return e.put("/api/cars/"+t.id,t)}}]),angular.module("InNet").controller("CaseCtrl",["$scope","$stateParams","$modal","CaseSvc","$log","SocketSvc",function(e,t,n,s,r,i){e.maxSize=5,e.bigTotalItems=175,e.bigCurrentPage=1,s.fetch().success(function(t){e.cases=t}),i.on("newCase",function(t){e.cases.unshift(t)}),i.on("caseModified",function(t){e.cases[t.case_id-1]=t}),e.choose=function(t){s.findById(e.cases[t]._id).success(function(t){e.caseDetails=t})},e.addNewCase=function(){var t=n.open({templateUrl:"views/case/case.modal.html",controller:"CaseModalCtrl",size:"lg",resolve:{caseId:function(){return _.isEmpty(e.cases)?0:e.cases[0].case_id},caseDetails:function(){return{}}}});t.result.then(function(e){console.log(e)},function(){r.info("Modal dismissed at: "+new Date)})},e.editCase=function(t){n.open({templateUrl:"views/case/case.modal.html",controller:"CaseModalCtrl",size:"lg",resolve:{caseId:function(){return t},caseDetails:function(){return e.caseDetails}}})}}]),angular.module("InNet").controller("CaseModalCtrl",["$scope","CarSvc","$modalInstance","CaseSvc","$state","caseId","caseDetails","StSvc","$window","BranchSvc","UserSvc",function(e,t,n,s,r,i,a,c,o,u,l){function m(e){var t=[],n=[],s=[];if(e.cars){for(var r=e.cars.length-1;r>=0;r--)t.push(e.cars[r].radioCode),n.push(e.cars[r]._id),s.push(e.cars[r].branch);return{dispatchList:t,carIds:n,branches:s}}return{}}function d(t){for(var n=_.unique(t),s=[],r=0;r<e.branches.length;r++)n.indexOf(e.branches[r].name)>-1&&s.push(e.branches[r]._id);return s}if(_.isEmpty(a))e.isNew=!0,f=[];else{e.isNew=!1;var f=a.cars}u.fetch().success(function(t){e.branches=t}),e.caseObj={address:a.address||null,phone:a.phone||null,type:a.type||"火警",types:["火警","救護","災害","檢舉","其他"],carIds:m(a).carIds||[],dispatchList:m(a).dispatchList||[],branches:m(a).branches||[]},e.dispatchList=e.caseObj.dispatchList.join(" "),e.getCars=function(n){t.findByBranch(n.name).success(function(t){for(var n=t.length-1;n>=0;n--)e.caseObj.carIds.indexOf(t[n]._id)>-1&&(t[n].isChecked=!0);e.cars=t})},e.cancel=function(){n.dismiss("cancel")},e.cancelDispatch=function(t){t.isChecked=!1,f.splice(f.indexOf(t),1),e.caseObj.carIds.splice(e.caseObj.dispatchList.indexOf(t._id),1),e.caseObj.dispatchList.splice(e.caseObj.dispatchList.indexOf(t.radioCode),1),e.caseObj.branches.splice(e.caseObj.dispatchList.indexOf(t.branch),1),e.dispatchList=e.caseObj.dispatchList.join(" ")},e.dispatch=function(t){t.isChecked=!0,f.push(t),e.caseObj.carIds.push(t._id),e.caseObj.dispatchList.push(t.radioCode),e.caseObj.branches.push(t.branch),e.dispatchList=e.caseObj.dispatchList.join(" ")},e.closeCase=function(){c.count(a._id).success(function(e){e>0?o.alert("尚有隊員在安全管制"):(s.closeCase({id:a._id,isOngoing:!1}).success(function(e){console.log(e)}),n.dismiss("cancel"),r.reload())})},e.save=function(){s.create({case_id:i+1,address:e.caseObj.address||"測試",officerReceiver:l.currentUser()||"劉曉曼",type:e.caseObj.type||"救護",phone:e.caseObj.phone||"測試",branches:_.unique(e.caseObj.branches),branchIds:d(e.caseObj.branches),cars:e.caseObj.carIds,isOngoing:!0}).success(function(e){n.close(e)})},e.update=function(){var t={id:a._id,case_id:i,address:e.caseObj.address,officerReceiver:l.currentUser()||"劉曉曼",type:e.caseObj.type,phone:e.caseObj.phone,branches:_.unique(e.caseObj.branches),branchIds:d(e.caseObj.branches),cars:e.caseObj.carIds,isOngoing:!0};s.update(t),n.dismiss("cancel")}}]),angular.module("InNet").service("CaseSvc",["$http",function(e){this.fetch=function(){return e.get("/api/cases")},this.fetchAll=function(){return e.get("/api/cases/details")},this.fetchRelativeCase=function(t){return e.get("/api/cases/branch?branch="+t)},this.fetchDetails=function(t){return e.get("/api/cases/details/"+t)},this.findById=function(t){return e.get("/api/cases/"+t)},this.create=function(t){return e.post("/api/cases",t)},this.update=function(t){return e.put("/api/cases/"+t.id,t)},this["delete"]=function(t){return e.post("/api/cases/"+t)},this.closeCase=function(t){return e.put("/api/cases/close?id="+t.id,t)}}]),angular.module("InNet").controller("DashboardCtrl",["$scope","$location","SocketSvc","UserSvc","BranchSvc",function(e,t,n,s,r){r.fetch().success(function(t){e.branches=t}),s.fetchOnlineUser().success(function(t){e.users=t}),n.on("userLogin",function(t){e.users.push(t)}),n.on("userDisconnect",function(t){e.users=e.users.filter(function(e){return e.username!=t.username})}),n.on("userLogout",function(t){e.users=e.users.filter(function(e){return e.username!=t.username})}),e.$on("$destroy",function(e){n.removeAllListeners()})}]),angular.module("InNet").directive("minimalizaSidebar",["$timeout",function(e){return{restrict:"A",template:'<a class="navbar-minimalize minimalize-styl-2 btn btn-primary" href="" ng-click="minimalize()"><i class="fa fa-bars"></i></a>',controller:["$scope","$element",function(e,t){e.minimalize=function(){$("body").toggleClass("mini-navbar"),!$("body").hasClass("mini-navbar")||$("body").hasClass("body-small")?($("#side-menu").hide(),setTimeout(function(){$("#side-menu").fadeIn(500)},100)):$("body").hasClass("fixed-sidebar")?($("#side-menu").hide(),setTimeout(function(){$("#side-menu").fadeIn(500)},300)):$("#side-menu").removeAttr("style")}}]}}]).directive("sideNavigation",["$timeout",function(e){return{restrict:"A",link:function(t,n){e(function(){n.metisMenu()})}}}]).directive("iboxTools",["$timeout",function(e){return{restrict:"A",scope:!0,templateUrl:"views/common/ibox_tools.html",controller:["$scope","$element",function(t,n){t.showhide=function(){var t=n.closest("div.ibox"),s=n.find("i:first"),r=t.find("div.ibox-content");r.slideToggle(200),s.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),t.toggleClass("").toggleClass("border-bottom"),e(function(){t.resize(),t.find("[id^=map-]").resize()},50)},t.closebox=function(){var e=n.closest("div.ibox");e.remove()}}]}}]).directive("back",["$window",function(e){return{restrict:"A",link:function(t,n,s){n.bind("click",function(){e.history.back()})}}}]),angular.module("InNet").controller("DispatchCtrl",["$scope","$stateParams","$modal","CaseSvc","BranchSvc","CarSvc",function(e,t,n,s,r,i){s.fetch().success(function(n){e.cases=n,s.findById(e.cases[t.caseId]._id).success(function(t){e.caseDetails=t})}),r.fetch().success(function(t){e.branchList=t}),i.fetch().success(function(t){e.carsData=t}),e.addNewCase=function(){n.open({templateUrl:"/partials/casePanel/caseAddModal",controller:"CaseAddModalCtrl",size:"lg",resolve:{case_id:function(){return e.id="新增案件"},branchList:function(){return e.branchList},carsData:function(){return e.carsData},isNew:function(){return!0},caseDetails:function(){return{}}}})},e.editCase=function(){n.open({templateUrl:"/partials/casePanel/caseAddModal",controller:"CaseAddModalCtrl",size:"lg",resolve:{case_id:function(){return e.id=e.cases[t.caseId].case_id},branchList:function(){return e.branchList},carsData:function(){for(var t=e.carsData.length-1;t>=0;t--)for(var n=e.caseDetails.cars.length-1;n>=0;n--)e.carsData[t].radioCode===e.caseDetails.cars[n].radio_code&&(e.carsData[t].isChecked=!0);return e.carsData},isNew:function(){return!1},caseDetails:function(){return e.caseDetails}}})}}]),angular.module("InNet").controller("DutyListCtrl",["$scope","BranchSvc","$stateParams","SocketSvc","UserSvc",function(e,t,n,s,r){function i(e){for(var t=0,n=0;n<e.members.length;n++)e.members[n].onDuty&&(t+=1);return t}if(r.accessLevel()<2)var a=r.userBranch();else var a=n.branch;t.totalListFindByName(a).success(function(t){console.log(t),e.branch=t,e.onDutyTotal=i(e.branch)})}]),angular.module("InNet").controller("DutyListEditCtrl",["$scope","BranchSvc","$stateParams","MemberSvc","$location","$window","UserSvc",function(e,t,n,s,r,i,a){if(a.accessLevel()<2)var c=a.userBranch();else var c=n.branch;t.totalListFindByName(c).success(function(t){e.branch=t,e.onDutyTotal=0}),e.check=function(e){e.onDuty=!e.onDuty},e.save=function(){t.updateDirector({branch:e.branch.name,director:e.branch.director}).success(function(){for(var t=0;t<e.branch.members.length;t++)s.updateByMemberId({name:e.branch.members[t].name,title:e.branch.members[t].title,memberId:e.branch.members[t]._id,onDuty:e.branch.members[t].onDuty,mission:e.branch.members[t].mission})}).then(function(){i.history.back()})}}]),angular.module("InNet").service("GeoSvc",["$q",function(e){this.getGeolocationCoordinates=function(){var t=e.defer();return navigator.geolocation.getCurrentPosition(function(e){t.resolve(e.coords)},function(e){t.resolve(null)}),t.promise}}]),angular.module("InNet").controller("LoginCtrl",["$scope","UserSvc","store","$state","jwtHelper","$http","SocketSvc",function(e,t,n,s,r,i,a){var c=null;e.user={},e.login=function(){t.login(e.user).success(function(e){e.success?(n.set("jwt",e.token),i.defaults.headers.common["x-access-token"]=e.token,c=e.token):console.log("password is not existed!")}).then(function(){a.init(c),a.emit("login")}).then(function(){s.go("admin"==r.decodeToken(c).role?"dutyDesk.dashboard":"director.safety.index")})}}]),angular.module("InNet").controller("MapIndexCtrl",["$scope","leafletData","GeoSvc",function(e,t,n){n.getGeolocationCoordinates().then(function(t){e.nowPos.lat=t.latitude,e.nowPos.lng=t.longitude,e.nowPos.zoom=17}),angular.extend(e,{nowPos:{lat:24.988,lng:121.5752,zoom:17},controls:{draw:{}}}),t.getMap().then(function(t){var n=e.controls.edit.featureGroup;t.on("draw:created",function(e){var t=e.layer;n.addLayer(t),FeatureCollections.push(t.toGeoJSON())})})}]),angular.module("InNet").controller("MemberCtrl",["$scope","MemberSvc","$stateParams",function(e,t,n){e.branch=n.branch,t.findByBranch(n.branch).success(function(t){e.members=t})}]),angular.module("InNet").controller("MemberEditCtrl",["$scope","MemberSvc","BranchSvc","$stateParams","$window","$modal",function(e,t,n,s,r,i){e.isDeleted=!1,t.findByBranch(s.branch).success(function(t){e.members=t}),e.save=function(){for(var t=[],i=[],a=0;a<e.members.length;a++)t.push(e.members[a]._id),i.push(e.members[a].name),("分隊長"==e.members[a].title||"小隊長"==e.members[a].title||"中隊長"==e.members[a].title||"大隊長"==e.members[a].title)&&(director=e.members[a].name);n.update({branch:s.branch,members:t,directors:i,director:director}),r.history.back()},e.addNewMember=function(){i.open({templateUrl:"views/member/member.modal.html",controller:"MemberModalCtrl",size:"md",resolve:{branch:function(){return s.branch},member:function(){return{}}}})},e.update=function(e){i.open({templateUrl:"views/member/member.modal.html",controller:"MemberModalCtrl",size:"md",resolve:{branch:function(){return s.branch},member:function(){return e}}})},e["delete"]=function(){e.isDeleted=!0}}]),angular.module("InNet").controller("MemberModalCtrl",["$scope","branch","MemberSvc","$modalInstance","$state","member","BranchSvc",function(e,t,n,s,r,i,a){e.isNew=_.isEmpty(i),a.fetch().success(function(t){e.branches=t}).then(function(){for(var n=[],s=0;s<e.branches.length;s++)n.push(e.branches[s].name);e.member={name:i.name||"新進人員",title:i.title,titles:["隊員","小隊長","分隊長","中隊長","大隊長","副大隊長"],branch:t,branches:n,corp:"第一救災救護大隊",corps:["第一救災救護大隊"]}}),e.save=function(){n.create({onDuty:"true",id:"",name:e.member.name||"王小明",corp:e.member.corp,branch:e.member.branch,title:e.member.title,isChecked:"false",mission:"瞄子手",missions:["瞄子手","副瞄子手","司機","帶隊官","安全管制員","聯絡官"]}),s.dismiss("cancel"),r.reload()},e.update=function(){n.updateByMemberId({memberId:i._id,id:"",name:e.member.name,corp:e.member.corp,branch:e.member.branch,title:e.member.title,mission:"瞄子手",missions:["瞄子手","副瞄子手","司機","帶隊官","安全管制員","聯絡官"]}),s.dismiss("cancel"),r.reload()},e.cancel=function(){s.dismiss("cancel")}}]),angular.module("InNet").service("MemberSvc",["$http",function(e){this.fetch=function(){return e.get("/api/members")},this.findByBranch=function(t){return e.get("/api/members/"+t)},this.fetchOnDuty=function(t){return e.get("/api/members/onDuty?branch="+t)},this.create=function(t){return e.post("/api/members/",t)},this.update=function(t){return e.put("/api/members/",t.id)},this.updateByMemberId=function(t){return e.put("/api/members/findById/"+t.memberId,t)},this.updateIsChecked=function(t){return e.put("/api/members?id="+t.memberId,t)},this["delete"]=function(t){return e["delete"]("/api/members/"+t.id)}}]),angular.module("InNet").controller("NavCtrl",["$scope","BranchSvc","store","jwtHelper","UserSvc",function(e,t,n,s,r){e.username=r.currentUser(),e.branch=r.userBranch(),e.isValid=function(e){return"第三救災救護大隊"==e?!0:!1},t.fetch().success(function(t){e.branches=t}),e.isValid=function(e){return r.isValid(e)}}]),angular.module("InNet").config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,n){t.otherwise("/login"),e.state("anon",{url:"","abstract":!0,template:"<ui-view>"}).state("anon.login",{url:"/login",templateUrl:"views/login.html",controller:"LoginCtrl"}).state("anon.404",{url:"/404",templateUrl:"views/404.html"}),e.state("dutyDesk",{"abstract":!0,url:"/dutyDesk",templateUrl:"views/common/content.html",data:{requiredLogin:!0,role:["admin"]}}).state("dutyDesk.dashboard",{url:"/dashboard",templateUrl:"views/dashboard.html",controller:"DashboardCtrl",data:{requiredLogin:!0,role:["admin"]}}).state("dutyDesk.case",{url:"/case",templateUrl:"views/case/case.index.html",controller:"CaseCtrl"}).state("dutyDesk.safety",{url:"/case/:id",templateUrl:"views/summary/summary.index.html",controller:"SummaryCtrl"}).state("dutyDesk.dutylist",{"abstract":!0,template:"<ui-view>"}).state("dutyDesk.dutylist.show",{url:"/dutylist/:branch",templateUrl:"views/dutylist/dutylist.index.html",controller:"DutyListCtrl"}).state("dutyDesk.dutylist.edit",{url:"/dutylist/:branch/edit",templateUrl:"views/dutylist/dutylist.edit.html",controller:"DutyListEditCtrl"}).state("dutyDesk.member",{"abstract":!0,template:"<ui-view>"}).state("dutyDesk.member.show",{url:"/member/:branch",templateUrl:"views/member/member.index.html",controller:"MemberCtrl"}).state("dutyDesk.member.edit",{url:"/member/:branch/edit",templateUrl:"views/member/member.edit.html",controller:"MemberEditCtrl"}).state("dutyDesk.logistic",{url:"/logistic",templateUrl:"views/logistic/logistic.index.html",controller:"LogisticCtrl"}),e.state("director",{"abstract":!0,url:"",templateUrl:"views/director/director.content.html",data:{requiredLogin:!0,role:["user"]}}).state("director.safety",{"abstract":!0,url:"/safety",template:"<ui-view>"}).state("director.safety.index",{url:"/index",templateUrl:"views/safety/safety.index.html",controller:"SafetyIndexCtrl"}).state("director.safety.management",{url:"/index/:id",templateUrl:"views/safety/safety.manage.html",controller:"SafetyManageCtrl"}).state("director.safety.summary",{url:"/summary/:id",templateUrl:"views/summary/summary.index.html",controller:"SummaryCtrl"}).state("director.map",{url:"/map",templateUrl:"views/map/map.index.html",controller:"MapIndexCtrl"}).state("director.dutylist",{"abstract":!0,url:"/dutylist",template:"<ui-view>"}).state("director.dutylist.index",{url:"/index",templateUrl:"views/dutylist/director.dutylist.index.html",controller:"DutyListCtrl"}).state("director.dutylist.edit",{url:"/edit",templateUrl:"views/dutylist/director.dutylist.edit.html",controller:"DutyListEditCtrl"})}]).run(["$rootScope","$state","$stateParams","store","jwtHelper","UserSvc","SocketSvc",function(e,t,n,s,r,i,a){e.$on("$stateChangeStart",function(e,n,a,c,o){"anon.login"==n.name?s.remove("jwt"):n.data&&n.data.requiredLogin&&(i.isLoggedIn()?-1==n.data.role.indexOf(r.decodeToken(s.get("jwt")).role)&&(e.preventDefault(),t.go("anon.login")):(e.preventDefault(),t.go("anon.login")))}),e.$on("$stateChangeError",function(e){e.preventDefault()})}]),angular.module("InNet").controller("SafetyIndexCtrl",["$scope","CaseSvc","UserSvc","SocketSvc","$rootScope",function(e,t,n,s,r){s.on("newCase",function(t){e.cases.push(t)}),s.on("caseClose",function(t){t.isOngoing||(e.cases=e.cases.filter(function(e){return e._id!=t.caseId}))}),t.fetchRelativeCase(n.userBranch()).success(function(t){e.cases=t}),e.$on("$destroy",function(e){s.removeAllListeners()})}]),angular.module("InNet").controller("SafetyManageCtrl",["$scope","$stateParams","$modal","StSvc","$state","MemberSvc","$log","UserSvc","BranchSvc","SocketSvc",function(e,t,n,s,r,i,a,c,o,u){var l=c.userBranch();o.fetchByName(l).success(function(t){e.details=t}),s.fetch(t.id,l).success(function(t){e.strikeTeams=t}),u.on("newSt",function(n){angular.equals(l,n.branch)&&angular.equals(t.id,n.caseId)&&e.strikeTeams.push(n)}),u.on("updateSt",function(t){for(var n=angular.copy(t.members),s=e.strikeTeams.length-1;s>=0;s--)angular.equals(e.strikeTeams[s]._id,t.id)&&(e.strikeTeams[s].position=t.position,e.strikeTeams[s].area=t.area,e.strikeTeams[s].members.push.apply(e.strikeTeams[s].members,n))}),u.on("dismiss",function(t){var n=t.stId;e.strikeTeams=e.strikeTeams.filter(function(e){return e._id!=n})}),e.strikeTeam=function(){var t=n.open({templateUrl:"views/safety/safety.modal.html",controller:"SafetyModalCtrl",size:"md",resolve:{stId:function(){return _.isEmpty(e.strikeTeams)?0:e.strikeTeams[e.strikeTeams.length-1].id}}});t.result.then(function(e){},function(){a.info("Modal dismissed at: "+new Date)})},e.openSettingModal=function(t,s){var r=n.open({templateUrl:"views/safety/safety.setting.modal.html",controller:"SafetySettingCtrl",size:"lg",resolve:{strikeTeam:function(){return t}}});r.result.then(function(t){for(var n=e.strikeTeams.length-1;n>=0;n--)angular.equals(e.strikeTeams[n]._id,t.id)&&(e.strikeTeams[n].position=t.position,e.strikeTeams[n].area=t.area,e.strikeTeams[n].members.push.apply(e.strikeTeams[n].members,t.members))},function(){a.info("Modal dismissed at: "+new Date)})},e.dismiss=function(t,n){s.dismissSt({id:t._id}).success(function(){for(var e=t.members.length-1;e>=0;e--)i.updateIsChecked({memberId:t.members[e]._id,mission:t.members[e].mission,isChecked:!1})}),e.strikeTeams.splice(n,1)},e.$on("$destroy",function(e){u.removeAllListeners()})}]),angular.module("InNet").controller("SafetyModalCtrl",["$scope","$modalInstance","$stateParams","StSvc","MemberSvc","$state","$window","stId","UserSvc","BranchSvc","SocketSvc",function(e,t,n,s,r,i,a,c,o,u,l){var m=o.userBranch();e.title=m+(c+1),u.fetchByName(m).success(function(t){e.details=t}).then(function(){e.details&&(e.details.members=e.details.members.filter(function(e){return 1!=e.isChecked}),e.details.members.forEach(function(e){e.limitTime=moment.duration(e.workingTime,"seconds")}))}),e.strikeTeam={position:"第一面",positions:["第一面","第二面","第三面","第四面"],mission:"搶救小組",missions:["搶救小組","救援小組","搜救小組"],area:"第一區",areas:["第一區","第二區","第三區","第四區","第五區"]},e.check=function(e){e.isChecked=!e.isChecked},e.cancel=function(){t.dismiss("cancel")},e.save=function(){var i=e.details.members.filter(function(e){return e.isChecked===!0});if(i.length>-1){for(var u={id:c+1||0,caseId:n.id,branch:e.details.name,director:e.details.director,position:e.strikeTeam.position,positions:e.strikeTeam.positions,mission:e.strikeTeam.mission,missions:e.strikeTeam.missions,area:e.strikeTeam.area,areas:e.strikeTeam.areas,members:i,isDismissed:!1,workingTime:_.min(i,function(e){return e.workingTime}).workingTime,creator:o.currentUser()},l=i.length-1;l>=0;l--)r.updateIsChecked({memberId:i[l]._id,isChecked:i[l].isChecked,mission:i[l].mission});s.create(u),t.close()}else a.alert("you must organize strike team")}}]),angular.module("InNet").controller("SafetySettingCtrl",["$scope","strikeTeam","$modalInstance","StSvc","$state","MemberSvc","CaseSvc","$stateParams","SocketSvc",function(e,t,n,s,r,i,a,c,o){var u=[],l=[];e.strikeTeam=t,a.fetchDetails(c.id).success(function(t){e.dispatch=t.branchIds}),e.chooseBranch=function(t){e.members=e.dispatch[t].members;for(var n=e.members.length-1;n>=0;n--)e.members[n].isChecked&&e.members.splice(n,1)},e.cancel=function(){n.dismiss("cancel")},e.check=function(e){e.isChecked=!e.isChecked,u.push(e._id),l.push(e)},e.uncheck=function(e,t){e.isChecked=!e.isChecked,u.splice(t,1),l.splice(t,1)},e.save=function(){s.updateSt({id:t._id,position:t.position,area:t.area,mission:t.mission,memberIds:u}).success(function(){for(var e=u.length-1;e>=0;e--)i.updateIsChecked({memberId:u[e]._id,mission:u[e].mission,isChecked:!0})}),n.close({id:t._id,position:t.position,area:t.area,members:l,caseId:t.caseId})}}]),angular.module("InNet").service("SocketSvc",["$rootScope","store","$q","$timeout",function(e,t,n,s){this.init=function(e){var n=null;return n=e?e:t.get("jwt"),io.connect("https://104.236.201.50:3000",{query:"token="+n,forceNew:!0})};var r=this.init();this.on=function(t,n){this.init().on(t,function(){var t=arguments;e.$apply(function(){n.apply(r,t)})})},this.emit=function(t,n,s){this.init().emit(t,n,function(){var t=arguments;e.$apply(function(){s&&s.apply(r,t)})})},this.removeAllListeners=function(t,n){this.init().removeAllListeners(t,function(){var t=arguments;e.$apply(function(){n.apply(r,t)})})}}]),angular.module("InNet").service("StSvc",["$http",function(e){this.fetch=function(t,n){return e.get("/api/strikeTeams?caseId="+t+"&branch="+n)},this.fetchByCase=function(t){return e.get("/api/strikeTeams/total?caseId="+t)},this.dismissSt=function(t){return e.put("/api/strikeTeams/dismiss?id="+t.id)},this.updateSt=function(t){return e.put("/api/strikeTeams/update?id="+t.id,t)},this.updateTimeRecord=function(t){return e.put("/api/strikeTeams/time?id="+t.id,t)},this.create=function(t){return e.post("/api/strikeTeams",t)},this.count=function(t){return e.get("/api/strikeTeams/count?caseId="+t)}}]),angular.module("InNet").controller("SummaryCtrl",["$scope","StSvc","$stateParams","$interval","$state","SocketSvc",function(e,t,n,s,r,i){i.on("timerRunning",function(t){for(var n=e.strikeTeams.length-1;n>=0;n--)angular.equals(e.strikeTeams[n]._id,t.stId)&&(e.strikeTeams[n].timerRunning=t.timerRunning)}),i.on("progressUpdate",function(t){for(var n=e.strikeTeams.length-1;n>=0;n--)angular.equals(e.strikeTeams[n]._id,t.id)&&(e.strikeTeams[n].timer=moment.duration(t.millis),e.strikeTeams[n].progress=t.progress,e.strikeTeams[n].progressState=t.progressState)}),i.on("newSt",function(t){if(angular.equals(a,t.caseId)){var n=angular.copy(t);e.strikeTeams.push(n)}e.deploys=c(e.strikeTeams)}),i.on("updateSt",function(n){t.fetchByCase(a).success(function(t){e.strikeTeams=t,e.strikeTeams.forEach(function(e){e.limitTime=moment.duration(e.workingTime,"seconds")}),e.deploys=c(e.strikeTeams)})}),i.on("dismiss",function(n){t.fetchByCase(a).success(function(t){e.strikeTeams=t,e.deploys=c(e.strikeTeams)})});var a=n.id;t.fetchByCase(a).success(function(t){e.strikeTeams=t,e.strikeTeams.forEach(function(e){e.limitTime=moment.duration(e.workingTime,"seconds")}),e.deploys=c(e.strikeTeams)}),e.position={defaultPos:"第一面",positions:["第一面","第二面","第三面","第四面"]};var c=function(e){var t=_.range(4).map(function(){return _.range(5).map(function(){return{totalMember:0,stTotal:0}})});if(e)for(var n=e.length-1;n>=0;n--){var s=_.indexOf(e[n].positions,e[n].position),r=_.indexOf(e[n].areas,e[n].area);t[s][r].stTotal+=1,t[s][r].totalMember+=e[n].members.length}return t};e.$on("$destroy",function(e){i.removeAllListeners()})}]),angular.module("InNet").controller("TimerCtrl",["$scope","SocketSvc",function(e,t){e.timerRunning=!0,e.startTimer=function(n,s){e.$broadcast("timer-start"),e.timerRunning=!0,t.emit("timer",{stId:n._id,timerRunning:!0})},e.stopTimer=function(n,s){e.$broadcast("timer-stop"),e.timerRunning=!1,t.emit("timer",{stId:n._id,timerRunning:!1})},e.resumeTimer=function(){e.$broadcast("timer-resume"),e.timerRunning=!1}}]),angular.module("InNet").controller("TopNavCtrl",["$scope","$location","$state","$interval","store","SocketSvc","UserSvc","$window",function(e,t,n,s,r,i,a,c){e.currentTime=moment().format("MMM Do, h:mm:ss a"),s(function(){moment.locale("zh-tw"),e.currentTime=moment().format("MMM Do, h:mm:ss a")},1e3),e.logout=function(){a.currentAccount();i.emit("logout"),n.go("anon.login")}}]),angular.module("InNet").service("UserSvc",["$http","store","jwtHelper",function(e,t,n){this.fetchOnlineUser=function(){return e.get("/api/users/userState")},this.register=function(){return e.post("/api/users")},this.login=function(t){return e.post("/api/users/authenticate",t)},this.isLoggedIn=function(){return t.get("jwt")},this.isValid=function(e){return this.isLoggedIn&&("第三救災救護大隊"==n.decodeToken(t.get("jwt")).branch||n.decodeToken(t.get("jwt")).branch==e)?!0:!1},this.userBranch=function(){return this.isLoggedIn?n.decodeToken(t.get("jwt")).branch:void 0},this.currentUser=function(){return this.isLoggedIn?n.decodeToken(t.get("jwt")).username:void 0},this.currentAccount=function(){return this.isLoggedIn?n.decodeToken(t.get("jwt")).account:void 0},this.accessLevel=function(){return this.isLoggedIn?n.decodeToken(t.get("jwt")).accessLevel:void 0},this.caseId=function(){return this.isLoggedIn?n.decodeToken(t.get("jwt")).caseId:void 0}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImJyYW5jaC5zdmMuanMiLCJjYXJzLnN2Yy5qcyIsImNhc2UuY3RybC5qcyIsImNhc2UubW9kYWwuY3RybC5qcyIsImNhc2Uuc3ZjLmpzIiwiZGFzaGJvYXJkLmN0cmwuanMiLCJkaXJlY3RpdmVzLmpzIiwiZGlzcGF0Y2guY3RybC5qcyIsImR1dHlsaXN0LmN0cmwuanMiLCJkdXR5bGlzdC5lZGl0LmN0cmwuanMiLCJnZW8uc3ZjLmpzIiwibG9naW4uY3RybC5qcyIsIm1hcC5pbmRleC5jdHJsLmpzIiwibWVtYmVyLmN0cmwuanMiLCJtZW1iZXIuZWRpdC5jdHJsLmpzIiwibWVtYmVyLm1vZGFsLmN0cmwuanMiLCJtZW1iZXIuc3ZjLmpzIiwibmF2LmN0cmwuanMiLCJyb3V0ZXIuanMiLCJzYWZldHkuaW5kZXguY3RybC5qcyIsInNhZmV0eS5tYW5hZ2UuY3RybC5qcyIsInNhZmV0eS5tb2RhbC5jdHJsLmpzIiwic2FmZXR5LnNldHRpbmcubW9kYWwuanMiLCJzb2NrZXQuc3ZjLmpzIiwic3Quc3ZjLmpzIiwic3VtbWFyeS5jdHJsLmpzIiwidGltZXIuY3RybC5qcyIsInRvcG5hdmJhci5jdHJsLmpzIiwidXNlci5zdmMuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsInNlcnZpY2UiLCIkaHR0cCIsInRoaXMiLCJmZXRjaCIsImdldCIsImZldGNoQnlOYW1lIiwiYnJhbmNoIiwidG90YWxMaXN0RmluZEJ5TmFtZSIsImdldERldGFpbHMiLCJpZCIsInVwZGF0ZSIsImRhdGEiLCJwdXQiLCJ1cGRhdGVEaXJlY3RvciIsImZpbmRCeUJyYW5jaCIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCIkc3RhdGVQYXJhbXMiLCIkbW9kYWwiLCJDYXNlU3ZjIiwiJGxvZyIsIlNvY2tldFN2YyIsIm1heFNpemUiLCJiaWdUb3RhbEl0ZW1zIiwiYmlnQ3VycmVudFBhZ2UiLCJzdWNjZXNzIiwiY2FzZXMiLCJvbiIsIl9jYXNlIiwidW5zaGlmdCIsImNhc2VfaWQiLCJjaG9vc2UiLCJmaW5kQnlJZCIsIl9pZCIsImNhc2VEZXRhaWxzIiwiYWRkTmV3Q2FzZSIsIm1vZGFsSW5zdGFuY2UiLCJvcGVuIiwidGVtcGxhdGVVcmwiLCJzaXplIiwicmVzb2x2ZSIsImNhc2VJZCIsIl8iLCJpc0VtcHR5IiwicmVzdWx0IiwidGhlbiIsIm1zZyIsImNvbnNvbGUiLCJsb2ciLCJpbmZvIiwiRGF0ZSIsImVkaXRDYXNlIiwiQ2FyU3ZjIiwiJG1vZGFsSW5zdGFuY2UiLCIkc3RhdGUiLCJTdFN2YyIsIiR3aW5kb3ciLCJCcmFuY2hTdmMiLCJVc2VyU3ZjIiwiZ2V0Q2Fyc0RldGFpbCIsIm9iaiIsImRpc3BhdGNoTGlzdCIsImNhcklkcyIsImJyYW5jaGVzIiwiY2FycyIsImkiLCJsZW5ndGgiLCJwdXNoIiwicmFkaW9Db2RlIiwiZ2V0QnJhbmNoSWQiLCJicmFuY2hlc0xpc3QiLCJ1bmlxdWUiLCJicmFuY2hJZHMiLCJpbmRleE9mIiwibmFtZSIsImlzTmV3IiwiY2FyT2JqcyIsImNhc2VPYmoiLCJhZGRyZXNzIiwicGhvbmUiLCJ0eXBlIiwidHlwZXMiLCJqb2luIiwiZ2V0Q2FycyIsImlzQ2hlY2tlZCIsImNhbmNlbCIsImRpc21pc3MiLCJjYW5jZWxEaXNwYXRjaCIsImNhciIsInNwbGljZSIsImRpc3BhdGNoIiwiY2xvc2VDYXNlIiwiY291bnQiLCJ0b3RhbCIsImFsZXJ0IiwiaXNPbmdvaW5nIiwicmVsb2FkIiwic2F2ZSIsImNyZWF0ZSIsIm9mZmljZXJSZWNlaXZlciIsImN1cnJlbnRVc2VyIiwibmV3Q2FzZSIsImNsb3NlIiwiY29udGVudCIsImZldGNoQWxsIiwiZmV0Y2hSZWxhdGl2ZUNhc2UiLCJmZXRjaERldGFpbHMiLCJjYXNlX2luZm8iLCJwb3N0IiwidXBkYXRlZF9jYXNlIiwiJGxvY2F0aW9uIiwiZmV0Y2hPbmxpbmVVc2VyIiwidXNlcnMiLCJ1c2VyIiwiZGlzY29ubmVjdFVzZXIiLCJmaWx0ZXIiLCJ1c2VybmFtZSIsImxvZ291dFVzZXIiLCIkb24iLCJldmVudCIsInJlbW92ZUFsbExpc3RlbmVycyIsImRpcmVjdGl2ZSIsIiR0aW1lb3V0IiwicmVzdHJpY3QiLCJ0ZW1wbGF0ZSIsIiRlbGVtZW50IiwibWluaW1hbGl6ZSIsIiQiLCJ0b2dnbGVDbGFzcyIsImhhc0NsYXNzIiwiaGlkZSIsInNldFRpbWVvdXQiLCJmYWRlSW4iLCJyZW1vdmVBdHRyIiwibGluayIsInNjb3BlIiwiZWxlbWVudCIsIm1ldGlzTWVudSIsInNob3doaWRlIiwiaWJveCIsImNsb3Nlc3QiLCJpY29uIiwiZmluZCIsInNsaWRlVG9nZ2xlIiwicmVzaXplIiwiY2xvc2Vib3giLCJyZW1vdmUiLCJpRWxlbWVudCIsImlBdHRycyIsImJpbmQiLCJoaXN0b3J5IiwiYmFjayIsImJyYW5jaExpc3QiLCJjYXJzRGF0YSIsImoiLCJyYWRpb19jb2RlIiwidG90YWxDb3VudCIsIm1lbWJlcnMiLCJvbkR1dHkiLCJhY2Nlc3NMZXZlbCIsInVzZXJCcmFuY2giLCJvbkR1dHlUb3RhbCIsIk1lbWJlclN2YyIsImNoZWNrIiwibWVtYmVyIiwiZGlyZWN0b3IiLCJ1cGRhdGVCeU1lbWJlcklkIiwidGl0bGUiLCJtZW1iZXJJZCIsIm1pc3Npb24iLCIkcSIsImdldEdlb2xvY2F0aW9uQ29vcmRpbmF0ZXMiLCJkZWZlcnJlZCIsImRlZmVyIiwibmF2aWdhdG9yIiwiZ2VvbG9jYXRpb24iLCJnZXRDdXJyZW50UG9zaXRpb24iLCJwb3NpdGlvbiIsImNvb3JkcyIsImVycm9yIiwicHJvbWlzZSIsInN0b3JlIiwiand0SGVscGVyIiwidG9rZW4iLCJsb2dpbiIsInNldCIsImRlZmF1bHRzIiwiaGVhZGVycyIsImNvbW1vbiIsImluaXQiLCJlbWl0IiwiZ28iLCJkZWNvZGVUb2tlbiIsInJvbGUiLCJsZWFmbGV0RGF0YSIsIkdlb1N2YyIsImNvb3JkIiwibm93UG9zIiwibGF0IiwibGF0aXR1ZGUiLCJsbmciLCJsb25naXR1ZGUiLCJ6b29tIiwiZXh0ZW5kIiwiY29udHJvbHMiLCJkcmF3IiwiZ2V0TWFwIiwibWFwIiwiZHJhd25JdGVtcyIsImVkaXQiLCJmZWF0dXJlR3JvdXAiLCJlIiwibGF5ZXIiLCJhZGRMYXllciIsIkZlYXR1cmVDb2xsZWN0aW9ucyIsInRvR2VvSlNPTiIsImlzRGVsZXRlZCIsIm1lbWJlcklkcyIsImRpcmVjdG9ycyIsImFkZE5ld01lbWJlciIsInRpdGxlcyIsImNvcnAiLCJjb3JwcyIsIm1pc3Npb25zIiwiZmV0Y2hPbkR1dHkiLCJ1cGRhdGVNZW1iZXIiLCJ1cGRhdGVJc0NoZWNrZWQiLCJtZW1iZXJEYXRhIiwiaXNWYWxpZCIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJvdGhlcndpc2UiLCJzdGF0ZSIsInVybCIsImFic3RyYWN0IiwicmVxdWlyZWRMb2dpbiIsInJ1biIsIiRyb290U2NvcGUiLCJ0b1N0YXRlIiwidG9QYXJhbXMiLCJmcm9tU3RhdGUiLCJmcm9tUGFyYW1zIiwiaXNMb2dnZWRJbiIsInByZXZlbnREZWZhdWx0IiwiZGV0YWlscyIsInN0cyIsInN0cmlrZVRlYW1zIiwic3QiLCJlcXVhbHMiLCJjb3B5IiwiYXJlYSIsImFwcGx5IiwiX3N0SWQiLCJzdElkIiwic3RyaWtlVGVhbSIsIm9wZW5TZXR0aW5nTW9kYWwiLCJ1cGRhdGVkU3QiLCJkaXNtaXNzU3QiLCJmb3JFYWNoIiwibGltaXRUaW1lIiwibW9tZW50IiwiZHVyYXRpb24iLCJ3b3JraW5nVGltZSIsInBvc2l0aW9ucyIsImFyZWFzIiwiaXNEaXNtaXNzZWQiLCJtaW4iLCJjcmVhdG9yIiwibWVtYmVyT2JqcyIsImNob29zZUJyYW5jaCIsInVuY2hlY2siLCJ1cGRhdGVTdCIsImF1dGhUb2tlbiIsImlvIiwiY29ubmVjdCIsInF1ZXJ5IiwiZm9yY2VOZXciLCJzb2NrZXQiLCJldmVudE5hbWUiLCJjYWxsYmFjayIsImFyZ3MiLCJhcmd1bWVudHMiLCIkYXBwbHkiLCJmZXRjaEJ5Q2FzZSIsInVwZGF0ZVRpbWVSZWNvcmQiLCIkaW50ZXJ2YWwiLCJ0aW1lclJ1bm5pbmciLCJ0aW1lciIsIm1pbGxpcyIsInByb2dyZXNzIiwicHJvZ3Jlc3NTdGF0ZSIsIm5ld1N0IiwiZGVwbG95cyIsImluaXRUYWJsZSIsImRlZmF1bHRQb3MiLCJkZXBsb3lBcnJheSIsInJhbmdlIiwidG90YWxNZW1iZXIiLCJzdFRvdGFsIiwieCIsInkiLCJzdGFydFRpbWVyIiwiJGJyb2FkY2FzdCIsInN0b3BUaW1lciIsInJlc3VtZVRpbWVyIiwiY3VycmVudFRpbWUiLCJmb3JtYXQiLCJsb2NhbGUiLCJsb2dvdXQiLCJjdXJyZW50QWNjb3VudCIsInJlZ2lzdGVyIiwiYWNjb3VudCJdLCJtYXBwaW5ncyI6IkFBS0FBLFFBQUFDLE9BQUEsU0FBQSxZQUFBLGVBQUEsUUFBQSxrQkFBQSxjQUFBLG9CQUFBLG1CQ0FBRCxRQUFBQyxPQUFBLFNBQ0FDLFFBQUEsYUFBQSxRQUFBLFNBQUFDLEdBRUFDLEtBQUFDLE1BQUEsV0FDQSxNQUFBRixHQUFBRyxJQUFBLGdCQUdBRixLQUFBRyxZQUFBLFNBQUFDLEdBQ0EsTUFBQUwsR0FBQUcsSUFBQSwyQkFBQUUsSUFHQUosS0FBQUssb0JBQUEsU0FBQUQsR0FDQSxNQUFBTCxHQUFBRyxJQUFBLGlDQUFBRSxJQUdBSixLQUFBTSxXQUFBLFNBQUFDLEdBQ0EsTUFBQVIsR0FBQUcsSUFBQSxlQUFBSyxJQUdBUCxLQUFBUSxPQUFBLFNBQUFDLEdBQ0EsTUFBQVYsR0FBQVcsSUFBQSxlQUFBRCxFQUFBTCxPQUFBSyxJQUdBVCxLQUFBVyxlQUFBLFNBQUFGLEdBQ0EsTUFBQVYsR0FBQVcsSUFBQSxzQkFBQUQsRUFBQUwsT0FBQUssT0N4QkFiLFFBQUFDLE9BQUEsU0FDQUMsUUFBQSxVQUFBLFFBQUEsU0FBQUMsR0FFQUMsS0FBQUMsTUFBQSxXQUNBLE1BQUFGLEdBQUFHLElBQUEsY0FHQUYsS0FBQVksYUFBQSxTQUFBUixHQUNBLE1BQUFMLEdBQUFHLElBQUEsYUFBQUUsSUFPQUosS0FBQVEsT0FBQSxT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RUFBQWpMLElBQUEsUUFBQTJKLFlBREEsUUFLQTdKLEtBQUF1QyxPQUFBLFdBQ0EsTUFBQXZDLE1BQUFrUCxXQUNBOUQsRUFBQVUsWUFBQVgsRUFBQWpMLElBQUEsUUFBQXFDLE9BREEiLCJmaWxlIjoiaW5uZXQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4qIEluTmV0IE1vZCd1aS5yb3V0ZSd1bGVcbipcbiogRGVzY3JpcHRpb25cbiovXG5hbmd1bGFyLm1vZHVsZSgnSW5OZXQnLCBbJ3VpLnJvdXRlcicsJ3VpLmJvb3RzdHJhcCcsICd0aW1lcicsJ2FuZ3VsYXItc3RvcmFnZScsICdhbmd1bGFyLWp3dCcsJ2xlYWZsZXQtZGlyZWN0aXZlJywgJ2FuZ3VsYXIuZmlsdGVyJ10pIiwiLyoqXG4qIEluTmV0IE1vZHVsZVxuKlxuKiBEZXNjcmlwdGlvblxuKi9cbmFuZ3VsYXIubW9kdWxlKCdJbk5ldCcpXG4uc2VydmljZSgnQnJhbmNoU3ZjJywgWyAnJGh0dHAnLCBmdW5jdGlvbiAoJGh0dHApIHtcblxuXHR0aGlzLmZldGNoID0gZnVuY3Rpb24oKXtcblx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2JyYW5jaCcpO1xuXHR9O1xuXG5cdHRoaXMuZmV0Y2hCeU5hbWUgPSBmdW5jdGlvbihicmFuY2gpe1xuXHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvYnJhbmNoL25hbWU/YnJhbmNoPScgKyBicmFuY2gpO1xuXHR9O1xuXG5cdHRoaXMudG90YWxMaXN0RmluZEJ5TmFtZSA9IGZ1bmN0aW9uKGJyYW5jaCl7XG5cdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9icmFuY2gvbmFtZS90b3RhbD9icmFuY2g9JyArIGJyYW5jaClcblx0fVxuXG5cdHRoaXMuZ2V0RGV0YWlscyA9IGZ1bmN0aW9uKGlkKXtcblx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2JyYW5jaC8nICsgaWQpO1xuXHR9O1xuXG5cdHRoaXMudXBkYXRlID0gZnVuY3Rpb24oZGF0YSl7XG5cdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9icmFuY2gvJyArIGRhdGEuYnJhbmNoICwgZGF0YSk7XG5cdH07XG5cblx0dGhpcy51cGRhdGVEaXJlY3RvciA9IGZ1bmN0aW9uKGRhdGEpe1xuXHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvYnJhbmNoP2JyYW5jaD0nICsgZGF0YS5icmFuY2gsIGRhdGEpXG5cdH1cblx0XG59XSkiLCIvKipcbiogSW5OZXQgTW9kdWxlXG4qXG4qIERlc2NyaXB0aW9uXG4qL1xuYW5ndWxhci5tb2R1bGUoJ0luTmV0Jylcbi5zZXJ2aWNlKCdDYXJTdmMnLCBbJyRodHRwJyxmdW5jdGlvbiAoJGh0dHApIHtcblxuXHR0aGlzLmZldGNoID0gZnVuY3Rpb24oKXtcblx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2NhcnMnKVxuXHR9XG5cblx0dGhpcy5maW5kQnlCcmFuY2ggPSBmdW5jdGlvbiggYnJhbmNoICl7XG5cdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9jYXJzLycgKyBicmFuY2ggKVxuXHR9XG5cblx0Ly8gdGhpcy5jcmVhdGUgPSBmdW5jdGlvbihjYXNlX2luZm8pe1xuXHQvLyBcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2Nhc2VzJywgY2FzZV9pbmZvKVxuXHQvLyB9XG5cblx0dGhpcy51cGRhdGUgPSBmdW5jdGlvbihkYXRhKXtcblx0XHRyZXR1cm4gJGh0dHAucHV0KCcvYXBpL2NhcnMvJyArIGRhdGEuaWQgLCBkYXRhKVxuXHR9XG5cblx0Ly8gdGhpcy5kZWxldGUgPSBmdW5jdGlvbihjYXNlX2lkKXtcblx0Ly8gXHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9jYXNlcy8nICsgY2FzZV9pZClcblx0Ly8gfVxuXG59XSkiLCIvKipcbiogSW5OZXQgTW9kdWxlXG4qXG4qIERlc2NyaXB0aW9uXG4qL1xuYW5ndWxhci5tb2R1bGUoJ0luTmV0Jylcbi5jb250cm9sbGVyKCdDYXNlQ3RybCcsIFsnJHNjb3BlJywnJHN0YXRlUGFyYW1zJywnJG1vZGFsJywnQ2FzZVN2YycsICckbG9nJywgJ1NvY2tldFN2YycsXG5cdGZ1bmN0aW9uICgkc2NvcGUgLCAkc3RhdGVQYXJhbXMsICRtb2RhbCwgQ2FzZVN2YywgJGxvZywgU29ja2V0U3ZjKSB7XG5cblx0JHNjb3BlLm1heFNpemUgPSA1O1xuXHQkc2NvcGUuYmlnVG90YWxJdGVtcyA9IDE3NTtcblx0JHNjb3BlLmJpZ0N1cnJlbnRQYWdlID0gMTtcblxuXHRDYXNlU3ZjLmZldGNoKCkuc3VjY2VzcyhmdW5jdGlvbihjYXNlcyl7XG5cdFx0JHNjb3BlLmNhc2VzID0gY2FzZXM7XG5cdH0pO1xuXG5cdFNvY2tldFN2Yy5vbignbmV3Q2FzZScsZnVuY3Rpb24oX2Nhc2Upe1xuXHRcdCRzY29wZS5jYXNlcy51bnNoaWZ0KF9jYXNlKTtcblx0fSk7XG5cblx0U29ja2V0U3ZjLm9uKCdjYXNlTW9kaWZpZWQnLGZ1bmN0aW9uKF9jYXNlKXtcblx0XHQkc2NvcGUuY2FzZXNbX2Nhc2UuY2FzZV9pZC0xXSA9IF9jYXNlO1xuXHR9KTtcblxuXHQkc2NvcGUuY2hvb3NlID0gZnVuY3Rpb24oaWQpe1xuXHRcdENhc2VTdmMuZmluZEJ5SWQoJHNjb3BlLmNhc2VzW2lkXS5faWQpLnN1Y2Nlc3MoZnVuY3Rpb24oX2Nhc2Upe1xuXHRcdFx0XHQkc2NvcGUuY2FzZURldGFpbHMgPSBfY2FzZTtcblx0XHR9KTtcblx0fTtcblxuXHQkc2NvcGUuYWRkTmV3Q2FzZSA9IGZ1bmN0aW9uICgpIHtcblx0ICBcdHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xuXHRcdCAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2Nhc2UvY2FzZS5tb2RhbC5odG1sJyxcblx0XHQgICAgY29udHJvbGxlcjogJ0Nhc2VNb2RhbEN0cmwnLFxuXHRcdCAgICBzaXplOiBcImxnXCIsXG5cdFx0ICAgIHJlc29sdmUgOiB7XG5cdFx0ICAgIFx0Y2FzZUlkIDogZnVuY3Rpb24oKXtcblx0XHRcdCAgICBcdFx0aWYgKCBfLmlzRW1wdHkoJHNjb3BlLmNhc2VzKSkge1xuXHRcdFx0ICAgIFx0XHRcdHJldHVybiAwXG5cdFx0XHQgICAgXHRcdH0gZWxzZXtcblx0XHRcdCAgICBcdFx0XHRyZXR1cm4gJHNjb3BlLmNhc2VzWzBdLmNhc2VfaWQ7XG5cdFx0XHQgICAgXHRcdH07XG5cdFx0XHQgICAgfSxcblx0XHQgICAgXHRjYXNlRGV0YWlscyA6IGZ1bmN0aW9uKCl7XG5cdFx0ICAgIFx0XHRyZXR1cm4ge31cblx0XHQgICAgXHR9XG5cdFx0ICAgIH1cblx0ICAgIH0pO1xuXHQgICAgbW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihmdW5jdGlvbiAobXNnKSB7XG5cdCAgICAgIC8vICRzY29wZS5jYXNlcy51bnNoaWZ0KG5ld0Nhc2UpO1xuXHQgICAgICBjb25zb2xlLmxvZyhtc2cpO1xuXHQgICAgfSwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAkbG9nLmluZm8oJ01vZGFsIGRpc21pc3NlZCBhdDogJyArIG5ldyBEYXRlKCkpO1xuXHQgICAgfSk7XG5cdCB9O1xuXG5cdCAkc2NvcGUuZWRpdENhc2UgPSBmdW5jdGlvbihpZCl7XG5cdCBcdHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xuXHRcdCAgXHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2Nhc2UvY2FzZS5tb2RhbC5odG1sJyxcblx0XHQgICAgY29udHJvbGxlcjogJ0Nhc2VNb2RhbEN0cmwnLFxuXHRcdCAgICBzaXplOiBcImxnXCIsXG5cdFx0ICAgIHJlc29sdmUgOiB7XG5cdFx0ICAgIFx0Y2FzZUlkIDogZnVuY3Rpb24oKXtcblx0XHQgICAgXHRcdHJldHVybiBpZFxuXHRcdCAgICBcdH0sXG5cdFx0ICAgIFx0Y2FzZURldGFpbHMgOiBmdW5jdGlvbigpe1xuXHRcdCAgICBcdFx0cmV0dXJuICRzY29wZS5jYXNlRGV0YWlsc1xuXHRcdCAgICBcdH1cblx0XHQgICAgfVxuXHQgICAgfSk7XG5cdCB9O1xufV0pXG4iLCIvKipcbiogSW5OZXQgTW9kdWxlXG4qXG4qIERlc2NyaXB0aW9uXG4qL1xuYW5ndWxhci5tb2R1bGUoJ0luTmV0Jylcbi5jb250cm9sbGVyKCdDYXNlTW9kYWxDdHJsJywgWyckc2NvcGUnLCAnQ2FyU3ZjJywgJyRtb2RhbEluc3RhbmNlJywgJ0Nhc2VTdmMnLCckc3RhdGUnLCAnY2FzZUlkJywnY2FzZURldGFpbHMnLCAnU3RTdmMnLCAnJHdpbmRvdycsICdCcmFuY2hTdmMnLCAnVXNlclN2YycsXG5cdGZ1bmN0aW9uICgkc2NvcGUsIENhclN2YywgJG1vZGFsSW5zdGFuY2UsIENhc2VTdmMsICRzdGF0ZSwgY2FzZUlkLCBjYXNlRGV0YWlscywgU3RTdmMgLCAkd2luZG93LCBCcmFuY2hTdmMsIFVzZXJTdmMpIHtcblxuXHRpZiAoXy5pc0VtcHR5KGNhc2VEZXRhaWxzKSkge1xuXHRcdCRzY29wZS5pc05ldyA9IHRydWU7XG5cdFx0Y2FyT2JqcyA9IFtdO1xuXG5cdH1lbHNle1xuXHRcdCRzY29wZS5pc05ldyA9IGZhbHNlO1xuXHRcdHZhciBjYXJPYmpzID0gY2FzZURldGFpbHMuY2Fycztcblx0fVxuXG5cdEJyYW5jaFN2Yy5mZXRjaCgpLnN1Y2Nlc3MoZnVuY3Rpb24oYnJhbmNoZXMpe1xuXHQgICAgJHNjb3BlLmJyYW5jaGVzID0gYnJhbmNoZXM7XG5cdH0pO1xuXG5cdGZ1bmN0aW9uIGdldENhcnNEZXRhaWwob2JqKXtcblx0XHR2YXIgZGlzcGF0Y2hMaXN0ID0gW107XG5cdFx0dmFyIGNhcklkcyA9IFtdO1xuXHRcdHZhciBicmFuY2hlcyA9IFtdO1xuXG5cdFx0aWYgKG9iai5jYXJzKSB7XG5cdFx0XHRmb3IgKHZhciBpID0gb2JqLmNhcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdFx0ZGlzcGF0Y2hMaXN0LnB1c2gob2JqLmNhcnNbaV0ucmFkaW9Db2RlKTtcblx0XHRcdFx0Y2FySWRzLnB1c2gob2JqLmNhcnNbaV0uX2lkKTtcblx0XHRcdFx0YnJhbmNoZXMucHVzaChvYmouY2Fyc1tpXS5icmFuY2gpOyBcblx0XHRcdH07XG5cdFx0XHRyZXR1cm4ge2Rpc3BhdGNoTGlzdCA6IGRpc3BhdGNoTGlzdCAsIGNhcklkcyA6IGNhcklkcyAsIGJyYW5jaGVzIDogIGJyYW5jaGVzfVxuXG5cdFx0fWVsc2V7XG5cdFx0XHRyZXR1cm4ge307XG5cdFx0fTtcblx0fTtcblxuXHRmdW5jdGlvbiBnZXRCcmFuY2hJZChicmFuY2hlc0xpc3Qpe1xuXHRcdHZhciBicmFuY2hlcyA9IF8udW5pcXVlKGJyYW5jaGVzTGlzdCk7XG5cdFx0dmFyIGJyYW5jaElkcyA9IFtdO1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLmJyYW5jaGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAoYnJhbmNoZXMuaW5kZXhPZigkc2NvcGUuYnJhbmNoZXNbaV0ubmFtZSkgPiAtMSkge1xuXHRcdFx0XHRicmFuY2hJZHMucHVzaCgkc2NvcGUuYnJhbmNoZXNbaV0uX2lkKTtcblx0XHRcdH07XG5cdFx0fTtcblx0XHRyZXR1cm4gIGJyYW5jaElkcztcblx0fTtcblxuXHQkc2NvcGUuY2FzZU9iaiA9IHtcblx0XHRhZGRyZXNzIDogY2FzZURldGFpbHMuYWRkcmVzcyB8fCBudWxsLFxuXHRcdHBob25lIDogY2FzZURldGFpbHMucGhvbmUgfHwgbnVsbCxcblx0ICAgIHR5cGUgOiBjYXNlRGV0YWlscy50eXBlIHx8ICBcIueBq+itplwiLCBcblx0ICAgIHR5cGVzIDogWyBcIueBq+itplwiLCBcIuaVkeitt1wiLCBcIueBveWus1wiLCBcIuaqouiIiVwiLFwi5YW25LuWXCJdICxcblx0ICAgIGNhcklkcyA6IGdldENhcnNEZXRhaWwoY2FzZURldGFpbHMpLmNhcklkcyAgfHwgW10sXG5cdCAgICBkaXNwYXRjaExpc3QgOiBnZXRDYXJzRGV0YWlsKGNhc2VEZXRhaWxzKS5kaXNwYXRjaExpc3QgfHwgIFtdLFxuXHQgICAgYnJhbmNoZXMgOiBnZXRDYXJzRGV0YWlsKGNhc2VEZXRhaWxzKS5icmFuY2hlcyB8fCAgW11cblx0fTtcblxuXHQkc2NvcGUuZGlzcGF0Y2hMaXN0ID0gJHNjb3BlLmNhc2VPYmouZGlzcGF0Y2hMaXN0LmpvaW4oXCIgXCIpO1xuXG5cdCRzY29wZS5nZXRDYXJzID0gZnVuY3Rpb24oIGJyYW5jaCApe1xuXHRcdCBDYXJTdmMuZmluZEJ5QnJhbmNoKGJyYW5jaC5uYW1lKS5zdWNjZXNzKGZ1bmN0aW9uKGNhcnMpe1xuXHRcdCBcdGZvciAodmFyIGkgPSBjYXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0IFx0XHRpZiAoJHNjb3BlLmNhc2VPYmouY2FySWRzLmluZGV4T2YoY2Fyc1tpXS5faWQpID4gLTEgKSB7XG5cdFx0IFx0XHRcdGNhcnNbaV0uaXNDaGVja2VkID0gdHJ1ZTsgXG5cdFx0IFx0XHR9O1xuXHRcdCBcdH07XG5cdFx0IFx0JHNjb3BlLmNhcnMgPSBjYXJzO1xuXHRcdCB9KTtcblx0fTtcblxuXHQkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuXHRcdCRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuXHR9O1xuXG5cdCRzY29wZS5jYW5jZWxEaXNwYXRjaCA9IGZ1bmN0aW9uKGNhcil7XG5cdFx0Y2FyLmlzQ2hlY2tlZCA9IGZhbHNlO1xuXHRcdGNhck9ianMuc3BsaWNlKGNhck9ianMuaW5kZXhPZihjYXIpLDEpXG5cdFx0JHNjb3BlLmNhc2VPYmouY2FySWRzLnNwbGljZSgkc2NvcGUuY2FzZU9iai5kaXNwYXRjaExpc3QuaW5kZXhPZihjYXIuX2lkKSwxKTtcblx0XHQkc2NvcGUuY2FzZU9iai5kaXNwYXRjaExpc3Quc3BsaWNlKCRzY29wZS5jYXNlT2JqLmRpc3BhdGNoTGlzdC5pbmRleE9mKGNhci5yYWRpb0NvZGUpLDEpO1xuXHRcdCRzY29wZS5jYXNlT2JqLmJyYW5jaGVzLnNwbGljZSgkc2NvcGUuY2FzZU9iai5kaXNwYXRjaExpc3QuaW5kZXhPZihjYXIuYnJhbmNoKSwxKTtcblx0XHQkc2NvcGUuZGlzcGF0Y2hMaXN0ID0gJHNjb3BlLmNhc2VPYmouZGlzcGF0Y2hMaXN0LmpvaW4oXCIgXCIpO1xuXHR9O1xuXG5cdCRzY29wZS5kaXNwYXRjaCA9IGZ1bmN0aW9uKCBjYXIgKXtcblx0XHRjYXIuaXNDaGVja2VkID0gdHJ1ZTsgXG5cdFx0Y2FyT2Jqcy5wdXNoKGNhcik7XG5cdFx0JHNjb3BlLmNhc2VPYmouY2FySWRzLnB1c2goY2FyLl9pZCk7XG5cdFx0JHNjb3BlLmNhc2VPYmouZGlzcGF0Y2hMaXN0LnB1c2goY2FyLnJhZGlvQ29kZSk7XG5cdFx0JHNjb3BlLmNhc2VPYmouYnJhbmNoZXMucHVzaChjYXIuYnJhbmNoKTtcblx0XHQkc2NvcGUuZGlzcGF0Y2hMaXN0ID0gJHNjb3BlLmNhc2VPYmouZGlzcGF0Y2hMaXN0LmpvaW4oXCIgXCIpO1xuXHR9O1xuXG5cdCRzY29wZS5jbG9zZUNhc2UgPSBmdW5jdGlvbigpe1xuXHRcdFN0U3ZjLmNvdW50KGNhc2VEZXRhaWxzLl9pZCkuc3VjY2VzcyhmdW5jdGlvbih0b3RhbCl7XG5cdFx0XHRpZiAodG90YWwgPiAwICkge1xuXHRcdFx0XHQkd2luZG93LmFsZXJ0KFwi5bCa5pyJ6ZqK5ZOh5Zyo5a6J5YWo566h5Yi2XCIpXG5cdFx0XHR9ZWxzZXtcblx0XHRcdFx0Q2FzZVN2Yy5jbG9zZUNhc2Uoe1xuXHRcdFx0XHRcdGlkIDogY2FzZURldGFpbHMuX2lkLFxuXHRcdFx0XHRcdGlzT25nb2luZyA6IGZhbHNlXG5cdFx0XHRcdH0pLnN1Y2Nlc3MoZnVuY3Rpb24obXNnKXtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhtc2cpXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHQkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcblx0XHRcdFx0JHN0YXRlLnJlbG9hZCgpXG5cdFx0XHR9O1xuXHRcdH0pO1xuXHR9O1xuXG5cdCRzY29wZS5zYXZlID0gZnVuY3Rpb24oKXtcblx0XHRDYXNlU3ZjLmNyZWF0ZSh7XG5cdFx0XHRjYXNlX2lkICAgOiBjYXNlSWQgKyAxLCBcblx0XHRcdGFkZHJlc3MgICA6ICRzY29wZS5jYXNlT2JqLmFkZHJlc3MgfHwgXCLmuKzoqaZcIixcblx0XHRcdG9mZmljZXJSZWNlaXZlciA6IFVzZXJTdmMuY3VycmVudFVzZXIoKSB8fCAgXCLlionmm4nmm7xcIixcblx0XHRcdHR5cGUgICAgICA6ICRzY29wZS5jYXNlT2JqLnR5cGUgfHwgXCLmlZHorbdcIixcblx0XHRcdHBob25lICAgICA6ICRzY29wZS5jYXNlT2JqLnBob25lIHx8IFwi5ris6KmmXCIsXG5cdFx0XHRicmFuY2hlcyAgOiBfLnVuaXF1ZSgkc2NvcGUuY2FzZU9iai5icmFuY2hlcyksXG5cdFx0XHRicmFuY2hJZHMgOiBnZXRCcmFuY2hJZCgkc2NvcGUuY2FzZU9iai5icmFuY2hlcyksXG5cdCAgXHRcdGNhcnMgICAgICA6ICRzY29wZS5jYXNlT2JqLmNhcklkcyxcblx0XHRcdGlzT25nb2luZyA6IHRydWUsIFxuXHRcdH0pLnN1Y2Nlc3MoZnVuY3Rpb24obmV3Q2FzZSl7XG5cdFx0XHQkbW9kYWxJbnN0YW5jZS5jbG9zZShuZXdDYXNlKVxuXHRcdH0pO1xuXHR9O1xuXG5cdCRzY29wZS51cGRhdGUgPSBmdW5jdGlvbigpe1xuXHRcdHZhciBjb250ZW50ID0ge1xuXHRcdFx0aWQgOiBjYXNlRGV0YWlscy5faWQsXG5cdFx0XHRjYXNlX2lkICAgOiBjYXNlSWQsIFxuXHRcdFx0YWRkcmVzcyAgIDogJHNjb3BlLmNhc2VPYmouYWRkcmVzcyxcblx0XHRcdG9mZmljZXJSZWNlaXZlciA6IFVzZXJTdmMuY3VycmVudFVzZXIoKSB8fCBcIuWKieabieabvFwiLFxuXHRcdFx0dHlwZSAgICAgIDogJHNjb3BlLmNhc2VPYmoudHlwZSxcblx0XHRcdHBob25lICAgICA6ICRzY29wZS5jYXNlT2JqLnBob25lLFxuXHRcdFx0YnJhbmNoZXMgIDogXy51bmlxdWUoJHNjb3BlLmNhc2VPYmouYnJhbmNoZXMpLFxuXHRcdFx0YnJhbmNoSWRzIDogZ2V0QnJhbmNoSWQoJHNjb3BlLmNhc2VPYmouYnJhbmNoZXMpLFxuXHQgIFx0XHRjYXJzICAgICAgOiAkc2NvcGUuY2FzZU9iai5jYXJJZHMsXG5cdFx0XHRpc09uZ29pbmcgOiB0cnVlLCBcblx0XHR9O1xuXHRcdFxuXHRcdENhc2VTdmMudXBkYXRlKGNvbnRlbnQpO1xuXHRcdCRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuXHR9O1xufV0pOyIsIi8qKlxuKiBJbk5ldCBNb2R1bGVcbipcbiogRGVzY3JpcHRpb25cbiovXG5hbmd1bGFyLm1vZHVsZSgnSW5OZXQnKVxuLnNlcnZpY2UoJ0Nhc2VTdmMnLCBbJyRodHRwJyxmdW5jdGlvbiAoJGh0dHApIHtcblxuXHR0aGlzLmZldGNoID0gZnVuY3Rpb24oKXtcblx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2Nhc2VzJyk7XG5cdH07XG5cblx0dGhpcy5mZXRjaEFsbCA9IGZ1bmN0aW9uKCl7XG5cdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9jYXNlcy9kZXRhaWxzJyk7XG5cdH07XG5cblx0dGhpcy5mZXRjaFJlbGF0aXZlQ2FzZSA9IGZ1bmN0aW9uKGJyYW5jaCl7XG5cdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9jYXNlcy9icmFuY2g/YnJhbmNoPScgKyBicmFuY2ggKVxuXHR9XG5cblx0dGhpcy5mZXRjaERldGFpbHMgPSBmdW5jdGlvbiggY2FzZV9pZCl7XG5cdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9jYXNlcy9kZXRhaWxzLycgKyBjYXNlX2lkKTtcblx0fTtcblxuXHR0aGlzLmZpbmRCeUlkID0gZnVuY3Rpb24oIGNhc2VfaWQgKXtcblx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2Nhc2VzLycgKyBjYXNlX2lkICk7XG5cdH07XG5cblx0dGhpcy5jcmVhdGUgPSBmdW5jdGlvbihjYXNlX2luZm8pe1xuXHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2Nhc2VzJywgY2FzZV9pbmZvKTtcblx0fTtcblxuXHR0aGlzLnVwZGF0ZSA9IGZ1bmN0aW9uKHVwZGF0ZWRfY2FzZSl7XG5cdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9jYXNlcy8nICsgdXBkYXRlZF9jYXNlLmlkICwgdXBkYXRlZF9jYXNlKTtcblx0fTtcblxuXHR0aGlzLmRlbGV0ZSA9IGZ1bmN0aW9uKGNhc2VfaWQpe1xuXHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2Nhc2VzLycgKyBjYXNlX2lkKTtcblx0fTtcblxuXHR0aGlzLmNsb3NlQ2FzZSA9IGZ1bmN0aW9uKGRhdGEpe1xuXHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvY2FzZXMvY2xvc2U/aWQ9JyArIGRhdGEuaWQsIGRhdGEgKVxuXHR9XG59XSkiLCIvKipcbiogSW5OZXQgTW9kdWxlXG4qXG4qIERlc2NyaXB0aW9uXG4qL1xuYW5ndWxhci5tb2R1bGUoJ0luTmV0Jylcbi5jb250cm9sbGVyKCdEYXNoYm9hcmRDdHJsJywgWyckc2NvcGUnLCAnJGxvY2F0aW9uJywgJ1NvY2tldFN2YycsICdVc2VyU3ZjJywgJ0JyYW5jaFN2YycsXG5cdGZ1bmN0aW9uICgkc2NvcGUsICRsb2NhdGlvbiwgU29ja2V0U3ZjLCBVc2VyU3ZjLCBCcmFuY2hTdmMpIHtcblxuXHRcdEJyYW5jaFN2Yy5mZXRjaCgpLnN1Y2Nlc3MoZnVuY3Rpb24oYnJhbmNoZXMpe1xuXHRcdFx0JHNjb3BlLmJyYW5jaGVzID0gYnJhbmNoZXM7XG5cdFx0fSk7XG5cblx0XHRVc2VyU3ZjLmZldGNoT25saW5lVXNlcigpLnN1Y2Nlc3MoZnVuY3Rpb24odXNlcnMpe1xuXHRcdFx0JHNjb3BlLnVzZXJzID0gdXNlcnM7XG5cdFx0fSlcblxuXHRcdFNvY2tldFN2Yy5vbigndXNlckxvZ2luJyxmdW5jdGlvbih1c2VyKXtcblx0XHRcdCRzY29wZS51c2Vycy5wdXNoKHVzZXIpO1xuXHRcdH0pO1xuXG5cdFx0U29ja2V0U3ZjLm9uKCd1c2VyRGlzY29ubmVjdCcsZnVuY3Rpb24oZGlzY29ubmVjdFVzZXIpe1xuXHRcdFx0JHNjb3BlLnVzZXJzID0gJHNjb3BlLnVzZXJzLmZpbHRlcihmdW5jdGlvbih1c2VyKSB7XG5cdFx0XHRcdHJldHVybiB1c2VyLnVzZXJuYW1lICE9IGRpc2Nvbm5lY3RVc2VyLnVzZXJuYW1lXG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdFNvY2tldFN2Yy5vbigndXNlckxvZ291dCcsZnVuY3Rpb24obG9nb3V0VXNlcil7XG5cdFx0XHQkc2NvcGUudXNlcnMgPSAkc2NvcGUudXNlcnMuZmlsdGVyKGZ1bmN0aW9uKHVzZXIpIHtcblx0XHRcdFx0cmV0dXJuIHVzZXIudXNlcm5hbWUgIT0gbG9nb3V0VXNlci51c2VybmFtZVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHQkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgICAgIFNvY2tldFN2Yy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcblx0ICAgIH0pO1xuXG59XSkiLCIvKipcbiogSW5OZXQgTW9kdWxlXG4qXG4qIERlc2NyaXB0aW9uXG4qL1xuXG5cbmFuZ3VsYXIubW9kdWxlKCdJbk5ldCcpXG4uZGlyZWN0aXZlKCdtaW5pbWFsaXphU2lkZWJhcicsIFsgJyR0aW1lb3V0JywgZnVuY3Rpb24gKCR0aW1lb3V0KSB7XG5cdHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgIHRlbXBsYXRlOiAnPGEgY2xhc3M9XCJuYXZiYXItbWluaW1hbGl6ZSBtaW5pbWFsaXplLXN0eWwtMiBidG4gYnRuLXByaW1hcnlcIiBocmVmPVwiXCIgbmctY2xpY2s9XCJtaW5pbWFsaXplKClcIj48aSBjbGFzcz1cImZhIGZhLWJhcnNcIj48L2k+PC9hPicsXG4gICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uICgkc2NvcGUsICRlbGVtZW50KSB7XG4gICAgICAgICAgICAkc2NvcGUubWluaW1hbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkKFwiYm9keVwiKS50b2dnbGVDbGFzcyhcIm1pbmktbmF2YmFyXCIpO1xuICAgICAgICAgICAgICAgIGlmICghJCgnYm9keScpLmhhc0NsYXNzKCdtaW5pLW5hdmJhcicpIHx8ICQoJ2JvZHknKS5oYXNDbGFzcygnYm9keS1zbWFsbCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEhpZGUgbWVudSBpbiBvcmRlciB0byBzbW9vdGhseSB0dXJuIG9uIHdoZW4gbWF4aW1pemUgbWVudVxuICAgICAgICAgICAgICAgICAgICAkKCcjc2lkZS1tZW51JykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBGb3Igc21vb3RobHkgdHVybiBvbiBtZW51XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3NpZGUtbWVudScpLmZhZGVJbig1MDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCQoJ2JvZHknKS5oYXNDbGFzcygnZml4ZWQtc2lkZWJhcicpKXtcbiAgICAgICAgICAgICAgICAgICAgJCgnI3NpZGUtbWVudScpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjc2lkZS1tZW51JykuZmFkZUluKDUwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBhbGwgaW5saW5lIHN0eWxlIGZyb20ganF1ZXJ5IGZhZGVJbiBmdW5jdGlvbiB0byByZXNldCBtZW51IHN0YXRlXG4gICAgICAgICAgICAgICAgICAgICQoJyNzaWRlLW1lbnUnKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1dKVxuXG4uZGlyZWN0aXZlKCdzaWRlTmF2aWdhdGlvbicsIFsgJyR0aW1lb3V0JywgZnVuY3Rpb24oICR0aW1lb3V0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIC8vIENhbGwgdGhlIG1ldHNpTWVudSBwbHVnaW4gYW5kIHBsdWcgaXQgdG8gc2lkZWJhciBuYXZpZ2F0aW9uXG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGVsZW1lbnQubWV0aXNNZW51KCk7XG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn1dKVxuXG4uZGlyZWN0aXZlKCdpYm94VG9vbHMnLCBbICckdGltZW91dCcsZnVuY3Rpb24gKCR0aW1lb3V0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgc2NvcGU6IHRydWUsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvY29tbW9uL2lib3hfdG9vbHMuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uICgkc2NvcGUsICRlbGVtZW50KSB7XG4gICAgICAgICAgICAvLyBGdW5jdGlvbiBmb3IgY29sbGFwc2UgaWJveFxuICAgICAgICAgICAgJHNjb3BlLnNob3doaWRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBpYm94ID0gJGVsZW1lbnQuY2xvc2VzdCgnZGl2Lmlib3gnKTtcbiAgICAgICAgICAgICAgICB2YXIgaWNvbiA9ICRlbGVtZW50LmZpbmQoJ2k6Zmlyc3QnKTtcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IGlib3guZmluZCgnZGl2Lmlib3gtY29udGVudCcpO1xuICAgICAgICAgICAgICAgIGNvbnRlbnQuc2xpZGVUb2dnbGUoMjAwKTtcbiAgICAgICAgICAgICAgICAvLyBUb2dnbGUgaWNvbiBmcm9tIHVwIHRvIGRvd25cbiAgICAgICAgICAgICAgICBpY29uLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLXVwJykudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tZG93bicpO1xuICAgICAgICAgICAgICAgIGlib3gudG9nZ2xlQ2xhc3MoJycpLnRvZ2dsZUNsYXNzKCdib3JkZXItYm90dG9tJyk7XG4gICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpYm94LnJlc2l6ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpYm94LmZpbmQoJ1tpZF49bWFwLV0nKS5yZXNpemUoKTtcbiAgICAgICAgICAgICAgICB9LCA1MCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC8vIEZ1bmN0aW9uIGZvciBjbG9zZSBpYm94XG4gICAgICAgICAgICAgICAgJHNjb3BlLmNsb3NlYm94ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaWJveCA9ICRlbGVtZW50LmNsb3Nlc3QoJ2Rpdi5pYm94Jyk7XG4gICAgICAgICAgICAgICAgICAgIGlib3gucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn1dKVxuXG4uZGlyZWN0aXZlKCdiYWNrJywgWyckd2luZG93JyAsIGZ1bmN0aW9uICgkd2luZG93KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBpRWxlbWVudCwgaUF0dHJzKSB7XG4gICAgICAgICAgICBpRWxlbWVudC5iaW5kKCdjbGljaycsZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAkd2luZG93Lmhpc3RvcnkuYmFjaygpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH07XG59XSlcbiIsIi8qKlxuKiBJbk5ldCBNb2R1bGVcbipcbiogRGVzY3JpcHRpb25cbiovXG5hbmd1bGFyLm1vZHVsZSgnSW5OZXQnKVxuLmNvbnRyb2xsZXIoJ0Rpc3BhdGNoQ3RybCcsIFsnJHNjb3BlJywnJHN0YXRlUGFyYW1zJywnJG1vZGFsJywnQ2FzZVN2YycsJ0JyYW5jaFN2YycsICdDYXJTdmMnLFxuXHRmdW5jdGlvbiAoJHNjb3BlICwgJHN0YXRlUGFyYW1zLCAkbW9kYWwsIENhc2VTdmMsIEJyYW5jaFN2YywgQ2FyU3ZjKSB7XG5cblx0Q2FzZVN2Yy5mZXRjaCgpLnN1Y2Nlc3MoZnVuY3Rpb24oY2FzZXMpe1xuXHRcdCRzY29wZS5jYXNlcyA9IGNhc2VzO1xuXHRcdENhc2VTdmMuZmluZEJ5SWQoJHNjb3BlLmNhc2VzWyRzdGF0ZVBhcmFtcy5jYXNlSWRdLl9pZCkuc3VjY2VzcyhmdW5jdGlvbihfY2FzZSl7XG5cdFx0XHRcdCRzY29wZS5jYXNlRGV0YWlscyA9IF9jYXNlXG5cdFx0fSlcblx0fSlcblxuXHRCcmFuY2hTdmMuZmV0Y2goKS5zdWNjZXNzKGZ1bmN0aW9uKGJyYW5jaGVzKXtcblx0ICAgICRzY29wZS5icmFuY2hMaXN0ID0gYnJhbmNoZXM7XG5cblx0IH0pXG5cblx0Q2FyU3ZjLmZldGNoKCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKXtcblx0ICAgICRzY29wZS5jYXJzRGF0YSA9IGRhdGFcblx0fSlcblxuXHQkc2NvcGUuYWRkTmV3Q2FzZSA9IGZ1bmN0aW9uICgpIHtcblx0ICBcdHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xuXHRcdCAgICB0ZW1wbGF0ZVVybDogJy9wYXJ0aWFscy9jYXNlUGFuZWwvY2FzZUFkZE1vZGFsJyxcblx0XHQgICAgY29udHJvbGxlcjogJ0Nhc2VBZGRNb2RhbEN0cmwnLFxuXHRcdCAgICBzaXplOiBcImxnXCIsXG5cdFx0ICAgIHJlc29sdmUgOiB7XG5cdFx0ICAgIFx0Y2FzZV9pZCA6IGZ1bmN0aW9uKCl7XG5cdFx0ICAgIFx0XHRyZXR1cm4gJHNjb3BlLmlkID0gXCLmlrDlop7moYjku7ZcIlxuXHRcdCAgICBcdH0sXG5cdFx0ICAgIFx0YnJhbmNoTGlzdCA6IGZ1bmN0aW9uKCl7XG5cdFx0ICAgIFx0XHRyZXR1cm4gJHNjb3BlLmJyYW5jaExpc3Rcblx0XHQgICAgXHR9LFxuXHRcdCAgICBcdGNhcnNEYXRhIDogZnVuY3Rpb24oKXtcblx0XHQgICAgXHRcdHJldHVybiAkc2NvcGUuY2Fyc0RhdGFcblx0XHQgICAgXHR9LFxuXHRcdCAgICBcdGlzTmV3IDogZnVuY3Rpb24oKXtcblx0XHQgICAgXHRcdHJldHVybiB0cnVlXG5cdFx0ICAgIFx0fSxcblx0XHQgICAgXHRjYXNlRGV0YWlscyA6IGZ1bmN0aW9uKCl7XG5cdFx0ICAgIFx0XHRyZXR1cm4ge31cblx0XHQgICAgXHR9XG5cdFx0ICAgIH1cblx0ICAgIH0pO1xuXHQgfTtcblxuXHQgJHNjb3BlLmVkaXRDYXNlID0gZnVuY3Rpb24oKXtcblx0IFx0dmFyIG1vZGFsSW5zdGFuY2UgPSAkbW9kYWwub3Blbih7XG5cdFx0ICAgIHRlbXBsYXRlVXJsOiAnL3BhcnRpYWxzL2Nhc2VQYW5lbC9jYXNlQWRkTW9kYWwnLFxuXHRcdCAgICBjb250cm9sbGVyOiAnQ2FzZUFkZE1vZGFsQ3RybCcsXG5cdFx0ICAgIHNpemU6IFwibGdcIixcblx0XHQgICAgcmVzb2x2ZSA6IHtcblx0XHQgICAgXHRjYXNlX2lkIDogZnVuY3Rpb24oKXtcblx0XHQgICAgXHRcdHJldHVybiAkc2NvcGUuaWQgPSAkc2NvcGUuY2FzZXNbJHN0YXRlUGFyYW1zLmNhc2VJZF0uY2FzZV9pZCBcblx0XHQgICAgXHR9LFxuXHRcdCAgICBcdGJyYW5jaExpc3QgOiBmdW5jdGlvbigpe1xuXHRcdCAgICBcdFx0cmV0dXJuICRzY29wZS5icmFuY2hMaXN0XG5cdFx0ICAgIFx0fSxcblx0XHQgICAgXHRjYXJzRGF0YSA6IGZ1bmN0aW9uKCl7XG5cdFx0ICAgIFx0XHRmb3IgKHZhciBpID0gJHNjb3BlLmNhcnNEYXRhLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0ICAgIFx0XHRcdGZvciAodmFyIGogPSAkc2NvcGUuY2FzZURldGFpbHMuY2Fycy5sZW5ndGggLSAxOyBqID49IDA7IGotLSkge1xuXHRcdCAgICBcdFx0XHRcdGlmICggJHNjb3BlLmNhcnNEYXRhW2ldLnJhZGlvQ29kZSA9PT0gJHNjb3BlLmNhc2VEZXRhaWxzLmNhcnNbal0ucmFkaW9fY29kZSkge1xuXHRcdCAgICBcdFx0XHRcdFx0JHNjb3BlLmNhcnNEYXRhW2ldLmlzQ2hlY2tlZCA9IHRydWUgXG5cdFx0ICAgIFx0XHRcdFx0fTtcblx0XHQgICAgXHRcdFx0fTtcdFx0ICAgIFx0XHRcdFxuXHRcdCAgICBcdFx0fTtcblx0XHQgICAgXHRcdHJldHVybiAkc2NvcGUuY2Fyc0RhdGFcblx0XHQgICAgXHR9LFxuXHRcdCAgICBcdGlzTmV3IDogZnVuY3Rpb24oKXtcblx0XHQgICAgXHRcdHJldHVybiBmYWxzZSBcblx0XHQgICAgXHR9LFxuXHRcdCAgICBcdGNhc2VEZXRhaWxzIDogZnVuY3Rpb24oKXtcblx0XHQgICAgXHRcdHJldHVybiAkc2NvcGUuY2FzZURldGFpbHNcblx0XHQgICAgXHR9XG5cdFx0ICAgIH1cblx0ICAgIH0pO1xuXHQgfTtcblxufV0pIiwiLyoqXG4qIEluTmV0IE1vZHVsZVxuKlxuKiBEZXNjcmlwdGlvblxuKi9cbmFuZ3VsYXIubW9kdWxlKCdJbk5ldCcpXG4uY29udHJvbGxlcignRHV0eUxpc3RDdHJsJywgWyckc2NvcGUnLCAnQnJhbmNoU3ZjJywgJyRzdGF0ZVBhcmFtcycsICdTb2NrZXRTdmMnLCAnVXNlclN2YycsXG5cdGZ1bmN0aW9uICgkc2NvcGUsIEJyYW5jaFN2YywgJHN0YXRlUGFyYW1zLCBTb2NrZXRTdmMsIFVzZXJTdmMpIHtcblxuXHRcdGlmIChVc2VyU3ZjLmFjY2Vzc0xldmVsKCkgPCAyICkge1xuXHRcdFx0dmFyIGJyYW5jaCA9IFVzZXJTdmMudXNlckJyYW5jaCgpO1xuXHRcdH0gZWxzZXtcblx0XHRcdHZhciBicmFuY2ggPSAkc3RhdGVQYXJhbXMuYnJhbmNoXG5cdFx0fTtcblx0XHRcblx0XHRCcmFuY2hTdmMudG90YWxMaXN0RmluZEJ5TmFtZShicmFuY2gpLnN1Y2Nlc3MoZnVuY3Rpb24oYnJhbmNoKXtcblx0XHRcdGNvbnNvbGUubG9nKGJyYW5jaCk7XG5cdFx0XHQkc2NvcGUuYnJhbmNoID0gYnJhbmNoO1xuXHRcdFx0JHNjb3BlLm9uRHV0eVRvdGFsID0gdG90YWxDb3VudCgkc2NvcGUuYnJhbmNoKVxuXHRcdH0pO1xuXG5cdFx0ZnVuY3Rpb24gdG90YWxDb3VudChvYmope1xuXHRcdFx0dmFyIHRvdGFsID0gMDtcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLm1lbWJlcnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aWYgKG9iai5tZW1iZXJzW2ldLm9uRHV0eSkge1xuXHRcdFx0XHRcdHRvdGFsICs9IDE7IFxuXHRcdFx0XHR9O1xuXHRcdFx0fTtcblx0XHRcdHJldHVybiB0b3RhbFxuXHRcdH07XG59XSkiLCIvKipcbiogSW5OZXQgTW9kdWxlXG4qXG4qIERlc2NyaXB0aW9uXG4qL1xuYW5ndWxhci5tb2R1bGUoJ0luTmV0Jylcbi5jb250cm9sbGVyKCdEdXR5TGlzdEVkaXRDdHJsJywgWyckc2NvcGUnLCAnQnJhbmNoU3ZjJywgJyRzdGF0ZVBhcmFtcycsJ01lbWJlclN2YycsICckbG9jYXRpb24nLCAnJHdpbmRvdycsICdVc2VyU3ZjJyxcblx0ZnVuY3Rpb24gKCRzY29wZSwgQnJhbmNoU3ZjLCAkc3RhdGVQYXJhbXMsIE1lbWJlclN2YywgJGxvY2F0aW9uLCAkd2luZG93LCBVc2VyU3ZjKSB7XG5cblx0XHRpZiAoVXNlclN2Yy5hY2Nlc3NMZXZlbCgpIDwgMiApIHtcblx0XHRcdHZhciBicmFuY2ggPSBVc2VyU3ZjLnVzZXJCcmFuY2goKTtcblx0XHR9IGVsc2V7XG5cdFx0XHR2YXIgYnJhbmNoID0gJHN0YXRlUGFyYW1zLmJyYW5jaFxuXHRcdH07XG5cblx0XHRCcmFuY2hTdmMudG90YWxMaXN0RmluZEJ5TmFtZShicmFuY2gpLnN1Y2Nlc3MoZnVuY3Rpb24oYnJhbmNoKXtcblx0XHRcdCRzY29wZS5icmFuY2ggPSBicmFuY2g7XG5cdFx0XHQkc2NvcGUub25EdXR5VG90YWwgPSAwO1xuXHRcdH0pO1xuXG5cdFx0JHNjb3BlLmNoZWNrID0gZnVuY3Rpb24obWVtYmVyKXtcblx0XHRcdG1lbWJlci5vbkR1dHkgPSAhbWVtYmVyLm9uRHV0eVxuXHRcdH07XG5cblx0XHQkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uKCl7XG5cdFx0XHRCcmFuY2hTdmMudXBkYXRlRGlyZWN0b3Ioe1xuXHRcdFx0XHRicmFuY2ggICA6ICRzY29wZS5icmFuY2gubmFtZSxcblx0XHRcdFx0ZGlyZWN0b3IgOiAkc2NvcGUuYnJhbmNoLmRpcmVjdG9yXG5cdFx0XHR9KS5zdWNjZXNzKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLmJyYW5jaC5tZW1iZXJzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0TWVtYmVyU3ZjLnVwZGF0ZUJ5TWVtYmVySWQoe1xuXHRcdFx0XHRcdFx0bmFtZSBcdDogJHNjb3BlLmJyYW5jaC5tZW1iZXJzW2ldLm5hbWUsXG5cdFx0XHRcdFx0XHR0aXRsZSAgIDogJHNjb3BlLmJyYW5jaC5tZW1iZXJzW2ldLnRpdGxlLFxuXHRcdFx0XHRcdFx0bWVtYmVySWQgOiAkc2NvcGUuYnJhbmNoLm1lbWJlcnNbaV0uX2lkLFxuXHRcdFx0XHRcdFx0b25EdXR5IDogJHNjb3BlLmJyYW5jaC5tZW1iZXJzW2ldLm9uRHV0eSxcblx0XHRcdFx0XHRcdG1pc3Npb24gOiAgJHNjb3BlLmJyYW5jaC5tZW1iZXJzW2ldLm1pc3Npb25cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fTtcblx0XHRcdH0pLnRoZW4oZnVuY3Rpb24oKXtcblx0XHRcdFx0JHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcblx0XHRcdH0pO1xuXHRcdH07XG5cdFxufV0pIiwiLyoqXG4qIEluTmV0IE1vZHVsZVxuKlxuKiBEZXNjcmlwdGlvblxuKi9cbmFuZ3VsYXIubW9kdWxlKCdJbk5ldCcpXG4uc2VydmljZSgnR2VvU3ZjJywgWyAnJHEnLCBmdW5jdGlvbiAoICRxICkge1xuXG5cdHRoaXMuZ2V0R2VvbG9jYXRpb25Db29yZGluYXRlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKFxuICAgICAgICAgICAgZnVuY3Rpb24ocG9zaXRpb24pIHsgZGVmZXJyZWQucmVzb2x2ZShwb3NpdGlvbi5jb29yZHMpOyB9LFxuICAgICAgICAgICAgZnVuY3Rpb24oZXJyb3IpIHsgZGVmZXJyZWQucmVzb2x2ZShudWxsKTsgfVxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9O1xuXG5cdFxufV0pIiwiLyoqXG4qIEluTmV0IE1vZHVsZVxuKlxuKiBEZXNjcmlwdGlvblxuKi9cbmFuZ3VsYXIubW9kdWxlKCdJbk5ldCcpXG4uY29udHJvbGxlcignTG9naW5DdHJsJywgWyckc2NvcGUnLCdVc2VyU3ZjJywgJ3N0b3JlJywgJyRzdGF0ZScsJ2p3dEhlbHBlcicsJyRodHRwJywgJ1NvY2tldFN2YycsXG5cdGZ1bmN0aW9uICgkc2NvcGUsIFVzZXJTdmMsIHN0b3JlLCAkc3RhdGUsIGp3dEhlbHBlciwgJGh0dHAsIFNvY2tldFN2Yykge1xuXG5cdHZhciB0b2tlbiA9IG51bGw7XG5cdCRzY29wZS51c2VyID0ge307XG5cdCRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uKCl7XG5cdFx0VXNlclN2Yy5sb2dpbigkc2NvcGUudXNlcikuc3VjY2VzcyhmdW5jdGlvbihkYXRhKXtcblx0XHRcdGlmIChkYXRhLnN1Y2Nlc3MpIHtcblx0XHRcdFx0c3RvcmUuc2V0KCdqd3QnLCBkYXRhLnRva2VuKTtcblx0XHRcdFx0JGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ3gtYWNjZXNzLXRva2VuJ10gPSBkYXRhLnRva2VuO1xuXHRcdFx0XHR0b2tlbiA9IGRhdGEudG9rZW47XG5cdFx0XHR9ZWxzZXtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJwYXNzd29yZCBpcyBub3QgZXhpc3RlZCFcIik7XG5cdFx0XHR9O1xuXHRcdH0pLnRoZW4oZnVuY3Rpb24oKXtcblx0XHRcdFNvY2tldFN2Yy5pbml0KHRva2VuKTtcblx0XHRcdFNvY2tldFN2Yy5lbWl0KCdsb2dpbicpO1xuXHRcdH0pXG5cdFx0LnRoZW4oZnVuY3Rpb24oKXtcblx0XHRcdGlmIChqd3RIZWxwZXIuZGVjb2RlVG9rZW4odG9rZW4pLnJvbGUgPT0gXCJhZG1pblwiKSB7XG5cdFx0XHRcdCRzdGF0ZS5nbygnZHV0eURlc2suZGFzaGJvYXJkJylcblx0XHRcdH1lbHNle1xuXHRcdFx0XHQkc3RhdGUuZ28oJ2RpcmVjdG9yLnNhZmV0eS5pbmRleCcpXG5cdFx0XHR9XG5cdFx0fSlcblx0fTtcbn1dKSIsIi8qKlxuKiBJbk5ldCBNb2R1bGVcbipcbiogRGVzY3JpcHRpb25cbiovXG5hbmd1bGFyLm1vZHVsZSgnSW5OZXQnKVxuLmNvbnRyb2xsZXIoJ01hcEluZGV4Q3RybCcsIFsnJHNjb3BlJywgJ2xlYWZsZXREYXRhJywgJ0dlb1N2YycsXG4gICAgZnVuY3Rpb24gKCRzY29wZSwgbGVhZmxldERhdGEsIEdlb1N2Yykge1xuICAgICAgICBcbiAgICBHZW9TdmMuZ2V0R2VvbG9jYXRpb25Db29yZGluYXRlcygpLnRoZW4oZnVuY3Rpb24oY29vcmQpe1xuICAgICAgICAkc2NvcGUubm93UG9zLmxhdCA9IGNvb3JkLmxhdGl0dWRlO1xuICAgICAgICAkc2NvcGUubm93UG9zLmxuZyA9IGNvb3JkLmxvbmdpdHVkZTtcbiAgICAgICAgJHNjb3BlLm5vd1Bvcy56b29tID0gMTc7XG4gICAgfSlcblxuICAgIGFuZ3VsYXIuZXh0ZW5kKCRzY29wZSwge1xuICAgICAgICBub3dQb3M6IHtcbiAgICAgICAgICAgIGxhdDogMjQuOTg4LFxuICAgICAgICAgICAgbG5nOiAxMjEuNTc1MixcbiAgICAgICAgICAgIHpvb206IDE3XG4gICAgICAgIH0sXG4gICAgICAgIGNvbnRyb2xzOiB7XG4gICAgICAgICAgICBkcmF3OiB7fVxuICAgICAgICB9XG4gICAgfSlcblxuICAgIGxlYWZsZXREYXRhLmdldE1hcCgpLnRoZW4oZnVuY3Rpb24obWFwKSB7XG4gICAgICB2YXIgZHJhd25JdGVtcyA9ICRzY29wZS5jb250cm9scy5lZGl0LmZlYXR1cmVHcm91cDtcbiAgICAgIG1hcC5vbignZHJhdzpjcmVhdGVkJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIGxheWVyID0gZS5sYXllcjtcbiAgICAgICAgZHJhd25JdGVtcy5hZGRMYXllcihsYXllcik7XG4gICAgICAgIFxuICAgICAgICBGZWF0dXJlQ29sbGVjdGlvbnMucHVzaChsYXllci50b0dlb0pTT04oKSlcbiAgICAgICAgXG4gICAgICB9KTtcbiAgICB9KVxuXG5cdFxufV0pIiwiLyoqXG4qIEluTmV0IE1vZHVsZVxuKlxuKiBEZXNjcmlwdGlvblxuKi9cbmFuZ3VsYXIubW9kdWxlKCdJbk5ldCcpXG4uY29udHJvbGxlcignTWVtYmVyQ3RybCcsIFsnJHNjb3BlJywgJ01lbWJlclN2YycsICckc3RhdGVQYXJhbXMnLFxuXHRmdW5jdGlvbiAoJHNjb3BlLCBNZW1iZXJTdmMsICRzdGF0ZVBhcmFtcykge1xuXG5cdFx0JHNjb3BlLmJyYW5jaCA9ICRzdGF0ZVBhcmFtcy5icmFuY2g7XG5cblx0XHRNZW1iZXJTdmMuZmluZEJ5QnJhbmNoKCRzdGF0ZVBhcmFtcy5icmFuY2gpLnN1Y2Nlc3MoZnVuY3Rpb24obWVtYmVycyl7XG5cdFx0XHQkc2NvcGUubWVtYmVycyA9IG1lbWJlcnM7XG5cdFx0fSk7XG59XSkiLCJhbmd1bGFyLm1vZHVsZSgnSW5OZXQnKVxuLmNvbnRyb2xsZXIoJ01lbWJlckVkaXRDdHJsJywgWyckc2NvcGUnLCAnTWVtYmVyU3ZjJywgJ0JyYW5jaFN2YycsICckc3RhdGVQYXJhbXMnLCAnJHdpbmRvdycsJyRtb2RhbCcsXG5cdGZ1bmN0aW9uICgkc2NvcGUsIE1lbWJlclN2YywgQnJhbmNoU3ZjLCAkc3RhdGVQYXJhbXMsICR3aW5kb3csICRtb2RhbCkge1xuXG5cdFx0JHNjb3BlLmlzRGVsZXRlZCA9IGZhbHNlO1xuXHRcdFxuXHRcdE1lbWJlclN2Yy5maW5kQnlCcmFuY2goJHN0YXRlUGFyYW1zLmJyYW5jaCkuc3VjY2VzcyhmdW5jdGlvbihtZW1iZXJzKXtcblx0XHRcdCRzY29wZS5tZW1iZXJzID0gbWVtYmVycztcblx0XHR9KTtcblxuXHRcdCRzY29wZS5zYXZlID0gZnVuY3Rpb24oKXtcblx0XHRcdHZhciBtZW1iZXJJZHMgPSBbXTtcblx0XHRcdHZhciBkaXJlY3RvcnMgPSBbXTtcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLm1lbWJlcnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0bWVtYmVySWRzLnB1c2goJHNjb3BlLm1lbWJlcnNbaV0uX2lkKTtcblx0XHRcdFx0ZGlyZWN0b3JzLnB1c2goJHNjb3BlLm1lbWJlcnNbaV0ubmFtZSk7XG5cdFx0XHRcdGlmICgkc2NvcGUubWVtYmVyc1tpXS50aXRsZSA9PSBcIuWIhumaiumVt1wiIHx8ICRzY29wZS5tZW1iZXJzW2ldLnRpdGxlID09IFwi5bCP6ZqK6ZW3XCIgfHwgJHNjb3BlLm1lbWJlcnNbaV0udGl0bGUgPT0gXCLkuK3pmorplbdcIiB8fCAkc2NvcGUubWVtYmVyc1tpXS50aXRsZSA9PSBcIuWkp+maiumVt1wiKSB7XG5cdFx0XHRcdFx0ZGlyZWN0b3IgPSAkc2NvcGUubWVtYmVyc1tpXS5uYW1lO1xuXHRcdFx0XHR9O1xuXHRcdFx0fTtcblxuXHRcdFx0QnJhbmNoU3ZjLnVwZGF0ZSh7XG5cdFx0XHRcdGJyYW5jaCA6ICRzdGF0ZVBhcmFtcy5icmFuY2gsXG5cdFx0XHRcdG1lbWJlcnMgOiBtZW1iZXJJZHMsXG5cdFx0XHRcdGRpcmVjdG9ycyA6IGRpcmVjdG9ycyxcblx0XHRcdFx0ZGlyZWN0b3IgOiBkaXJlY3RvclxuXHRcdFx0fSk7XG5cblx0XHRcdCAkd2luZG93Lmhpc3RvcnkuYmFjaygpO1xuXHRcdH07XG5cblx0XHQkc2NvcGUuYWRkTmV3TWVtYmVyID0gZnVuY3Rpb24oKXtcblx0XHRcdHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xuXHRcdFx0ICAgIHRlbXBsYXRlVXJsOiAndmlld3MvbWVtYmVyL21lbWJlci5tb2RhbC5odG1sJyxcblx0XHRcdCAgICBjb250cm9sbGVyOiAnTWVtYmVyTW9kYWxDdHJsJyxcblx0XHRcdCAgICBzaXplOiBcIm1kXCIsXG5cdFx0XHQgICAgcmVzb2x2ZSA6IHtcblx0XHRcdCAgICBcdGJyYW5jaCA6IGZ1bmN0aW9uKCl7XG5cdFx0XHQgICAgXHRcdHJldHVybiAkc3RhdGVQYXJhbXMuYnJhbmNoIFxuXHRcdFx0ICAgIFx0fSxcblx0XHRcdCAgICBcdG1lbWJlciA6IGZ1bmN0aW9uKCl7XG5cdFx0XHQgICAgXHRcdHJldHVybiB7fVxuXHRcdFx0ICAgIFx0fVxuXHRcdFx0ICAgIH1cblx0XHQgICAgfSk7XG5cdFx0fVxuXG5cdFx0JHNjb3BlLnVwZGF0ZSA9IGZ1bmN0aW9uKG1lbWJlcil7XG5cdFx0XHR2YXIgbW9kYWxJbnN0YW5jZSA9ICRtb2RhbC5vcGVuKHtcblx0XHRcdCAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL21lbWJlci9tZW1iZXIubW9kYWwuaHRtbCcsXG5cdFx0XHQgICAgY29udHJvbGxlcjogJ01lbWJlck1vZGFsQ3RybCcsXG5cdFx0XHQgICAgc2l6ZTogXCJtZFwiLFxuXHRcdFx0ICAgIHJlc29sdmUgOiB7XG5cdFx0XHQgICAgXHRicmFuY2ggOiBmdW5jdGlvbigpe1xuXHRcdFx0ICAgIFx0XHRyZXR1cm4gJHN0YXRlUGFyYW1zLmJyYW5jaCBcblx0XHRcdCAgICBcdH0sXG5cdFx0XHQgICAgXHRtZW1iZXIgOiBmdW5jdGlvbigpe1xuXHRcdFx0ICAgIFx0XHRyZXR1cm4gbWVtYmVyXG5cdFx0XHQgICAgXHR9XG5cdFx0XHQgICAgfVxuXHRcdCAgICB9KTtcblx0XHR9XG5cblx0XHQkc2NvcGUuZGVsZXRlID0gZnVuY3Rpb24oKXtcblx0XHRcdCRzY29wZS5pc0RlbGV0ZWQgPSB0cnVlOyBcblx0XHR9O1x0XG59XSkiLCIvKipcbiogSW5OZXQgTW9kdWxlXG4qXG4qIERlc2NyaXB0aW9uXG4qL1xuYW5ndWxhci5tb2R1bGUoJ0luTmV0Jylcbi5jb250cm9sbGVyKCdNZW1iZXJNb2RhbEN0cmwnLCBbJyRzY29wZScsICdicmFuY2gnLCAnTWVtYmVyU3ZjJywgJyRtb2RhbEluc3RhbmNlJywgJyRzdGF0ZScsICdtZW1iZXInLCdCcmFuY2hTdmMnLFxuXHRmdW5jdGlvbiAoJHNjb3BlLCBicmFuY2gsIE1lbWJlclN2YywgJG1vZGFsSW5zdGFuY2UsICRzdGF0ZSwgbWVtYmVyLCBCcmFuY2hTdmMgKSB7XG5cblx0JHNjb3BlLmlzTmV3ID0gXy5pc0VtcHR5KG1lbWJlcik7XG5cdFxuXHRCcmFuY2hTdmMuZmV0Y2goKVxuXHQuc3VjY2VzcyhmdW5jdGlvbihicmFuY2hlcyl7XG5cdFx0JHNjb3BlLmJyYW5jaGVzID0gYnJhbmNoZXMgXG5cdH0pXG5cdC50aGVuKGZ1bmN0aW9uKCl7XG5cdFx0dmFyIGJyYW5jaGVzTGlzdCA9IFtdO1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLmJyYW5jaGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRicmFuY2hlc0xpc3QucHVzaCgkc2NvcGUuYnJhbmNoZXNbaV0ubmFtZSk7XG5cdFx0fTtcblx0XHQkc2NvcGUubWVtYmVyID0ge1xuXHRcdFx0bmFtZSBcdDogbWVtYmVyLm5hbWUgfHwgXCLmlrDpgLLkurrlk6FcIiwgXG5cdFx0XHR0aXRsZSAgIDogbWVtYmVyLnRpdGxlLFxuXHRcdFx0dGl0bGVzICA6IFtcIumaiuWToVwiLFwi5bCP6ZqK6ZW3XCIsXCLliIbpmorplbdcIixcIuS4remaiumVt1wiLFwi5aSn6ZqK6ZW3XCIsXCLlia/lpKfpmorplbdcIl0sXG5cdFx0XHRicmFuY2ggIDogYnJhbmNoLFxuXHRcdFx0YnJhbmNoZXMgOiBicmFuY2hlc0xpc3QsXG5cdFx0XHRjb3JwIFx0OiBcIuesrOS4gOaVkeeBveaVkeitt+Wkp+mailwiLFxuXHRcdFx0Y29ycHMgXHQ6IFtcIuesrOS4gOaVkeeBveaVkeitt+Wkp+mailwiXSxcblx0XHR9O1xuXHR9KVxuXG5cdCRzY29wZS5zYXZlID0gZnVuY3Rpb24oKXtcblx0XHRNZW1iZXJTdmMuY3JlYXRlKHtcblx0XHRcdCAgb25EdXR5OiBcInRydWVcIixcblx0XHRcdCAgaWQ6IFwiXCIsXG5cdFx0XHQgIG5hbWU6ICRzY29wZS5tZW1iZXIubmFtZSB8fCBcIueOi+Wwj+aYjlwiLFxuXHRcdFx0ICBjb3JwOiAkc2NvcGUubWVtYmVyLmNvcnAsXG5cdFx0XHQgIGJyYW5jaDogJHNjb3BlLm1lbWJlci5icmFuY2gsXG5cdFx0XHQgIHRpdGxlOiAkc2NvcGUubWVtYmVyLnRpdGxlLFxuXHRcdFx0ICBpc0NoZWNrZWQ6IFwiZmFsc2VcIixcblx0XHRcdCAgbWlzc2lvbiA6IFwi556E5a2Q5omLXCIsXG5cdFx0XHQgIG1pc3Npb25zIDogW1wi556E5a2Q5omLXCIsXCLlia/nnoTlrZDmiYtcIixcIuWPuOapn1wiLFwi5bi26ZqK5a6YXCIsXCLlronlhajnrqHliLblk6FcIixcIuiBr+e1oeWumFwiXVxuXHRcdH0pO1xuXHRcdCRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuXHRcdCRzdGF0ZS5yZWxvYWQoKTtcblx0fTtcblxuXHQkc2NvcGUudXBkYXRlID0gZnVuY3Rpb24oKXtcblx0XHRNZW1iZXJTdmMudXBkYXRlQnlNZW1iZXJJZCh7XG5cdFx0XHQgIG1lbWJlcklkICA6IG1lbWJlci5faWQsXG5cdFx0XHQgIGlkIFx0XHQ6IFwiXCIsXG5cdFx0XHQgIG5hbWUgXHRcdDogJHNjb3BlLm1lbWJlci5uYW1lLFxuXHRcdFx0ICBjb3JwIFx0XHQ6ICRzY29wZS5tZW1iZXIuY29ycCxcblx0XHRcdCAgYnJhbmNoIFx0OiAkc2NvcGUubWVtYmVyLmJyYW5jaCxcblx0XHRcdCAgdGl0bGUgXHQ6ICRzY29wZS5tZW1iZXIudGl0bGUsXG5cdFx0XHQgIG1pc3Npb24gXHQ6IFwi556E5a2Q5omLXCIsXG5cdFx0XHQgIG1pc3Npb25zICA6IFtcIueehOWtkOaJi1wiLFwi5Ymv556E5a2Q5omLXCIsXCLlj7jmqZ9cIixcIuW4tumaiuWumFwiLFwi5a6J5YWo566h5Yi25ZOhXCIsXCLoga/ntaHlrphcIl1cblx0XHR9KTtcblx0XHQkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcblx0XHQkc3RhdGUucmVsb2FkKCk7XG5cdH07XG5cblx0JHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCl7XG5cdFx0JG1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XG5cdH07XG5cdFxufV0pIiwiLyoqXG4qIEluTmV0IE1vZHVsZVxuKlxuKiBEZXNjcmlwdGlvblxuKi9cbmFuZ3VsYXIubW9kdWxlKCdJbk5ldCcpXG4uc2VydmljZSgnTWVtYmVyU3ZjJywgWyckaHR0cCcsZnVuY3Rpb24gKCRodHRwKSB7XG5cblx0dGhpcy5mZXRjaCA9IGZ1bmN0aW9uKCl7XG5cdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9tZW1iZXJzJylcblx0fVxuXG5cdHRoaXMuZmluZEJ5QnJhbmNoID0gZnVuY3Rpb24oIGJyYW5jaCApe1xuXHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvbWVtYmVycy8nICsgYnJhbmNoIClcblx0fVxuXG5cdHRoaXMuZmV0Y2hPbkR1dHkgPSBmdW5jdGlvbihicmFuY2gpe1xuXHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvbWVtYmVycy9vbkR1dHk/YnJhbmNoPScgKyBicmFuY2gpO1xuXHR9XG5cblx0dGhpcy5jcmVhdGUgPSBmdW5jdGlvbihtZW1iZXIpe1xuXHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL21lbWJlcnMvJywgbWVtYmVyKVxuXHR9XG5cblx0dGhpcy51cGRhdGUgPSBmdW5jdGlvbihtZW1iZXIpe1xuXHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvbWVtYmVycy8nLCBtZW1iZXIuaWQpXG5cdH1cblxuXHR0aGlzLnVwZGF0ZUJ5TWVtYmVySWQgPSBmdW5jdGlvbih1cGRhdGVNZW1iZXIpe1xuXHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvbWVtYmVycy9maW5kQnlJZC8nICsgdXBkYXRlTWVtYmVyLm1lbWJlcklkICwgdXBkYXRlTWVtYmVyKVxuXHR9XG5cblx0dGhpcy51cGRhdGVJc0NoZWNrZWQgPSBmdW5jdGlvbihtZW1iZXJEYXRhKXtcblx0XHRyZXR1cm4gJGh0dHAucHV0KCcvYXBpL21lbWJlcnM/aWQ9JyArIG1lbWJlckRhdGEubWVtYmVySWQsIG1lbWJlckRhdGEpXG5cdH1cblxuXHR0aGlzLmRlbGV0ZSA9IGZ1bmN0aW9uKG1lbWJlcil7XG5cdFx0cmV0dXJuICRodHRwLmRlbGV0ZSgnL2FwaS9tZW1iZXJzLycgKyBtZW1iZXIuaWQpXG5cdH1cblxufV0pIiwiLyoqXG4qIEluTmV0IE1vZHVsZVxuKlxuKiBEZXNjcmlwdGlvblxuKi9cbmFuZ3VsYXIubW9kdWxlKCdJbk5ldCcpXG4uY29udHJvbGxlcignTmF2Q3RybCcsIFsnJHNjb3BlJywgJ0JyYW5jaFN2YycsICdzdG9yZScsICdqd3RIZWxwZXInLCAnVXNlclN2YycsXG5cdGZ1bmN0aW9uICgkc2NvcGUsIEJyYW5jaFN2Yywgc3RvcmUsIGp3dEhlbHBlciwgVXNlclN2Yykge1xuXG5cdCRzY29wZS51c2VybmFtZSA9IFVzZXJTdmMuY3VycmVudFVzZXIoKTtcblx0JHNjb3BlLmJyYW5jaCA9IFVzZXJTdmMudXNlckJyYW5jaCgpO1xuXG5cdCRzY29wZS5pc1ZhbGlkID0gZnVuY3Rpb24oYnJhbmNoKXtcblx0XHRpZiAoYnJhbmNoID09IFwi56ys5LiJ5pWR54G95pWR6K235aSn6ZqKXCIpIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1lbHNle1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0fTtcblxuXHRCcmFuY2hTdmMuZmV0Y2goKS5zdWNjZXNzKGZ1bmN0aW9uKGJyYW5jaGVzKXtcblx0XHQkc2NvcGUuYnJhbmNoZXMgPSBicmFuY2hlcztcblx0fSk7XG5cblx0JHNjb3BlLmlzVmFsaWQgPSBmdW5jdGlvbihicmFuY2gpe1xuXHRcdHJldHVybiBVc2VyU3ZjLmlzVmFsaWQoYnJhbmNoKTtcblx0fTtcblx0XG59XSk7IiwiLyoqXG4qIEluTmV0IE1vZHVsZVxuKlxuKiBEZXNjcmlwdGlvblxuKi9cbmFuZ3VsYXIubW9kdWxlKCdJbk5ldCcpXG4uY29uZmlnKFsgJyRzdGF0ZVByb3ZpZGVyJywnJHVybFJvdXRlclByb3ZpZGVyJywgJyRsb2NhdGlvblByb3ZpZGVyJywgXG4gICAgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG5cbiAgICAkdXJsUm91dGVyUHJvdmlkZXJcbiAgICAgICAgLm90aGVyd2lzZSgnL2xvZ2luJyk7XG5cbiAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAuc3RhdGUoJ2Fub24nLHtcbiAgICAgICAgICAgIHVybCA6IFwiXCIsXG4gICAgICAgICAgICBhYnN0cmFjdCA6IHRydWUsXG4gICAgICAgICAgICB0ZW1wbGF0ZSA6IFwiPHVpLXZpZXc+XCIsXG4gICAgICAgIH0pXG4gICAgICAgIC5zdGF0ZSgnYW5vbi5sb2dpbicse1xuICAgICAgICAgICAgdXJsIDogXCIvbG9naW5cIixcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsIDpcInZpZXdzL2xvZ2luLmh0bWxcIixcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBcIkxvZ2luQ3RybFwiLFxuICAgICAgICB9KVxuICAgICAgICAuc3RhdGUoJ2Fub24uNDA0Jyx7XG4gICAgICAgICAgICB1cmwgOiBcIi80MDRcIixcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogXCJ2aWV3cy80MDQuaHRtbFwiXG4gICAgICAgIH0pXG5cbiAgICAvLyBkdXR5IGRlc2sgXG5cdCRzdGF0ZVByb3ZpZGVyXG5cdFx0LnN0YXRlKCdkdXR5RGVzaycsIHtcbiAgICAgICAgICAgIGFic3RyYWN0OiB0cnVlLFxuICAgICAgICAgICAgdXJsOiBcIi9kdXR5RGVza1wiLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwidmlld3MvY29tbW9uL2NvbnRlbnQuaHRtbFwiLFxuICAgICAgICAgICAgZGF0YSA6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZExvZ2luIDogdHJ1ZSxcbiAgICAgICAgICAgICAgICByb2xlIDogW1wiYWRtaW5cIl1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLnN0YXRlKCdkdXR5RGVzay5kYXNoYm9hcmQnLCB7XG4gICAgICAgICAgICB1cmw6IFwiL2Rhc2hib2FyZFwiLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwidmlld3MvZGFzaGJvYXJkLmh0bWxcIixcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBcIkRhc2hib2FyZEN0cmxcIixcbiAgICAgICAgICAgIGRhdGEgOiB7XG4gICAgICAgICAgICAgICAgcmVxdWlyZWRMb2dpbiA6IHRydWUsXG4gICAgICAgICAgICAgICAgcm9sZSA6IFtcImFkbWluXCJdXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5zdGF0ZSgnZHV0eURlc2suY2FzZScsIHtcbiAgICAgICAgICAgIHVybDogXCIvY2FzZVwiLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwidmlld3MvY2FzZS9jYXNlLmluZGV4Lmh0bWxcIixcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBcIkNhc2VDdHJsXCIsXG4gICAgICAgIH0pXG4gICAgICAgIC5zdGF0ZSgnZHV0eURlc2suc2FmZXR5Jyx7XG4gICAgICAgICAgICB1cmwgOiBcIi9jYXNlLzppZFwiLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcInZpZXdzL3N1bW1hcnkvc3VtbWFyeS5pbmRleC5odG1sXCIsXG4gICAgICAgICAgICBjb250cm9sbGVyIDogXCJTdW1tYXJ5Q3RybFwiXG4gICAgICAgIH0pXG4gICAgICAgIC5zdGF0ZSgnZHV0eURlc2suZHV0eWxpc3QnLHtcbiAgICAgICAgICAgIGFic3RyYWN0IDogdHJ1ZSxcbiAgICAgICAgICAgIHRlbXBsYXRlIDogXCI8dWktdmlldz5cIlxuICAgICAgICB9KVxuICAgICAgICAuc3RhdGUoJ2R1dHlEZXNrLmR1dHlsaXN0LnNob3cnLCB7XG4gICAgICAgICAgICB1cmw6IFwiL2R1dHlsaXN0LzpicmFuY2hcIixcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInZpZXdzL2R1dHlsaXN0L2R1dHlsaXN0LmluZGV4Lmh0bWxcIixcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBcIkR1dHlMaXN0Q3RybFwiLFxuICAgICAgICB9KVxuICAgICAgICAuc3RhdGUoJ2R1dHlEZXNrLmR1dHlsaXN0LmVkaXQnLCB7XG4gICAgICAgICAgICB1cmw6IFwiL2R1dHlsaXN0LzpicmFuY2gvZWRpdFwiLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwidmlld3MvZHV0eWxpc3QvZHV0eWxpc3QuZWRpdC5odG1sXCIsXG4gICAgICAgICAgICBjb250cm9sbGVyIDogXCJEdXR5TGlzdEVkaXRDdHJsXCIsXG4gICAgICAgIH0pXG4gICAgICAgIC5zdGF0ZSgnZHV0eURlc2subWVtYmVyJyx7XG4gICAgICAgICAgICBhYnN0cmFjdCA6IHRydWUsXG4gICAgICAgICAgICB0ZW1wbGF0ZSA6IFwiPHVpLXZpZXc+XCJcbiAgICAgICAgfSlcbiAgICAgICAgLnN0YXRlKCdkdXR5RGVzay5tZW1iZXIuc2hvdycsIHtcbiAgICAgICAgICAgIHVybDogXCIvbWVtYmVyLzpicmFuY2hcIixcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInZpZXdzL21lbWJlci9tZW1iZXIuaW5kZXguaHRtbFwiLFxuICAgICAgICAgICAgY29udHJvbGxlciA6IFwiTWVtYmVyQ3RybFwiLFxuICAgICAgICB9KVxuICAgICAgICAuc3RhdGUoJ2R1dHlEZXNrLm1lbWJlci5lZGl0Jywge1xuICAgICAgICAgICAgdXJsOiBcIi9tZW1iZXIvOmJyYW5jaC9lZGl0XCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJ2aWV3cy9tZW1iZXIvbWVtYmVyLmVkaXQuaHRtbFwiLFxuICAgICAgICAgICAgY29udHJvbGxlciA6IFwiTWVtYmVyRWRpdEN0cmxcIixcbiAgICAgICAgfSlcbiAgICAgICAgLnN0YXRlKCdkdXR5RGVzay5sb2dpc3RpYycsIHtcbiAgICAgICAgICAgIHVybDogXCIvbG9naXN0aWNcIixcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInZpZXdzL2xvZ2lzdGljL2xvZ2lzdGljLmluZGV4Lmh0bWxcIixcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBcIkxvZ2lzdGljQ3RybFwiLFxuICAgICAgICB9KTtcbiAgICAvLyBkaXJlY3RvciBcbiAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAuc3RhdGUoJ2RpcmVjdG9yJyx7XG4gICAgICAgICAgICBhYnN0cmFjdCA6IHRydWUsXG4gICAgICAgICAgICB1cmwgOiBcIlwiLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcInZpZXdzL2RpcmVjdG9yL2RpcmVjdG9yLmNvbnRlbnQuaHRtbFwiLFxuICAgICAgICAgICAgZGF0YSA6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZExvZ2luIDogdHJ1ZSxcbiAgICAgICAgICAgICAgICByb2xlIDogW1widXNlclwiXVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuc3RhdGUoJ2RpcmVjdG9yLnNhZmV0eScse1xuICAgICAgICAgICAgYWJzdHJhY3QgOiB0cnVlLFxuICAgICAgICAgICAgdXJsIDogXCIvc2FmZXR5XCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZSA6IFwiPHVpLXZpZXc+XCIgXG4gICAgICAgIH0pXG4gICAgICAgIC5zdGF0ZSgnZGlyZWN0b3Iuc2FmZXR5LmluZGV4Jyx7XG4gICAgICAgICAgICB1cmwgOiBcIi9pbmRleFwiLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcInZpZXdzL3NhZmV0eS9zYWZldHkuaW5kZXguaHRtbFwiLFxuICAgICAgICAgICAgY29udHJvbGxlciA6IFwiU2FmZXR5SW5kZXhDdHJsXCJcbiAgICAgICAgfSlcblxuICAgICAgICAuc3RhdGUoJ2RpcmVjdG9yLnNhZmV0eS5tYW5hZ2VtZW50Jyx7XG4gICAgICAgICAgICB1cmwgOiBcIi9pbmRleC86aWRcIixcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogXCJ2aWV3cy9zYWZldHkvc2FmZXR5Lm1hbmFnZS5odG1sXCIsXG4gICAgICAgICAgICBjb250cm9sbGVyIDogXCJTYWZldHlNYW5hZ2VDdHJsXCIgICAgICAgICBcbiAgICAgICAgfSlcblxuICAgICAgICAuc3RhdGUoJ2RpcmVjdG9yLnNhZmV0eS5zdW1tYXJ5Jyx7XG4gICAgICAgICAgICB1cmwgOiBcIi9zdW1tYXJ5LzppZFwiLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcInZpZXdzL3N1bW1hcnkvc3VtbWFyeS5pbmRleC5odG1sXCIsXG4gICAgICAgICAgICBjb250cm9sbGVyIDogXCJTdW1tYXJ5Q3RybFwiXG4gICAgICAgIH0pXG5cbiAgICAgICAgLnN0YXRlKCdkaXJlY3Rvci5tYXAnLHtcbiAgICAgICAgICAgIHVybCA6IFwiL21hcFwiLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcInZpZXdzL21hcC9tYXAuaW5kZXguaHRtbFwiLFxuICAgICAgICAgICAgY29udHJvbGxlciA6IFwiTWFwSW5kZXhDdHJsXCJcbiAgICAgICAgfSlcblxuICAgICAgICAuc3RhdGUoJ2RpcmVjdG9yLmR1dHlsaXN0Jyx7XG4gICAgICAgICAgICBhYnN0cmFjdCA6IHRydWUsXG4gICAgICAgICAgICB1cmwgOiBcIi9kdXR5bGlzdFwiLFxuICAgICAgICAgICAgdGVtcGxhdGUgOiBcIjx1aS12aWV3PlwiIFxuICAgICAgICB9KVxuXG4gICAgICAgIC5zdGF0ZSgnZGlyZWN0b3IuZHV0eWxpc3QuaW5kZXgnLHtcbiAgICAgICAgICAgIHVybCA6IFwiL2luZGV4XCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJ2aWV3cy9kdXR5bGlzdC9kaXJlY3Rvci5kdXR5bGlzdC5pbmRleC5odG1sXCIsXG4gICAgICAgICAgICBjb250cm9sbGVyIDogXCJEdXR5TGlzdEN0cmxcIixcbiAgICAgICAgfSlcblxuICAgICAgICAuc3RhdGUoJ2RpcmVjdG9yLmR1dHlsaXN0LmVkaXQnLHtcbiAgICAgICAgICAgIHVybCA6IFwiL2VkaXRcIixcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInZpZXdzL2R1dHlsaXN0L2RpcmVjdG9yLmR1dHlsaXN0LmVkaXQuaHRtbFwiLFxuICAgICAgICAgICAgY29udHJvbGxlciA6IFwiRHV0eUxpc3RFZGl0Q3RybFwiLFxuICAgICAgICB9KVx0XG59XSlcblxuLnJ1bihbICckcm9vdFNjb3BlJywgJyRzdGF0ZScsICckc3RhdGVQYXJhbXMnLCAnc3RvcmUnLCAnand0SGVscGVyJywgJ1VzZXJTdmMnLCAnU29ja2V0U3ZjJyxcbiAgICBmdW5jdGlvbiAoICRyb290U2NvcGUsICRzdGF0ZSwgJHN0YXRlUGFyYW1zLCBzdG9yZSwgand0SGVscGVyLCBVc2VyU3ZjLCBTb2NrZXRTdmMpIHtcblxuICAgICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdGFydCcsZnVuY3Rpb24oZXZlbnQsIHRvU3RhdGUsIHRvUGFyYW1zLCBmcm9tU3RhdGUsIGZyb21QYXJhbXMpe1xuXG4gICAgICAgIGlmICh0b1N0YXRlLm5hbWUgPT0gXCJhbm9uLmxvZ2luXCIpIHtcbiAgICAgICAgICAgIHN0b3JlLnJlbW92ZSgnand0Jyk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgaWYgKHRvU3RhdGUuZGF0YSAmJiB0b1N0YXRlLmRhdGEucmVxdWlyZWRMb2dpbikge1xuXG4gICAgICAgICAgICAgICAgaWYgKCFVc2VyU3ZjLmlzTG9nZ2VkSW4oKSkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2Fub24ubG9naW4nKTtcbiAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRvU3RhdGUuZGF0YS5yb2xlLmluZGV4T2Yoand0SGVscGVyLmRlY29kZVRva2VuKHN0b3JlLmdldCgnand0JykpLnJvbGUpID09IC0xICkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oXCJhbm9uLmxvZ2luXCIpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH07IFxuICAgICAgICB9XG5cbiAgICB9KTtcblxuICAgICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VFcnJvcicsZnVuY3Rpb24oZXZlbnQpe1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xufV0pIiwiLyoqXG4qIEluTmV0IE1vZHVsZVxuKlxuKiBEZXNjcmlwdGlvblxuKi9cbmFuZ3VsYXIubW9kdWxlKCdJbk5ldCcpXG4uY29udHJvbGxlcignU2FmZXR5SW5kZXhDdHJsJywgWyckc2NvcGUnLCAnQ2FzZVN2YycsICdVc2VyU3ZjJywgJ1NvY2tldFN2YycsICckcm9vdFNjb3BlJyxcblx0ZnVuY3Rpb24gKCRzY29wZSwgQ2FzZVN2YywgVXNlclN2YywgU29ja2V0U3ZjLCAkcm9vdFNjb3BlKSB7XG5cblx0XHRTb2NrZXRTdmMub24oJ25ld0Nhc2UnLGZ1bmN0aW9uKF9jYXNlKXtcblx0XHRcdCRzY29wZS5jYXNlcy5wdXNoKF9jYXNlKTtcblx0XHR9KTtcblxuXHRcdFNvY2tldFN2Yy5vbignY2FzZUNsb3NlJyxmdW5jdGlvbihkYXRhKXtcblx0XHRcdGlmICghZGF0YS5pc09uZ29pbmcpIHtcblx0XHRcdFx0JHNjb3BlLmNhc2VzID0gJHNjb3BlLmNhc2VzLmZpbHRlcihmdW5jdGlvbihfY2FzZSl7XG5cdFx0XHRcdFx0cmV0dXJuIF9jYXNlLl9pZCAhPSBkYXRhLmNhc2VJZFxuXHRcdFx0XHR9KVxuXHRcdFx0fTtcblx0XHR9KTtcblxuXHRcdENhc2VTdmMuZmV0Y2hSZWxhdGl2ZUNhc2UoVXNlclN2Yy51c2VyQnJhbmNoKCkpLnN1Y2Nlc3MoZnVuY3Rpb24oY2FzZXMpe1xuXHRcdFx0JHNjb3BlLmNhc2VzID0gY2FzZXM7XG5cdFx0fSk7XG5cblx0XHQkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgICAgIFNvY2tldFN2Yy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcblx0ICAgIH0pXG5cblx0XHRcbn1dKSIsIi8qKlxuKiBJbk5ldCBNb2R1bGVcbipcbiogRGVzY3JpcHRpb25cbiovXG5hbmd1bGFyLm1vZHVsZSgnSW5OZXQnKVxuLmNvbnRyb2xsZXIoJ1NhZmV0eU1hbmFnZUN0cmwnLCBbJyRzY29wZScsJyRzdGF0ZVBhcmFtcycsICckbW9kYWwnLCAnU3RTdmMnLCAnJHN0YXRlJywgJ01lbWJlclN2YycsJyRsb2cnLCAnVXNlclN2YycsICdCcmFuY2hTdmMnLCAnU29ja2V0U3ZjJyxcblx0ZnVuY3Rpb24gKCRzY29wZSwgJHN0YXRlUGFyYW1zLCAkbW9kYWwsIFN0U3ZjLCAkc3RhdGUsIE1lbWJlclN2YywgJGxvZywgVXNlclN2YywgQnJhbmNoU3ZjLCBTb2NrZXRTdmMpIHtcblxuXHRcdHZhciBicmFuY2ggPSBVc2VyU3ZjLnVzZXJCcmFuY2goKTtcblxuXHRcdEJyYW5jaFN2Yy5mZXRjaEJ5TmFtZShicmFuY2gpLnN1Y2Nlc3MoZnVuY3Rpb24oZGV0YWlscyl7XG5cdFx0XHQkc2NvcGUuZGV0YWlscyA9IGRldGFpbHM7XG5cdFx0fSk7XG5cblx0XHRTdFN2Yy5mZXRjaCgkc3RhdGVQYXJhbXMuaWQsYnJhbmNoKS5zdWNjZXNzKGZ1bmN0aW9uKHN0cyl7XG5cdFx0XHQkc2NvcGUuc3RyaWtlVGVhbXMgPSBzdHM7XG5cdFx0fSk7XG5cblx0XHRTb2NrZXRTdmMub24oJ25ld1N0JywgZnVuY3Rpb24oc3Qpe1xuXHRcdFx0aWYgKGFuZ3VsYXIuZXF1YWxzKGJyYW5jaCxzdC5icmFuY2gpICYmIGFuZ3VsYXIuZXF1YWxzKCRzdGF0ZVBhcmFtcy5pZCxzdC5jYXNlSWQpICkge1xuXHRcdFx0XHQkc2NvcGUuc3RyaWtlVGVhbXMucHVzaChzdCk7XG5cdFx0XHR9O1xuXHRcdH0pO1xuXG5cdFx0U29ja2V0U3ZjLm9uKCd1cGRhdGVTdCcsIGZ1bmN0aW9uKGRhdGEpe1xuXHRcdFx0dmFyIG1lbWJlcnMgPSBhbmd1bGFyLmNvcHkoZGF0YS5tZW1iZXJzKTtcblx0XHRcdGZvciAodmFyIGkgPSAkc2NvcGUuc3RyaWtlVGVhbXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdFx0aWYoYW5ndWxhci5lcXVhbHMoJHNjb3BlLnN0cmlrZVRlYW1zW2ldLl9pZCxkYXRhLmlkKSl7XG5cdFx0XHRcdFx0JHNjb3BlLnN0cmlrZVRlYW1zW2ldLnBvc2l0aW9uID0gZGF0YS5wb3NpdGlvbjtcblx0XHRcdFx0XHQkc2NvcGUuc3RyaWtlVGVhbXNbaV0uYXJlYSA9IGRhdGEuYXJlYTtcblx0XHRcdFx0XHQkc2NvcGUuc3RyaWtlVGVhbXNbaV0ubWVtYmVycy5wdXNoLmFwcGx5KCRzY29wZS5zdHJpa2VUZWFtc1tpXS5tZW1iZXJzLCBtZW1iZXJzKTtcblx0XHRcdFx0fTtcblx0XHRcdH07XG5cdFx0fSlcblxuXHRcdFNvY2tldFN2Yy5vbignZGlzbWlzcycsIGZ1bmN0aW9uKHN0KXtcblx0XHRcdHZhciBfc3RJZCA9IHN0LnN0SWQ7XG5cdFx0XHQkc2NvcGUuc3RyaWtlVGVhbXMgPSAkc2NvcGUuc3RyaWtlVGVhbXMuZmlsdGVyKGZ1bmN0aW9uKHN0KSB7XHRcdFx0XHRcblx0XHRcdFx0cmV0dXJuIHN0Ll9pZCAhPSBfc3RJZDtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHRcdFxuXHRcdCRzY29wZS5zdHJpa2VUZWFtID0gZnVuY3Rpb24oKXtcblx0XHRcdHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xuXHRcdFx0ICBcdHRlbXBsYXRlVXJsOiAndmlld3Mvc2FmZXR5L3NhZmV0eS5tb2RhbC5odG1sJyxcblx0XHRcdCAgICBjb250cm9sbGVyOiAnU2FmZXR5TW9kYWxDdHJsJyxcblx0XHRcdCAgICBzaXplOiBcIm1kXCIsXG5cdFx0XHQgICAgcmVzb2x2ZSA6IHtcblx0XHRcdCAgICBcdHN0SWQgOiBmdW5jdGlvbigpe1xuXHRcdFx0ICAgIFx0XHRpZiAoIF8uaXNFbXB0eSgkc2NvcGUuc3RyaWtlVGVhbXMpKSB7XG5cdFx0XHQgICAgXHRcdFx0cmV0dXJuIDBcblx0XHRcdCAgICBcdFx0fSBlbHNle1xuXHRcdFx0ICAgIFx0XHRcdHJldHVybiAkc2NvcGUuc3RyaWtlVGVhbXNbJHNjb3BlLnN0cmlrZVRlYW1zLmxlbmd0aC0xXS5pZDtcblx0XHRcdCAgICBcdFx0fTtcblx0XHRcdCAgICBcdH1cblx0XHRcdCAgICB9XG5cdFx0ICAgIH0pO1xuXG5cdFx0ICAgIG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24gKHN0KSB7XG5cdFx0ICAgIFx0XG5cdFx0ICAgIH0sIGZ1bmN0aW9uICgpIHtcblx0XHQgICAgICAkbG9nLmluZm8oJ01vZGFsIGRpc21pc3NlZCBhdDogJyArIG5ldyBEYXRlKCkpO1xuXHRcdCAgICB9KTtcblx0XHR9O1xuXG5cdFx0JHNjb3BlLm9wZW5TZXR0aW5nTW9kYWwgPSBmdW5jdGlvbihzdHJpa2VUZWFtLCBpZCl7XG5cdCAgICAgICAgdmFyIG1vZGFsSW5zdGFuY2UgPSAkbW9kYWwub3Blbih7XG5cdCAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3Mvc2FmZXR5L3NhZmV0eS5zZXR0aW5nLm1vZGFsLmh0bWwnLFxuXHQgICAgICAgICAgICBjb250cm9sbGVyOiAnU2FmZXR5U2V0dGluZ0N0cmwnLFxuXHQgICAgICAgICAgICBzaXplOiBcImxnXCIsXG5cdCAgICAgICAgICAgIHJlc29sdmU6IHtcblx0ICAgICAgICAgICAgICAgIHN0cmlrZVRlYW0gOiBmdW5jdGlvbigpe1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHJpa2VUZWFtO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgbW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihmdW5jdGlvbiAodXBkYXRlZFN0KSB7XG5cdCAgICAgICAgXHRmb3IgKHZhciBpID0gJHNjb3BlLnN0cmlrZVRlYW1zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHRcdFx0aWYoYW5ndWxhci5lcXVhbHMoJHNjb3BlLnN0cmlrZVRlYW1zW2ldLl9pZCx1cGRhdGVkU3QuaWQpKXtcblx0XHRcdFx0XHRcdCRzY29wZS5zdHJpa2VUZWFtc1tpXS5wb3NpdGlvbiA9IHVwZGF0ZWRTdC5wb3NpdGlvbjtcblx0XHRcdFx0XHRcdCRzY29wZS5zdHJpa2VUZWFtc1tpXS5hcmVhID0gdXBkYXRlZFN0LmFyZWE7XG5cdFx0XHRcdFx0XHQkc2NvcGUuc3RyaWtlVGVhbXNbaV0ubWVtYmVycy5wdXNoLmFwcGx5KCRzY29wZS5zdHJpa2VUZWFtc1tpXS5tZW1iZXJzLCB1cGRhdGVkU3QubWVtYmVycyk7XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fTtcblxuXHRcdCAgICB9LCBmdW5jdGlvbiAoKSB7XG5cdFx0ICAgICAgJGxvZy5pbmZvKCdNb2RhbCBkaXNtaXNzZWQgYXQ6ICcgKyBuZXcgRGF0ZSgpKTtcblx0XHQgICAgfSk7XG5cdCAgICB9O1xuXG5cdFx0JHNjb3BlLmRpc21pc3MgPSBmdW5jdGlvbihzdHJpa2VUZWFtICwgaWQpe1xuXHRcdFx0XG5cdCAgICAgICBcdFN0U3ZjLmRpc21pc3NTdCh7XG5cdCAgICAgICBcdFx0aWQgOiBzdHJpa2VUZWFtLl9pZFxuXHQgICAgICAgXHR9KS5zdWNjZXNzKGZ1bmN0aW9uKCl7XG5cdCAgICAgICBcdFx0Zm9yICh2YXIgaSA9IHN0cmlrZVRlYW0ubWVtYmVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdCAgICAgICAgICAgIE1lbWJlclN2Yy51cGRhdGVJc0NoZWNrZWQoe1xuXHRcdCAgICAgICAgICAgICAgICBtZW1iZXJJZCAgOiBzdHJpa2VUZWFtLm1lbWJlcnNbaV0uX2lkLFxuXHRcdCAgICAgICAgICAgICAgICBtaXNzaW9uXHQgIDogc3RyaWtlVGVhbS5tZW1iZXJzW2ldLm1pc3Npb24sXG5cdFx0ICAgICAgICAgICAgICAgIGlzQ2hlY2tlZCA6IGZhbHNlXG5cdFx0ICAgICAgICAgICAgfSlcblx0XHQgICAgICAgIH07XHRcblx0ICAgICAgIFx0fSlcblxuXHQgICAgICAgXHQkc2NvcGUuc3RyaWtlVGVhbXMuc3BsaWNlKGlkLDEpO1xuXHRcdH07XG5cblx0XHQkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgICAgIFNvY2tldFN2Yy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcblx0ICAgIH0pXG59XSk7IiwiLyoqXG4qIEluTmV0IE1vZHVsZVxuKlxuKiBEZXNjcmlwdGlvblxuKi9cbmFuZ3VsYXIubW9kdWxlKCdJbk5ldCcpXG4uY29udHJvbGxlcignU2FmZXR5TW9kYWxDdHJsJywgWyckc2NvcGUnLCckbW9kYWxJbnN0YW5jZScsICckc3RhdGVQYXJhbXMnLCdTdFN2YycsICdNZW1iZXJTdmMnLCAnJHN0YXRlJywgJyR3aW5kb3cnLCAnc3RJZCcsICdVc2VyU3ZjJywgJ0JyYW5jaFN2YycsJ1NvY2tldFN2YycsXG5cdGZ1bmN0aW9uICgkc2NvcGUsICRtb2RhbEluc3RhbmNlLCAkc3RhdGVQYXJhbXMsIFN0U3ZjLCBNZW1iZXJTdmMsICRzdGF0ZSwgJHdpbmRvdywgc3RJZCwgVXNlclN2YywgIEJyYW5jaFN2YywgU29ja2V0U3ZjKSB7XG5cblx0XHR2YXIgYnJhbmNoID0gVXNlclN2Yy51c2VyQnJhbmNoKCk7IFxuXHRcdCRzY29wZS50aXRsZSA9IGJyYW5jaCArICAoc3RJZCArIDEgKTtcblxuXHRcdEJyYW5jaFN2Yy5mZXRjaEJ5TmFtZShicmFuY2gpLnN1Y2Nlc3MoZnVuY3Rpb24oZGV0YWlscyl7XG5cdFx0XHQkc2NvcGUuZGV0YWlscyA9IGRldGFpbHM7XG5cdFx0fSkudGhlbihmdW5jdGlvbigpe1xuXHRcdFx0aWYgKCAkc2NvcGUuZGV0YWlscykge1xuXHRcdFx0XHQkc2NvcGUuZGV0YWlscy5tZW1iZXJzID0gJHNjb3BlLmRldGFpbHMubWVtYmVycy5maWx0ZXIoZnVuY3Rpb24obWVtYmVyKXtcblx0XHRcdFx0XHRyZXR1cm4gbWVtYmVyLmlzQ2hlY2tlZCAhPSB0cnVlOyAgXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHQkc2NvcGUuZGV0YWlscy5tZW1iZXJzLmZvckVhY2goZnVuY3Rpb24obWVtYmVyKXtcblx0XHRcdFx0XHRtZW1iZXIubGltaXRUaW1lID0gbW9tZW50LmR1cmF0aW9uKG1lbWJlci53b3JraW5nVGltZSwgJ3NlY29uZHMnKTtcblx0XHRcdFx0fSlcblx0XHRcdH07XG5cdFx0fSk7XG5cblx0XHQkc2NvcGUuc3RyaWtlVGVhbSA9IHtcblx0XHRcdHBvc2l0aW9uICA6IFwi56ys5LiA6Z2iXCIsXG5cdFx0XHRwb3NpdGlvbnMgOiBbXCLnrKzkuIDpnaJcIixcIuesrOS6jOmdolwiLFwi56ys5LiJ6Z2iXCIsXCLnrKzlm5vpnaJcIl0sXG5cdFx0XHRtaXNzaW9uICAgOiBcIuaQtuaVkeWwj+e1hFwiLFxuXHRcdFx0bWlzc2lvbnMgIDogW1wi5pC25pWR5bCP57WEXCIsXCLmlZHmj7TlsI/ntYRcIixcIuaQnOaVkeWwj+e1hFwiXSxcblx0XHRcdGFyZWEgXHQgIDogXCLnrKzkuIDljYBcIixcblx0XHRcdGFyZWFzIFx0ICA6IFtcIuesrOS4gOWNgFwiLFwi56ys5LqM5Y2AXCIsXCLnrKzkuInljYBcIixcIuesrOWbm+WNgFwiLFwi56ys5LqU5Y2AXCJdXG5cdFx0fTtcblxuXHRcdCRzY29wZS5jaGVjayA9IGZ1bmN0aW9uKG1lbWJlcil7XG5cdFx0XHRtZW1iZXIuaXNDaGVja2VkID0gIW1lbWJlci5pc0NoZWNrZWQ7XG5cdFx0fTtcblxuXHRcdCRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbigpe1xuXHRcdFx0JG1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XG5cdFx0fTtcblxuXHQgICAgJHNjb3BlLnNhdmUgPSBmdW5jdGlvbigpe1xuXHQgICAgXHR2YXIgbWVtYmVycyA9ICRzY29wZS5kZXRhaWxzLm1lbWJlcnMuZmlsdGVyKGZ1bmN0aW9uKG1lbWJlcikge1xuXHRcdCAgICBcdFx0XHRcdHJldHVybiBtZW1iZXIuaXNDaGVja2VkID09PSB0cnVlIFxuXHQgICAgXHRcdFx0XHR9KTtcblxuXHQgICAgXHRpZiAobWVtYmVycy5sZW5ndGggPiAtMSkge1xuXG5cdFx0ICAgIFx0dmFyIHN0cmlrZVRlYW0gPSB7XG5cdFx0ICAgICAgXHRcdGlkIFx0XHQgICAgOiBzdElkICsgMSB8fCAwICwgXG5cdFx0ICAgICAgXHRcdGNhc2VJZCAgICAgIDogJHN0YXRlUGFyYW1zLmlkLFxuXHRcdCAgICAgIFx0XHRicmFuY2ggICAgICA6ICRzY29wZS5kZXRhaWxzLm5hbWUsXG5cdFx0ICAgICAgXHRcdGRpcmVjdG9yICAgIDogJHNjb3BlLmRldGFpbHMuZGlyZWN0b3IsXG5cdFx0ICAgICAgXHRcdHBvc2l0aW9uICAgIDogJHNjb3BlLnN0cmlrZVRlYW0ucG9zaXRpb24sXG5cdFx0ICAgICAgXHRcdHBvc2l0aW9ucyAgIDogJHNjb3BlLnN0cmlrZVRlYW0ucG9zaXRpb25zLFxuXHRcdCAgICAgIFx0XHRtaXNzaW9uICAgICA6ICRzY29wZS5zdHJpa2VUZWFtLm1pc3Npb24sXG5cdFx0ICAgICAgXHRcdG1pc3Npb25zICAgIDogJHNjb3BlLnN0cmlrZVRlYW0ubWlzc2lvbnMsIFxuXHRcdCAgICAgIFx0XHRhcmVhIFx0XHQ6ICRzY29wZS5zdHJpa2VUZWFtLmFyZWEsXG5cdFx0ICAgICAgXHRcdGFyZWFzIFx0XHQ6ICRzY29wZS5zdHJpa2VUZWFtLmFyZWFzLCBcblx0XHQgICAgICBcdFx0bWVtYmVycyAgICAgOiBtZW1iZXJzLFxuXHRcdCAgICAgIFx0XHRpc0Rpc21pc3NlZCA6IGZhbHNlLFxuXHRcdCAgICAgIFx0XHR3b3JraW5nVGltZSA6IF8ubWluKG1lbWJlcnMsIGZ1bmN0aW9uKG1lbWJlcil7IHJldHVybiBtZW1iZXIud29ya2luZ1RpbWU7IH0pLndvcmtpbmdUaW1lLFxuXHRcdCAgICAgIFx0XHRjcmVhdG9yIFx0OiBVc2VyU3ZjLmN1cnJlbnRVc2VyKCkgXHRcblx0XHQgICAgICBcdH07XG5cblx0ICAgICAgXHRcdGZvciAodmFyIGkgPSBtZW1iZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdCAgICBcdFx0XHRNZW1iZXJTdmMudXBkYXRlSXNDaGVja2VkKHtcblx0ICAgIFx0XHRcdFx0bWVtYmVySWQgIDogbWVtYmVyc1tpXS5faWQsXG5cdCAgICBcdFx0XHRcdGlzQ2hlY2tlZCA6IG1lbWJlcnNbaV0uaXNDaGVja2VkLFxuXHQgICAgXHRcdFx0XHRtaXNzaW9uXHQgIDogbWVtYmVyc1tpXS5taXNzaW9uXG5cdCAgICBcdFx0XHR9KVx0XHRcblx0XHQgICAgXHR9O1xuXG5cdFx0ICAgICAgXHRTdFN2Yy5jcmVhdGUoc3RyaWtlVGVhbSlcblx0XHQgICAgICBcdCRtb2RhbEluc3RhbmNlLmNsb3NlKCk7XG5cdCAgICBcdH1lbHNle1xuXHQgICAgXHRcdCR3aW5kb3cuYWxlcnQoXCJ5b3UgbXVzdCBvcmdhbml6ZSBzdHJpa2UgdGVhbVwiKVxuXHQgICAgXHR9O1xuXHRcdH07XG5cdFxufV0pOyIsIi8qKlxuKiBJbk5ldCBNb2R1bGVcbipcbiogRGVzY3JpcHRpb25cbiovXG5hbmd1bGFyLm1vZHVsZSgnSW5OZXQnKVxuLmNvbnRyb2xsZXIoJ1NhZmV0eVNldHRpbmdDdHJsJywgWyckc2NvcGUnLCAnc3RyaWtlVGVhbScsICckbW9kYWxJbnN0YW5jZScsICdTdFN2YycsICckc3RhdGUnLCAnTWVtYmVyU3ZjJywgJ0Nhc2VTdmMnLCAnJHN0YXRlUGFyYW1zJywgJ1NvY2tldFN2YycsXG5cdGZ1bmN0aW9uICgkc2NvcGUsIHN0cmlrZVRlYW0sICRtb2RhbEluc3RhbmNlLCBTdFN2YywgJHN0YXRlLCBNZW1iZXJTdmMsIENhc2VTdmMsICRzdGF0ZVBhcmFtcywgU29ja2V0U3ZjKSB7XG5cdFx0XG5cdFx0dmFyIG1lbWJlcnMgPSBbXTtcblx0XHR2YXIgbWVtYmVyT2JqcyA9W107XG5cdFx0JHNjb3BlLnN0cmlrZVRlYW0gPSBzdHJpa2VUZWFtO1xuXG5cdFx0Q2FzZVN2Yy5mZXRjaERldGFpbHMoJHN0YXRlUGFyYW1zLmlkKS5zdWNjZXNzKGZ1bmN0aW9uKGRldGFpbHMpe1xuXHRcdFx0JHNjb3BlLmRpc3BhdGNoID0gZGV0YWlscy5icmFuY2hJZHM7XG5cdFx0fSk7XG5cblx0XHQkc2NvcGUuY2hvb3NlQnJhbmNoID0gZnVuY3Rpb24oaWQpe1xuXHRcdFx0JHNjb3BlLm1lbWJlcnMgPSAkc2NvcGUuZGlzcGF0Y2hbaWRdLm1lbWJlcnNcblx0XHRcdGZvciAodmFyIGkgPSAkc2NvcGUubWVtYmVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0XHRpZiggJHNjb3BlLm1lbWJlcnNbaV0uaXNDaGVja2VkICl7XG5cdFx0XHRcdFx0JHNjb3BlLm1lbWJlcnMuc3BsaWNlKGksMSk7XG5cdFx0XHRcdH07XG5cdFx0XHR9O1xuXHRcdH07XG5cblx0XHQkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oKXtcblx0XHRcdCRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuXHRcdH07XG5cblx0XHQkc2NvcGUuY2hlY2sgPSBmdW5jdGlvbihtZW1iZXIpe1xuXHRcdFx0bWVtYmVyLmlzQ2hlY2tlZCA9ICFtZW1iZXIuaXNDaGVja2VkO1xuXHRcdFx0bWVtYmVycy5wdXNoKG1lbWJlci5faWQpO1xuXHRcdFx0bWVtYmVyT2Jqcy5wdXNoKG1lbWJlcik7XG5cdFx0fTtcblxuXHRcdCRzY29wZS51bmNoZWNrID0gZnVuY3Rpb24obWVtYmVyLCBpZCl7XG5cdFx0XHRtZW1iZXIuaXNDaGVja2VkID0gIW1lbWJlci5pc0NoZWNrZWQ7XG5cdFx0XHRtZW1iZXJzLnNwbGljZShpZCwxKTtcblx0XHRcdG1lbWJlck9ianMuc3BsaWNlKGlkLDEpO1xuXHRcdH1cblxuXHRcdCRzY29wZS5zYXZlID0gZnVuY3Rpb24oKXtcblxuXHRcdFx0U3RTdmMudXBkYXRlU3Qoe1xuXHRcdFx0XHRpZCA6IHN0cmlrZVRlYW0uX2lkLFxuXHRcdFx0XHRwb3NpdGlvbiA6IHN0cmlrZVRlYW0ucG9zaXRpb24sXG5cdFx0XHRcdGFyZWEgOiBzdHJpa2VUZWFtLmFyZWEsXG5cdFx0XHRcdG1pc3Npb24gOiBzdHJpa2VUZWFtLm1pc3Npb24sXG5cdFx0XHRcdG1lbWJlcklkcyA6IG1lbWJlcnNcblx0XHRcdH0pLnN1Y2Nlc3MoZnVuY3Rpb24oKXtcblx0XHRcdFx0Zm9yICh2YXIgaSA9IG1lbWJlcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHQgICAgICAgICAgICBNZW1iZXJTdmMudXBkYXRlSXNDaGVja2VkKHtcblx0XHQgICAgICAgICAgICAgICAgbWVtYmVySWQgIDogbWVtYmVyc1tpXS5faWQsXG5cdFx0ICAgICAgICAgICAgICAgIG1pc3Npb25cdCAgOiBtZW1iZXJzW2ldLm1pc3Npb24sIFxuXHRcdCAgICAgICAgICAgICAgICBpc0NoZWNrZWQgOiB0cnVlLFxuXHRcdCAgICAgICAgICAgIH0pXG5cdFx0ICAgICAgICB9O1xuXHRcdFx0fSlcblxuXHRcdFx0JG1vZGFsSW5zdGFuY2UuY2xvc2Uoe1xuXHRcdFx0XHRpZCA6IHN0cmlrZVRlYW0uX2lkLFxuXHRcdFx0XHRwb3NpdGlvbiA6IHN0cmlrZVRlYW0ucG9zaXRpb24sXG5cdFx0XHRcdGFyZWEgOiBzdHJpa2VUZWFtLmFyZWEsXG5cdFx0XHRcdG1lbWJlcnMgOiBtZW1iZXJPYmpzLFxuXHRcdFx0XHRjYXNlSWQgIDogc3RyaWtlVGVhbS5jYXNlSWQgXG5cdFx0XHR9KTtcblxuXHRcdFx0XG5cdFx0fTtcbn1dKSIsIi8qKlxuKiBJbk5ldCBNb2R1bGVcbipcbiogRGVzY3JpcHRpb25cbiovXG5hbmd1bGFyLm1vZHVsZSgnSW5OZXQnKVxuLnNlcnZpY2UoJ1NvY2tldFN2YycsWyAnJHJvb3RTY29wZScsICdzdG9yZScsICckcScsICckdGltZW91dCcsXG4gIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCBzdG9yZSwgJHEsICR0aW1lb3V0KSB7XG5cbiAgdGhpcy5pbml0ID0gIGZ1bmN0aW9uKHRva2VuKXtcbiAgICB2YXIgYXV0aFRva2VuID0gbnVsbFxuICAgIGlmICh0b2tlbikge1xuICAgICAgYXV0aFRva2VuID0gdG9rZW4gXG4gICAgfSBlbHNlIHtcbiAgICAgIGF1dGhUb2tlbiA9IHN0b3JlLmdldCgnand0JylcbiAgICB9O1xuICAgIHJldHVybiBpby5jb25uZWN0KCdodHRwczovLzEwNC4yMzYuMjAxLjUwOjMwMDAnLHsgcXVlcnkgOiAndG9rZW49JyArIGF1dGhUb2tlbiAsICdmb3JjZU5ldyc6dHJ1ZSB9KTtcbiAgfVxuXG4gIHZhciBzb2NrZXQgPSB0aGlzLmluaXQoKTtcblxuICB0aGlzLm9uID0gIGZ1bmN0aW9uIChldmVudE5hbWUsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5pbml0KCkub24oZXZlbnROYW1lLCBmdW5jdGlvbiAoKSB7ICBcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgJHJvb3RTY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICBjYWxsYmFjay5hcHBseShzb2NrZXQsIGFyZ3MpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICB0aGlzLmVtaXQgPSAgZnVuY3Rpb24gKGV2ZW50TmFtZSwgZGF0YSwgY2FsbGJhY2spIHtcbiAgICB0aGlzLmluaXQoKS5lbWl0KGV2ZW50TmFtZSwgZGF0YSwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAkcm9vdFNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHNvY2tldCwgYXJncyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pXG4gIH1cblxuICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycyA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5pbml0KCkucmVtb3ZlQWxsTGlzdGVuZXJzKGV2ZW50TmFtZSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICAkcm9vdFNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY2FsbGJhY2suYXBwbHkoc29ja2V0LCBhcmdzKTtcbiAgICAgICAgfSk7XG4gICAgfSk7IFxuICB9XG4gIFxufV0pIiwiLyoqXG4qIEluTmV3IE1vZHVsZVxuKlxuKiBEZXNjcmlwdGlvblxuKi9cbmFuZ3VsYXIubW9kdWxlKCdJbk5ldCcpXG4uc2VydmljZSgnU3RTdmMnLCBbICckaHR0cCcsIGZ1bmN0aW9uICgkaHR0cCkge1xuXHR0aGlzLmZldGNoID0gZnVuY3Rpb24oY2FzZUlkLCBicmFuY2gpe1xuXHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvc3RyaWtlVGVhbXM/Y2FzZUlkPScgKyBjYXNlSWQgKyAnJmJyYW5jaD0nICsgYnJhbmNoKTtcblx0fTtcblxuXHR0aGlzLmZldGNoQnlDYXNlID0gZnVuY3Rpb24oY2FzZUlkKXtcblx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3N0cmlrZVRlYW1zL3RvdGFsP2Nhc2VJZD0nICsgY2FzZUlkKTtcblx0fTtcblxuXHR0aGlzLmRpc21pc3NTdCA9IGZ1bmN0aW9uKGRhdGEpe1xuXHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvc3RyaWtlVGVhbXMvZGlzbWlzcz9pZD0nICsgZGF0YS5pZCk7XG5cdH07XG5cblx0dGhpcy51cGRhdGVTdCA9IGZ1bmN0aW9uKGRhdGEpe1xuXHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvc3RyaWtlVGVhbXMvdXBkYXRlP2lkPScgKyBkYXRhLmlkLCBkYXRhKTtcblx0fTtcblxuXHR0aGlzLnVwZGF0ZVRpbWVSZWNvcmQgPSBmdW5jdGlvbihkYXRhKXtcblx0XHRyZXR1cm4gJGh0dHAucHV0KCcvYXBpL3N0cmlrZVRlYW1zL3RpbWU/aWQ9JyArIGRhdGEuaWQsIGRhdGEpO1xuXHR9O1xuXG5cdHRoaXMuY3JlYXRlID0gZnVuY3Rpb24oc3RyaWtlVGVhbSl7XG5cdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvc3RyaWtlVGVhbXMnLCBzdHJpa2VUZWFtKTtcblx0fTtcblxuXHR0aGlzLmNvdW50ID0gZnVuY3Rpb24oY2FzZUlkKXtcblx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3N0cmlrZVRlYW1zL2NvdW50P2Nhc2VJZD0nICsgY2FzZUlkKTtcblx0fTtcblx0XG59XSkiLCIvKipcbiogSW5OZXQgTW9kdWxlXG4qXG4qIERlc2NyaXB0aW9uXG4qL1xuYW5ndWxhci5tb2R1bGUoJ0luTmV0Jylcbi5jb250cm9sbGVyKCdTdW1tYXJ5Q3RybCcsIFsnJHNjb3BlJywgJ1N0U3ZjJywgJyRzdGF0ZVBhcmFtcycsICckaW50ZXJ2YWwnLCAnJHN0YXRlJywgJ1NvY2tldFN2YycsXG5cdGZ1bmN0aW9uICgkc2NvcGUsIFN0U3ZjLCAkc3RhdGVQYXJhbXMsICRpbnRlcnZhbCwgJHN0YXRlLCBTb2NrZXRTdmMpIHtcblxuXHRcdFNvY2tldFN2Yy5vbigndGltZXJSdW5uaW5nJyxmdW5jdGlvbihzdCl7XG5cdFx0XHRmb3IgKHZhciBpID0gJHNjb3BlLnN0cmlrZVRlYW1zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHRcdGlmKCBhbmd1bGFyLmVxdWFscygkc2NvcGUuc3RyaWtlVGVhbXNbaV0uX2lkLCBzdC5zdElkKSl7XG5cdFx0XHRcdFx0JHNjb3BlLnN0cmlrZVRlYW1zW2ldLnRpbWVyUnVubmluZyA9IHN0LnRpbWVyUnVubmluZztcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9KVxuXG5cdFx0U29ja2V0U3ZjLm9uKCdwcm9ncmVzc1VwZGF0ZScsZnVuY3Rpb24oZGF0YSl7XG5cdFx0XHRmb3IgKHZhciBpID0gJHNjb3BlLnN0cmlrZVRlYW1zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHRcdGlmKCBhbmd1bGFyLmVxdWFscygkc2NvcGUuc3RyaWtlVGVhbXNbaV0uX2lkLCBkYXRhLmlkKSApe1xuXHRcdFx0XHRcdCRzY29wZS5zdHJpa2VUZWFtc1tpXS50aW1lclx0PSBtb21lbnQuZHVyYXRpb24oZGF0YS5taWxsaXMpOyBcblx0XHRcdFx0XHQkc2NvcGUuc3RyaWtlVGVhbXNbaV0ucHJvZ3Jlc3MgID0gZGF0YS5wcm9ncmVzcztcblx0XHRcdFx0XHQkc2NvcGUuc3RyaWtlVGVhbXNbaV0ucHJvZ3Jlc3NTdGF0ZSA9ICBkYXRhLnByb2dyZXNzU3RhdGU7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fSlcblxuXHRcdFNvY2tldFN2Yy5vbignbmV3U3QnLCBmdW5jdGlvbihzdCl7XG5cdFx0XHRpZiAoIGFuZ3VsYXIuZXF1YWxzKGNhc2VJZCxzdC5jYXNlSWQpKSB7XG5cdFx0XHRcdHZhciBuZXdTdCA9IGFuZ3VsYXIuY29weShzdCk7XG5cdFx0XHRcdCRzY29wZS5zdHJpa2VUZWFtcy5wdXNoKG5ld1N0KTtcblx0XHRcdH07XG5cdFx0XHQkc2NvcGUuZGVwbG95cyA9IGluaXRUYWJsZSgkc2NvcGUuc3RyaWtlVGVhbXMpO1xuXHRcdH0pO1xuXG5cdFx0U29ja2V0U3ZjLm9uKCd1cGRhdGVTdCcsIGZ1bmN0aW9uKGRhdGEpe1xuXHRcdFx0U3RTdmMuZmV0Y2hCeUNhc2UoY2FzZUlkKS5zdWNjZXNzKGZ1bmN0aW9uKHN0cmlrZVRlYW1zKXtcblx0XHRcdFx0JHNjb3BlLnN0cmlrZVRlYW1zID0gc3RyaWtlVGVhbXM7XG5cdFx0XHRcdCRzY29wZS5zdHJpa2VUZWFtcy5mb3JFYWNoKGZ1bmN0aW9uKHN0KXtcblx0XHRcdFx0XHRzdC5saW1pdFRpbWUgPSBtb21lbnQuZHVyYXRpb24oc3Qud29ya2luZ1RpbWUsJ3NlY29uZHMnKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdCRzY29wZS5kZXBsb3lzID0gaW5pdFRhYmxlKCRzY29wZS5zdHJpa2VUZWFtcyk7XG5cdFx0XHR9KTtcblxuXHRcdH0pXG5cblx0XHRTb2NrZXRTdmMub24oJ2Rpc21pc3MnLCBmdW5jdGlvbihkYXRhKXtcblx0XHRcdFN0U3ZjLmZldGNoQnlDYXNlKGNhc2VJZCkuc3VjY2VzcyhmdW5jdGlvbihzdHJpa2VUZWFtcyl7XG5cdFx0XHRcdCRzY29wZS5zdHJpa2VUZWFtcyA9IHN0cmlrZVRlYW1zO1xuXHRcdFx0XHQkc2NvcGUuZGVwbG95cyA9IGluaXRUYWJsZSgkc2NvcGUuc3RyaWtlVGVhbXMpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cblxuXHRcdHZhciBjYXNlSWQgPSAkc3RhdGVQYXJhbXMuaWQ7IFxuXG5cdFx0U3RTdmMuZmV0Y2hCeUNhc2UoY2FzZUlkKS5zdWNjZXNzKGZ1bmN0aW9uKHN0cmlrZVRlYW1zKXtcblx0XHRcdCRzY29wZS5zdHJpa2VUZWFtcyA9IHN0cmlrZVRlYW1zO1xuXHRcdFx0JHNjb3BlLnN0cmlrZVRlYW1zLmZvckVhY2goZnVuY3Rpb24oc3Qpe1xuXHRcdFx0XHRzdC5saW1pdFRpbWUgPSBtb21lbnQuZHVyYXRpb24oc3Qud29ya2luZ1RpbWUsJ3NlY29uZHMnKTtcblx0XHRcdH0pO1xuXHRcdFx0JHNjb3BlLmRlcGxveXMgPSBpbml0VGFibGUoJHNjb3BlLnN0cmlrZVRlYW1zKTtcblx0XHR9KTtcblxuXHRcdCRzY29wZS5wb3NpdGlvbiA9IHtcblx0XHRcdGRlZmF1bHRQb3MgOiBcIuesrOS4gOmdolwiLFxuXHRcdFx0cG9zaXRpb25zIDogW1wi56ys5LiA6Z2iXCIsXCLnrKzkuozpnaJcIixcIuesrOS4iemdolwiLFwi56ys5Zub6Z2iXCJdXG5cdFx0fTtcblxuXHRcdHZhciBpbml0VGFibGUgPSAgZnVuY3Rpb24oc3RyaWtlVGVhbXMpe1xuXHRcdCAgXHR2YXIgZGVwbG95QXJyYXkgPSBfLnJhbmdlKDQpLm1hcChmdW5jdGlvbiAoKSB7XG5cdFx0ICAgICAgICByZXR1cm4gXy5yYW5nZSg1KS5tYXAoZnVuY3Rpb24gKCkge1xuXHRcdCAgICAgICAgICAgIHJldHVybiB7IHRvdGFsTWVtYmVyIDogMCwgc3RUb3RhbCA6IDB9IDtcblx0XHQgICAgICAgIH0pO1xuXHRcdCAgICB9KTtcblxuXHRcdFx0aWYgKCBzdHJpa2VUZWFtcyApe1xuXHRcdFx0XHRmb3IgKHZhciBpID0gc3RyaWtlVGVhbXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdFx0XHR2YXIgdG90YWxNZW1iZXIgPSAwO1xuXHRcdFx0XHRcdHZhciBzdCA9IDA7ICBcblx0XHRcdFx0XHR2YXIgeCA9IF8uaW5kZXhPZihzdHJpa2VUZWFtc1tpXS5wb3NpdGlvbnMsIHN0cmlrZVRlYW1zW2ldLnBvc2l0aW9uKTtcblx0XHRcdFx0XHR2YXIgeSA9IF8uaW5kZXhPZihzdHJpa2VUZWFtc1tpXS5hcmVhcywgc3RyaWtlVGVhbXNbaV0uYXJlYSk7XG5cdFx0XHRcdFx0ZGVwbG95QXJyYXlbeF1beV0uc3RUb3RhbCArPSAxO1xuXHRcdFx0XHRcdGRlcGxveUFycmF5W3hdW3ldLnRvdGFsTWVtYmVyICs9IHN0cmlrZVRlYW1zW2ldLm1lbWJlcnMubGVuZ3RoOyAgXG5cblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBkZXBsb3lBcnJheVxuXHRcdH07XG5cdFx0XG5cdFx0JHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgICAgICBTb2NrZXRTdmMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG5cdCAgICB9KTtcbn1dKTsiLCIvKipcbiogSW5OZXQgTW9kdWxlXG4qXG4qIERlc2NyaXB0aW9uXG4qL1xuYW5ndWxhci5tb2R1bGUoJ0luTmV0Jylcbi5jb250cm9sbGVyKCdUaW1lckN0cmwnLCBbJyRzY29wZScsICdTb2NrZXRTdmMnLFxuICAgIGZ1bmN0aW9uKCRzY29wZSwgU29ja2V0U3ZjKXtcblxuXHQkc2NvcGUudGltZXJSdW5uaW5nID0gdHJ1ZTtcblxuICAgICRzY29wZS5zdGFydFRpbWVyID0gZnVuY3Rpb24oc3QsIGlkKXtcbiAgICBcdCRzY29wZS4kYnJvYWRjYXN0KCd0aW1lci1zdGFydCcpO1xuICAgIFx0JHNjb3BlLnRpbWVyUnVubmluZyA9IHRydWU7XG4gICAgICAgIFNvY2tldFN2Yy5lbWl0KCd0aW1lcicsIHsgc3RJZCA6IHN0Ll9pZCwgdGltZXJSdW5uaW5nIDogdHJ1ZSB9IClcbiAgICB9O1xuXG4gICAgJHNjb3BlLnN0b3BUaW1lciA9IGZ1bmN0aW9uKHN0LGlkKXtcbiAgICBcdCRzY29wZS4kYnJvYWRjYXN0KCd0aW1lci1zdG9wJyk7XG4gICAgXHQkc2NvcGUudGltZXJSdW5uaW5nID0gZmFsc2U7XG4gICAgICAgIFNvY2tldFN2Yy5lbWl0KCd0aW1lcicsIHsgc3RJZCA6IHN0Ll9pZCwgdGltZXJSdW5uaW5nIDogZmFsc2UgfSApXG4gICAgfTtcblxuICAgICRzY29wZS5yZXN1bWVUaW1lciA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCd0aW1lci1yZXN1bWUnKTtcbiAgICAgICAgJHNjb3BlLnRpbWVyUnVubmluZyA9IGZhbHNlO1xuICAgIH07XG5cdFxufV0pOyIsIi8qKlxuKiAgTW9kdWxlXG4qXG4qIERlc2NyaXB0aW9uXG4qL1xuYW5ndWxhci5tb2R1bGUoJ0luTmV0Jylcbi5jb250cm9sbGVyKCdUb3BOYXZDdHJsJywgWyckc2NvcGUnLCAnJGxvY2F0aW9uJywnJHN0YXRlJywgJyRpbnRlcnZhbCcsICdzdG9yZScsICdTb2NrZXRTdmMnLCAnVXNlclN2YycsJyR3aW5kb3cnLFxuXHRmdW5jdGlvbiAoJHNjb3BlLCAkbG9jYXRpb24sJHN0YXRlLCAkaW50ZXJ2YWwsIHN0b3JlLCBTb2NrZXRTdmMsIFVzZXJTdmMsICR3aW5kb3cpIHtcblxuXHQkc2NvcGUuY3VycmVudFRpbWUgPSAgbW9tZW50KCkuZm9ybWF0KCdNTU0gRG8sIGg6bW06c3MgYScpO1xuXHQkaW50ZXJ2YWwoZnVuY3Rpb24oKXtcblx0XHRtb21lbnQubG9jYWxlKCd6aC10dycpO1xuXHRcdCRzY29wZS5jdXJyZW50VGltZSA9ICBtb21lbnQoKS5mb3JtYXQoJ01NTSBEbywgaDptbTpzcyBhJyk7XG5cdH0sIDEwMDApO1xuXG5cdCRzY29wZS5sb2dvdXQgPSBmdW5jdGlvbigpe1xuXHRcdHZhciBhY2NvdW50ID0gVXNlclN2Yy5jdXJyZW50QWNjb3VudCgpO1xuXHRcdFNvY2tldFN2Yy5lbWl0KCdsb2dvdXQnKTtcblx0XHQkc3RhdGUuZ28oJ2Fub24ubG9naW4nKTtcblx0fTtcblx0XG59XSkiLCIvKipcbiogSW5OZXQgTW9kdWxlXG4qXG4qIERlc2NyaXB0aW9uXG4qL1xuYW5ndWxhci5tb2R1bGUoJ0luTmV0Jylcbi5zZXJ2aWNlKCdVc2VyU3ZjJywgWyAnJGh0dHAnLCAnc3RvcmUnLCAnand0SGVscGVyJywgZnVuY3Rpb24gKCRodHRwLCBzdG9yZSwgand0SGVscGVyKSB7XG5cblx0dGhpcy5mZXRjaE9ubGluZVVzZXIgPSBmdW5jdGlvbigpe1xuXHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvdXNlcnMvdXNlclN0YXRlJyk7XG5cdH07XG5cblx0dGhpcy5yZWdpc3RlciA9IGZ1bmN0aW9uKCl7XG5cdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvdXNlcnMnKTtcblx0fTtcblxuXHR0aGlzLmxvZ2luID0gZnVuY3Rpb24odXNlcil7XG5cdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvdXNlcnMvYXV0aGVudGljYXRlJywgdXNlcik7XG5cdH07XG5cblx0dGhpcy5pc0xvZ2dlZEluID0gZnVuY3Rpb24oKXtcblx0XHRyZXR1cm4gc3RvcmUuZ2V0KCdqd3QnKTtcblx0fTtcblxuXHR0aGlzLmlzVmFsaWQgPSBmdW5jdGlvbiggYnJhbmNoICl7XG5cdFx0aWYgKHRoaXMuaXNMb2dnZWRJbikge1xuXHRcdFx0aWYgKGp3dEhlbHBlci5kZWNvZGVUb2tlbihzdG9yZS5nZXQoJ2p3dCcpKS5icmFuY2ggPT0gXCLnrKzkuInmlZHngb3mlZHorbflpKfpmopcIiB8fCBqd3RIZWxwZXIuZGVjb2RlVG9rZW4oc3RvcmUuZ2V0KCdqd3QnKSkuYnJhbmNoID09IGJyYW5jaCkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTsgXG5cdFx0XHR9ZWxzZSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH07XG5cdFx0fTtcblxuXHRcdHJldHVybiBmYWxzZSBcblx0fTtcblxuXHR0aGlzLnVzZXJCcmFuY2ggPSBmdW5jdGlvbigpe1xuXHRcdGlmICh0aGlzLmlzTG9nZ2VkSW4pIHtcblx0XHRcdHJldHVybiBqd3RIZWxwZXIuZGVjb2RlVG9rZW4oc3RvcmUuZ2V0KCdqd3QnKSkuYnJhbmNoO1xuXHRcdH07XG5cdH07XG5cblx0dGhpcy5jdXJyZW50VXNlciA9IGZ1bmN0aW9uKCl7XG5cdFx0aWYgKHRoaXMuaXNMb2dnZWRJbikge1xuXHRcdFx0cmV0dXJuIGp3dEhlbHBlci5kZWNvZGVUb2tlbihzdG9yZS5nZXQoJ2p3dCcpKS51c2VybmFtZTtcblx0XHR9O1xuXHR9O1xuXG5cdHRoaXMuY3VycmVudEFjY291bnQgPSBmdW5jdGlvbigpe1xuXHRcdGlmICh0aGlzLmlzTG9nZ2VkSW4pIHtcblx0XHRcdHJldHVybiBqd3RIZWxwZXIuZGVjb2RlVG9rZW4oc3RvcmUuZ2V0KCdqd3QnKSkuYWNjb3VudDtcblx0XHR9OyBcblx0fTtcblxuXHR0aGlzLmFjY2Vzc0xldmVsID0gZnVuY3Rpb24oKXtcblx0XHRpZiAodGhpcy5pc0xvZ2dlZEluKSB7XG5cdFx0XHRyZXR1cm4gand0SGVscGVyLmRlY29kZVRva2VuKHN0b3JlLmdldCgnand0JykpLmFjY2Vzc0xldmVsO1xuXHRcdH07XG5cdH07XG5cblx0dGhpcy5jYXNlSWQgPSBmdW5jdGlvbigpe1xuXHRcdGlmICh0aGlzLmlzTG9nZ2VkSW4pIHtcblx0XHRcdHJldHVybiBqd3RIZWxwZXIuZGVjb2RlVG9rZW4oc3RvcmUuZ2V0KCdqd3QnKSkuY2FzZUlkO1xuXHRcdH07XG5cdH07XG5cbn1dKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=